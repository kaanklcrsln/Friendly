function Fy(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Uy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var By={exports:{}},Kc={},zy={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sl=Symbol.for("react.element"),fS=Symbol.for("react.portal"),pS=Symbol.for("react.fragment"),mS=Symbol.for("react.strict_mode"),gS=Symbol.for("react.profiler"),_S=Symbol.for("react.provider"),vS=Symbol.for("react.context"),yS=Symbol.for("react.forward_ref"),wS=Symbol.for("react.suspense"),ES=Symbol.for("react.memo"),CS=Symbol.for("react.lazy"),Dg=Symbol.iterator;function SS(t){return t===null||typeof t!="object"?null:(t=Dg&&t[Dg]||t["@@iterator"],typeof t=="function"?t:null)}var $y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hy=Object.assign,Wy={};function Po(t,e,n){this.props=t,this.context=e,this.refs=Wy,this.updater=n||$y}Po.prototype.isReactComponent={};Po.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Po.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vy(){}Vy.prototype=Po.prototype;function np(t,e,n){this.props=t,this.context=e,this.refs=Wy,this.updater=n||$y}var rp=np.prototype=new Vy;rp.constructor=np;Hy(rp,Po.prototype);rp.isPureReactComponent=!0;var Lg=Array.isArray,Gy=Object.prototype.hasOwnProperty,ip={current:null},Ky={key:!0,ref:!0,__self:!0,__source:!0};function qy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Gy.call(e,r)&&!Ky.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Sl,type:t,key:s,ref:o,props:i,_owner:ip.current}}function kS(t,e){return{$$typeof:Sl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sl}function TS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Og=/\/+/g;function $d(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TS(""+t.key):e.toString(36)}function Pu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sl:case fS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+$d(o,0):r,Lg(i)?(n="",t!=null&&(n=t.replace(Og,"$&/")+"/"),Pu(i,e,n,"",function(c){return c})):i!=null&&(sp(i)&&(i=kS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Og,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Lg(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+$d(s,l);o+=Pu(s,e,n,u,i)}else if(u=SS(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+$d(s,l++),o+=Pu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function su(t,e,n){if(t==null)return t;var r=[],i=0;return Pu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function IS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},Au={transition:null},xS={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Au,ReactCurrentOwner:ip};function Yy(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:su,forEach:function(t,e,n){su(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return su(t,function(){e++}),e},toArray:function(t){return su(t,function(e){return e})||[]},only:function(t){if(!sp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Po;fe.Fragment=pS;fe.Profiler=gS;fe.PureComponent=np;fe.StrictMode=mS;fe.Suspense=wS;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xS;fe.act=Yy;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Hy({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ip.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Gy.call(e,u)&&!Ky.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Sl,type:t.type,key:i,ref:s,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:vS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_S,_context:t},t.Consumer=t};fe.createElement=qy;fe.createFactory=function(t){var e=qy.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:yS,render:t}};fe.isValidElement=sp;fe.lazy=function(t){return{$$typeof:CS,_payload:{_status:-1,_result:t},_init:IS}};fe.memo=function(t,e){return{$$typeof:ES,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Au.transition;Au.transition={};try{t()}finally{Au.transition=e}};fe.unstable_act=Yy;fe.useCallback=function(t,e){return Qt.current.useCallback(t,e)};fe.useContext=function(t){return Qt.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};fe.useEffect=function(t,e){return Qt.current.useEffect(t,e)};fe.useId=function(){return Qt.current.useId()};fe.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return Qt.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};fe.useRef=function(t){return Qt.current.useRef(t)};fe.useState=function(t){return Qt.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return Qt.current.useTransition()};fe.version="18.3.1";zy.exports=fe;var L=zy.exports;const Qy=Uy(L),NS=Fy({__proto__:null,default:Qy},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS=L,PS=Symbol.for("react.element"),AS=Symbol.for("react.fragment"),bS=Object.prototype.hasOwnProperty,DS=RS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LS={key:!0,ref:!0,__self:!0,__source:!0};function Xy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bS.call(e,r)&&!LS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:PS,type:t,key:s,ref:o,props:i,_owner:DS.current}}Kc.Fragment=AS;Kc.jsx=Xy;Kc.jsxs=Xy;By.exports=Kc;var m=By.exports,Lh={},Jy={exports:{}},yn={},Zy={exports:{}},ew={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Z){var re=H.length;H.push(Z);e:for(;0<re;){var Se=re-1>>>1,de=H[Se];if(0<i(de,Z))H[Se]=Z,H[re]=de,re=Se;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Z=H[0],re=H.pop();if(re!==Z){H[0]=re;e:for(var Se=0,de=H.length,Ne=de>>>1;Se<Ne;){var zt=2*(Se+1)-1,et=H[zt],Ct=zt+1,St=H[Ct];if(0>i(et,re))Ct<de&&0>i(St,et)?(H[Se]=St,H[Ct]=re,Se=Ct):(H[Se]=et,H[zt]=re,Se=zt);else if(Ct<de&&0>i(St,re))H[Se]=St,H[Ct]=re,Se=Ct;else break e}}return Z}function i(H,Z){var re=H.sortIndex-Z.sortIndex;return re!==0?re:H.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,h=null,g=3,w=!1,k=!1,N=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=H)r(c),Z.sortIndex=Z.expirationTime,e(u,Z);else break;Z=n(c)}}function P(H){if(N=!1,S(H),!k)if(n(u)!==null)k=!0,Xn(F);else{var Z=n(c);Z!==null&&Jt(P,Z.startTime-H)}}function F(H,Z){k=!1,N&&(N=!1,v(E),E=-1),w=!0;var re=g;try{for(S(Z),h=n(u);h!==null&&(!(h.expirationTime>Z)||H&&!b());){var Se=h.callback;if(typeof Se=="function"){h.callback=null,g=h.priorityLevel;var de=Se(h.expirationTime<=Z);Z=t.unstable_now(),typeof de=="function"?h.callback=de:h===n(u)&&r(u),S(Z)}else r(u);h=n(u)}if(h!==null)var Ne=!0;else{var zt=n(c);zt!==null&&Jt(P,zt.startTime-Z),Ne=!1}return Ne}finally{h=null,g=re,w=!1}}var B=!1,_=null,E=-1,I=5,x=-1;function b(){return!(t.unstable_now()-x<I)}function D(){if(_!==null){var H=t.unstable_now();x=H;var Z=!0;try{Z=_(!0,H)}finally{Z?R():(B=!1,_=null)}}else B=!1}var R;if(typeof y=="function")R=function(){y(D)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Et=Pe.port2;Pe.port1.onmessage=D,R=function(){Et.postMessage(null)}}else R=function(){T(D,0)};function Xn(H){_=H,B||(B=!0,R())}function Jt(H,Z){E=T(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){k||w||(k=!0,Xn(F))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var re=g;g=Z;try{return H()}finally{g=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=g;g=H;try{return Z()}finally{g=re}},t.unstable_scheduleCallback=function(H,Z,re){var Se=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Se+re:Se):re=Se,H){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=re+de,H={id:f++,callback:Z,priorityLevel:H,startTime:re,expirationTime:de,sortIndex:-1},re>Se?(H.sortIndex=re,e(c,H),n(u)===null&&H===n(c)&&(N?(v(E),E=-1):N=!0,Jt(P,re-Se))):(H.sortIndex=de,e(u,H),k||w||(k=!0,Xn(F))),H},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(H){var Z=g;return function(){var re=g;g=Z;try{return H.apply(this,arguments)}finally{g=re}}}})(ew);Zy.exports=ew;var OS=Zy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS=L,vn=OS;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tw=new Set,Wa={};function Ss(t,e){mo(t,e),mo(t+"Capture",e)}function mo(t,e){for(Wa[t]=e,t=0;t<e.length;t++)tw.add(e[t])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oh=Object.prototype.hasOwnProperty,jS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mg={},jg={};function FS(t){return Oh.call(jg,t)?!0:Oh.call(Mg,t)?!1:jS.test(t)?jg[t]=!0:(Mg[t]=!0,!1)}function US(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BS(t,e,n,r){if(e===null||typeof e>"u"||US(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var op=/[\-:]([a-z])/g;function ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(op,ap);At[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(op,ap);At[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(op,ap);At[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function lp(t,e,n,r){var i=At.hasOwnProperty(e)?At[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BS(e,n,i,r)&&(n=null),r||i===null?FS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=MS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ou=Symbol.for("react.element"),Ws=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),up=Symbol.for("react.strict_mode"),Mh=Symbol.for("react.profiler"),nw=Symbol.for("react.provider"),rw=Symbol.for("react.context"),cp=Symbol.for("react.forward_ref"),jh=Symbol.for("react.suspense"),Fh=Symbol.for("react.suspense_list"),dp=Symbol.for("react.memo"),ri=Symbol.for("react.lazy"),iw=Symbol.for("react.offscreen"),Fg=Symbol.iterator;function ra(t){return t===null||typeof t!="object"?null:(t=Fg&&t[Fg]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,Hd;function ya(t){if(Hd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hd=e&&e[1]||""}return`
`+Hd+t}var Wd=!1;function Vd(t,e){if(!t||Wd)return"";Wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ya(t):""}function zS(t){switch(t.tag){case 5:return ya(t.type);case 16:return ya("Lazy");case 13:return ya("Suspense");case 19:return ya("SuspenseList");case 0:case 2:case 15:return t=Vd(t.type,!1),t;case 11:return t=Vd(t.type.render,!1),t;case 1:return t=Vd(t.type,!0),t;default:return""}}function Uh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vs:return"Fragment";case Ws:return"Portal";case Mh:return"Profiler";case up:return"StrictMode";case jh:return"Suspense";case Fh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rw:return(t.displayName||"Context")+".Consumer";case nw:return(t._context.displayName||"Context")+".Provider";case cp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dp:return e=t.displayName||null,e!==null?e:Uh(t.type)||"Memo";case ri:e=t._payload,t=t._init;try{return Uh(t(e))}catch{}}return null}function $S(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uh(e);case 8:return e===up?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HS(t){var e=sw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function au(t){t._valueTracker||(t._valueTracker=HS(t))}function ow(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bh(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ug(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ri(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aw(t,e){e=e.checked,e!=null&&lp(t,"checked",e,!1)}function zh(t,e){aw(t,e);var n=Ri(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$h(t,e.type,n):e.hasOwnProperty("defaultValue")&&$h(t,e.type,Ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $h(t,e,n){(e!=="number"||Qu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wa=Array.isArray;function io(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ri(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Hh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(wa(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ri(n)}}function lw(t,e){var n=Ri(e.value),r=Ri(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $g(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lu,cw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lu=lu||document.createElement("div"),lu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Va(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WS=["Webkit","ms","Moz","O"];Object.keys(Ia).forEach(function(t){WS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ia[e]=Ia[t]})});function dw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ia.hasOwnProperty(t)&&Ia[t]?(""+e).trim():e+"px"}function hw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=dw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var VS=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vh(t,e){if(e){if(VS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Gh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kh=null;function hp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qh=null,so=null,oo=null;function Hg(t){if(t=Il(t)){if(typeof qh!="function")throw Error($(280));var e=t.stateNode;e&&(e=Jc(e),qh(t.stateNode,t.type,e))}}function fw(t){so?oo?oo.push(t):oo=[t]:so=t}function pw(){if(so){var t=so,e=oo;if(oo=so=null,Hg(t),e)for(t=0;t<e.length;t++)Hg(e[t])}}function mw(t,e){return t(e)}function gw(){}var Gd=!1;function _w(t,e,n){if(Gd)return t(e,n);Gd=!0;try{return mw(t,e,n)}finally{Gd=!1,(so!==null||oo!==null)&&(gw(),pw())}}function Ga(t,e){var n=t.stateNode;if(n===null)return null;var r=Jc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Yh=!1;if(Or)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){Yh=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{Yh=!1}function GS(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var xa=!1,Xu=null,Ju=!1,Qh=null,KS={onError:function(t){xa=!0,Xu=t}};function qS(t,e,n,r,i,s,o,l,u){xa=!1,Xu=null,GS.apply(KS,arguments)}function YS(t,e,n,r,i,s,o,l,u){if(qS.apply(this,arguments),xa){if(xa){var c=Xu;xa=!1,Xu=null}else throw Error($(198));Ju||(Ju=!0,Qh=c)}}function ks(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wg(t){if(ks(t)!==t)throw Error($(188))}function QS(t){var e=t.alternate;if(!e){if(e=ks(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Wg(i),t;if(s===r)return Wg(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function yw(t){return t=QS(t),t!==null?ww(t):null}function ww(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ww(t);if(e!==null)return e;t=t.sibling}return null}var Ew=vn.unstable_scheduleCallback,Vg=vn.unstable_cancelCallback,XS=vn.unstable_shouldYield,JS=vn.unstable_requestPaint,it=vn.unstable_now,ZS=vn.unstable_getCurrentPriorityLevel,fp=vn.unstable_ImmediatePriority,Cw=vn.unstable_UserBlockingPriority,Zu=vn.unstable_NormalPriority,ek=vn.unstable_LowPriority,Sw=vn.unstable_IdlePriority,qc=null,lr=null;function tk(t){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(qc,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:ik,nk=Math.log,rk=Math.LN2;function ik(t){return t>>>=0,t===0?32:31-(nk(t)/rk|0)|0}var uu=64,cu=4194304;function Ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ec(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ea(l):(s&=o,s!==0&&(r=Ea(s)))}else o=n&~i,o!==0?r=Ea(o):s!==0&&(r=Ea(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),i=1<<n,r|=t[n],e&=~i;return r}function sk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ok(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Gn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=sk(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Xh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kw(){var t=uu;return uu<<=1,!(uu&4194240)&&(uu=64),t}function Kd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function ak(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function pp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function Tw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Iw,mp,xw,Nw,Rw,Jh=!1,du=[],_i=null,vi=null,yi=null,Ka=new Map,qa=new Map,si=[],lk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gg(t,e){switch(t){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":Ka.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qa.delete(e.pointerId)}}function sa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Il(e),e!==null&&mp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uk(t,e,n,r,i){switch(e){case"focusin":return _i=sa(_i,t,e,n,r,i),!0;case"dragenter":return vi=sa(vi,t,e,n,r,i),!0;case"mouseover":return yi=sa(yi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ka.set(s,sa(Ka.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qa.set(s,sa(qa.get(s)||null,t,e,n,r,i)),!0}return!1}function Pw(t){var e=ts(t.target);if(e!==null){var n=ks(e);if(n!==null){if(e=n.tag,e===13){if(e=vw(n),e!==null){t.blockedOn=e,Rw(t.priority,function(){xw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kh=r,n.target.dispatchEvent(r),Kh=null}else return e=Il(n),e!==null&&mp(e),t.blockedOn=n,!1;e.shift()}return!0}function Kg(t,e,n){bu(t)&&n.delete(e)}function ck(){Jh=!1,_i!==null&&bu(_i)&&(_i=null),vi!==null&&bu(vi)&&(vi=null),yi!==null&&bu(yi)&&(yi=null),Ka.forEach(Kg),qa.forEach(Kg)}function oa(t,e){t.blockedOn===e&&(t.blockedOn=null,Jh||(Jh=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,ck)))}function Ya(t){function e(i){return oa(i,t)}if(0<du.length){oa(du[0],t);for(var n=1;n<du.length;n++){var r=du[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_i!==null&&oa(_i,t),vi!==null&&oa(vi,t),yi!==null&&oa(yi,t),Ka.forEach(e),qa.forEach(e),n=0;n<si.length;n++)r=si[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<si.length&&(n=si[0],n.blockedOn===null);)Pw(n),n.blockedOn===null&&si.shift()}var ao=Hr.ReactCurrentBatchConfig,tc=!0;function dk(t,e,n,r){var i=Ie,s=ao.transition;ao.transition=null;try{Ie=1,gp(t,e,n,r)}finally{Ie=i,ao.transition=s}}function hk(t,e,n,r){var i=Ie,s=ao.transition;ao.transition=null;try{Ie=4,gp(t,e,n,r)}finally{Ie=i,ao.transition=s}}function gp(t,e,n,r){if(tc){var i=Zh(t,e,n,r);if(i===null)rh(t,e,r,nc,n),Gg(t,r);else if(uk(i,t,e,n,r))r.stopPropagation();else if(Gg(t,r),e&4&&-1<lk.indexOf(t)){for(;i!==null;){var s=Il(i);if(s!==null&&Iw(s),s=Zh(t,e,n,r),s===null&&rh(t,e,r,nc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else rh(t,e,r,null,n)}}var nc=null;function Zh(t,e,n,r){if(nc=null,t=hp(r),t=ts(t),t!==null)if(e=ks(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nc=t,null}function Aw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZS()){case fp:return 1;case Cw:return 4;case Zu:case ek:return 16;case Sw:return 536870912;default:return 16}default:return 16}}var hi=null,_p=null,Du=null;function bw(){if(Du)return Du;var t,e=_p,n=e.length,r,i="value"in hi?hi.value:hi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Du=i.slice(t,1<r?1-r:void 0)}function Lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hu(){return!0}function qg(){return!1}function wn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hu:qg,this.isPropagationStopped=qg,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hu)},persist:function(){},isPersistent:hu}),e}var Ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vp=wn(Ao),Tl=qe({},Ao,{view:0,detail:0}),fk=wn(Tl),qd,Yd,aa,Yc=qe({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==aa&&(aa&&t.type==="mousemove"?(qd=t.screenX-aa.screenX,Yd=t.screenY-aa.screenY):Yd=qd=0,aa=t),qd)},movementY:function(t){return"movementY"in t?t.movementY:Yd}}),Yg=wn(Yc),pk=qe({},Yc,{dataTransfer:0}),mk=wn(pk),gk=qe({},Tl,{relatedTarget:0}),Qd=wn(gk),_k=qe({},Ao,{animationName:0,elapsedTime:0,pseudoElement:0}),vk=wn(_k),yk=qe({},Ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wk=wn(yk),Ek=qe({},Ao,{data:0}),Qg=wn(Ek),Ck={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kk[t])?!!e[t]:!1}function yp(){return Tk}var Ik=qe({},Tl,{key:function(t){if(t.key){var e=Ck[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yp,charCode:function(t){return t.type==="keypress"?Lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xk=wn(Ik),Nk=qe({},Yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xg=wn(Nk),Rk=qe({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yp}),Pk=wn(Rk),Ak=qe({},Ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),bk=wn(Ak),Dk=qe({},Yc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lk=wn(Dk),Ok=[9,13,27,32],wp=Or&&"CompositionEvent"in window,Na=null;Or&&"documentMode"in document&&(Na=document.documentMode);var Mk=Or&&"TextEvent"in window&&!Na,Dw=Or&&(!wp||Na&&8<Na&&11>=Na),Jg=" ",Zg=!1;function Lw(t,e){switch(t){case"keyup":return Ok.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ow(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gs=!1;function jk(t,e){switch(t){case"compositionend":return Ow(e);case"keypress":return e.which!==32?null:(Zg=!0,Jg);case"textInput":return t=e.data,t===Jg&&Zg?null:t;default:return null}}function Fk(t,e){if(Gs)return t==="compositionend"||!wp&&Lw(t,e)?(t=bw(),Du=_p=hi=null,Gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dw&&e.locale!=="ko"?null:e.data;default:return null}}var Uk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Uk[t.type]:e==="textarea"}function Mw(t,e,n,r){fw(r),e=rc(e,"onChange"),0<e.length&&(n=new vp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ra=null,Qa=null;function Bk(t){Kw(t,0)}function Qc(t){var e=Ys(t);if(ow(e))return t}function zk(t,e){if(t==="change")return e}var jw=!1;if(Or){var Xd;if(Or){var Jd="oninput"in document;if(!Jd){var t_=document.createElement("div");t_.setAttribute("oninput","return;"),Jd=typeof t_.oninput=="function"}Xd=Jd}else Xd=!1;jw=Xd&&(!document.documentMode||9<document.documentMode)}function n_(){Ra&&(Ra.detachEvent("onpropertychange",Fw),Qa=Ra=null)}function Fw(t){if(t.propertyName==="value"&&Qc(Qa)){var e=[];Mw(e,Qa,t,hp(t)),_w(Bk,e)}}function $k(t,e,n){t==="focusin"?(n_(),Ra=e,Qa=n,Ra.attachEvent("onpropertychange",Fw)):t==="focusout"&&n_()}function Hk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qc(Qa)}function Wk(t,e){if(t==="click")return Qc(e)}function Vk(t,e){if(t==="input"||t==="change")return Qc(e)}function Gk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:Gk;function Xa(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Oh.call(e,i)||!Yn(t[i],e[i]))return!1}return!0}function r_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i_(t,e){var n=r_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=r_(n)}}function Uw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Bw(){for(var t=window,e=Qu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qu(t.document)}return e}function Ep(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Kk(t){var e=Bw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Uw(n.ownerDocument.documentElement,n)){if(r!==null&&Ep(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=i_(n,s);var o=i_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qk=Or&&"documentMode"in document&&11>=document.documentMode,Ks=null,ef=null,Pa=null,tf=!1;function s_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tf||Ks==null||Ks!==Qu(r)||(r=Ks,"selectionStart"in r&&Ep(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pa&&Xa(Pa,r)||(Pa=r,r=rc(ef,"onSelect"),0<r.length&&(e=new vp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ks)))}function fu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qs={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},Zd={},zw={};Or&&(zw=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Xc(t){if(Zd[t])return Zd[t];if(!qs[t])return t;var e=qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zw)return Zd[t]=e[n];return t}var $w=Xc("animationend"),Hw=Xc("animationiteration"),Ww=Xc("animationstart"),Vw=Xc("transitionend"),Gw=new Map,o_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){Gw.set(t,e),Ss(e,[t])}for(var eh=0;eh<o_.length;eh++){var th=o_[eh],Yk=th.toLowerCase(),Qk=th[0].toUpperCase()+th.slice(1);Mi(Yk,"on"+Qk)}Mi($w,"onAnimationEnd");Mi(Hw,"onAnimationIteration");Mi(Ww,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi(Vw,"onTransitionEnd");mo("onMouseEnter",["mouseout","mouseover"]);mo("onMouseLeave",["mouseout","mouseover"]);mo("onPointerEnter",["pointerout","pointerover"]);mo("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function a_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,YS(r,e,void 0,t),t.currentTarget=null}function Kw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;a_(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;a_(i,l,c),s=u}}}if(Ju)throw t=Qh,Ju=!1,Qh=null,t}function Ue(t,e){var n=e[af];n===void 0&&(n=e[af]=new Set);var r=t+"__bubble";n.has(r)||(qw(e,t,2,!1),n.add(r))}function nh(t,e,n){var r=0;e&&(r|=4),qw(n,t,r,e)}var pu="_reactListening"+Math.random().toString(36).slice(2);function Ja(t){if(!t[pu]){t[pu]=!0,tw.forEach(function(n){n!=="selectionchange"&&(Xk.has(n)||nh(n,!1,t),nh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pu]||(e[pu]=!0,nh("selectionchange",!1,e))}}function qw(t,e,n,r){switch(Aw(e)){case 1:var i=dk;break;case 4:i=hk;break;default:i=gp}n=i.bind(null,e,n,t),i=void 0,!Yh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function rh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=ts(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}_w(function(){var c=s,f=hp(n),h=[];e:{var g=Gw.get(t);if(g!==void 0){var w=vp,k=t;switch(t){case"keypress":if(Lu(n)===0)break e;case"keydown":case"keyup":w=xk;break;case"focusin":k="focus",w=Qd;break;case"focusout":k="blur",w=Qd;break;case"beforeblur":case"afterblur":w=Qd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Yg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=mk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Pk;break;case $w:case Hw:case Ww:w=vk;break;case Vw:w=bk;break;case"scroll":w=fk;break;case"wheel":w=Lk;break;case"copy":case"cut":case"paste":w=wk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Xg}var N=(e&4)!==0,T=!N&&t==="scroll",v=N?g!==null?g+"Capture":null:g;N=[];for(var y=c,S;y!==null;){S=y;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,v!==null&&(P=Ga(y,v),P!=null&&N.push(Za(y,P,S)))),T)break;y=y.return}0<N.length&&(g=new w(g,k,null,n,f),h.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==Kh&&(k=n.relatedTarget||n.fromElement)&&(ts(k)||k[Mr]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(k=n.relatedTarget||n.toElement,w=c,k=k?ts(k):null,k!==null&&(T=ks(k),k!==T||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=c),w!==k)){if(N=Yg,P="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(N=Xg,P="onPointerLeave",v="onPointerEnter",y="pointer"),T=w==null?g:Ys(w),S=k==null?g:Ys(k),g=new N(P,y+"leave",w,n,f),g.target=T,g.relatedTarget=S,P=null,ts(f)===c&&(N=new N(v,y+"enter",k,n,f),N.target=S,N.relatedTarget=T,P=N),T=P,w&&k)t:{for(N=w,v=k,y=0,S=N;S;S=Bs(S))y++;for(S=0,P=v;P;P=Bs(P))S++;for(;0<y-S;)N=Bs(N),y--;for(;0<S-y;)v=Bs(v),S--;for(;y--;){if(N===v||v!==null&&N===v.alternate)break t;N=Bs(N),v=Bs(v)}N=null}else N=null;w!==null&&l_(h,g,w,N,!1),k!==null&&T!==null&&l_(h,T,k,N,!0)}}e:{if(g=c?Ys(c):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var F=zk;else if(e_(g))if(jw)F=Vk;else{F=Hk;var B=$k}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(F=Wk);if(F&&(F=F(t,c))){Mw(h,F,n,f);break e}B&&B(t,g,c),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&$h(g,"number",g.value)}switch(B=c?Ys(c):window,t){case"focusin":(e_(B)||B.contentEditable==="true")&&(Ks=B,ef=c,Pa=null);break;case"focusout":Pa=ef=Ks=null;break;case"mousedown":tf=!0;break;case"contextmenu":case"mouseup":case"dragend":tf=!1,s_(h,n,f);break;case"selectionchange":if(qk)break;case"keydown":case"keyup":s_(h,n,f)}var _;if(wp)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Gs?Lw(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Dw&&n.locale!=="ko"&&(Gs||E!=="onCompositionStart"?E==="onCompositionEnd"&&Gs&&(_=bw()):(hi=f,_p="value"in hi?hi.value:hi.textContent,Gs=!0)),B=rc(c,E),0<B.length&&(E=new Qg(E,t,null,n,f),h.push({event:E,listeners:B}),_?E.data=_:(_=Ow(n),_!==null&&(E.data=_)))),(_=Mk?jk(t,n):Fk(t,n))&&(c=rc(c,"onBeforeInput"),0<c.length&&(f=new Qg("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=_))}Kw(h,e)})}function Za(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ga(t,n),s!=null&&r.unshift(Za(t,s,i)),s=Ga(t,e),s!=null&&r.push(Za(t,s,i))),t=t.return}return r}function Bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function l_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Ga(n,s),u!=null&&o.unshift(Za(n,u,l))):i||(u=Ga(n,s),u!=null&&o.push(Za(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Jk=/\r\n?/g,Zk=/\u0000|\uFFFD/g;function u_(t){return(typeof t=="string"?t:""+t).replace(Jk,`
`).replace(Zk,"")}function mu(t,e,n){if(e=u_(e),u_(t)!==e&&n)throw Error($(425))}function ic(){}var nf=null,rf=null;function sf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,eT=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,tT=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(t){return c_.resolve(null).then(t).catch(nT)}:of;function nT(t){setTimeout(function(){throw t})}function ih(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ya(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ya(e)}function wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function d_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bo=Math.random().toString(36).slice(2),sr="__reactFiber$"+bo,el="__reactProps$"+bo,Mr="__reactContainer$"+bo,af="__reactEvents$"+bo,rT="__reactListeners$"+bo,iT="__reactHandles$"+bo;function ts(t){var e=t[sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mr]||n[sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=d_(t);t!==null;){if(n=t[sr])return n;t=d_(t)}return e}t=n,n=t.parentNode}return null}function Il(t){return t=t[sr]||t[Mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Jc(t){return t[el]||null}var lf=[],Qs=-1;function ji(t){return{current:t}}function Be(t){0>Qs||(t.current=lf[Qs],lf[Qs]=null,Qs--)}function Me(t,e){Qs++,lf[Qs]=t.current,t.current=e}var Pi={},Bt=ji(Pi),an=ji(!1),cs=Pi;function go(t,e){var n=t.type.contextTypes;if(!n)return Pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function sc(){Be(an),Be(Bt)}function h_(t,e,n){if(Bt.current!==Pi)throw Error($(168));Me(Bt,e),Me(an,n)}function Yw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,$S(t)||"Unknown",i));return qe({},n,r)}function oc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pi,cs=Bt.current,Me(Bt,t),Me(an,an.current),!0}function f_(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Yw(t,e,cs),r.__reactInternalMemoizedMergedChildContext=t,Be(an),Be(Bt),Me(Bt,t)):Be(an),Me(an,n)}var Cr=null,Zc=!1,sh=!1;function Qw(t){Cr===null?Cr=[t]:Cr.push(t)}function sT(t){Zc=!0,Qw(t)}function Fi(){if(!sh&&Cr!==null){sh=!0;var t=0,e=Ie;try{var n=Cr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cr=null,Zc=!1}catch(i){throw Cr!==null&&(Cr=Cr.slice(t+1)),Ew(fp,Fi),i}finally{Ie=e,sh=!1}}return null}var Xs=[],Js=0,ac=null,lc=0,kn=[],Tn=0,ds=null,Sr=1,kr="";function Yi(t,e){Xs[Js++]=lc,Xs[Js++]=ac,ac=t,lc=e}function Xw(t,e,n){kn[Tn++]=Sr,kn[Tn++]=kr,kn[Tn++]=ds,ds=t;var r=Sr;t=kr;var i=32-Gn(r)-1;r&=~(1<<i),n+=1;var s=32-Gn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Sr=1<<32-Gn(e)+i|n<<i|r,kr=s+t}else Sr=1<<s|n<<i|r,kr=t}function Cp(t){t.return!==null&&(Yi(t,1),Xw(t,1,0))}function Sp(t){for(;t===ac;)ac=Xs[--Js],Xs[Js]=null,lc=Xs[--Js],Xs[Js]=null;for(;t===ds;)ds=kn[--Tn],kn[Tn]=null,kr=kn[--Tn],kn[Tn]=null,Sr=kn[--Tn],kn[Tn]=null}var _n=null,mn=null,He=!1,$n=null;function Jw(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function p_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,mn=wi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ds!==null?{id:Sr,overflow:kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,mn=null,!0):!1;default:return!1}}function uf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cf(t){if(He){var e=mn;if(e){var n=e;if(!p_(t,e)){if(uf(t))throw Error($(418));e=wi(n.nextSibling);var r=_n;e&&p_(t,e)?Jw(r,n):(t.flags=t.flags&-4097|2,He=!1,_n=t)}}else{if(uf(t))throw Error($(418));t.flags=t.flags&-4097|2,He=!1,_n=t}}}function m_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function gu(t){if(t!==_n)return!1;if(!He)return m_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sf(t.type,t.memoizedProps)),e&&(e=mn)){if(uf(t))throw Zw(),Error($(418));for(;e;)Jw(t,e),e=wi(e.nextSibling)}if(m_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mn=wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mn=null}}else mn=_n?wi(t.stateNode.nextSibling):null;return!0}function Zw(){for(var t=mn;t;)t=wi(t.nextSibling)}function _o(){mn=_n=null,He=!1}function kp(t){$n===null?$n=[t]:$n.push(t)}var oT=Hr.ReactCurrentBatchConfig;function la(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function _u(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g_(t){var e=t._init;return e(t._payload)}function e0(t){function e(v,y){if(t){var S=v.deletions;S===null?(v.deletions=[y],v.flags|=16):S.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=ki(v,y),v.index=0,v.sibling=null,v}function s(v,y,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<y?(v.flags|=2,y):S):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,y,S,P){return y===null||y.tag!==6?(y=hh(S,v.mode,P),y.return=v,y):(y=i(y,S),y.return=v,y)}function u(v,y,S,P){var F=S.type;return F===Vs?f(v,y,S.props.children,P,S.key):y!==null&&(y.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ri&&g_(F)===y.type)?(P=i(y,S.props),P.ref=la(v,y,S),P.return=v,P):(P=zu(S.type,S.key,S.props,null,v.mode,P),P.ref=la(v,y,S),P.return=v,P)}function c(v,y,S,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=fh(S,v.mode,P),y.return=v,y):(y=i(y,S.children||[]),y.return=v,y)}function f(v,y,S,P,F){return y===null||y.tag!==7?(y=as(S,v.mode,P,F),y.return=v,y):(y=i(y,S),y.return=v,y)}function h(v,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=hh(""+y,v.mode,S),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ou:return S=zu(y.type,y.key,y.props,null,v.mode,S),S.ref=la(v,null,y),S.return=v,S;case Ws:return y=fh(y,v.mode,S),y.return=v,y;case ri:var P=y._init;return h(v,P(y._payload),S)}if(wa(y)||ra(y))return y=as(y,v.mode,S,null),y.return=v,y;_u(v,y)}return null}function g(v,y,S,P){var F=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return F!==null?null:l(v,y,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ou:return S.key===F?u(v,y,S,P):null;case Ws:return S.key===F?c(v,y,S,P):null;case ri:return F=S._init,g(v,y,F(S._payload),P)}if(wa(S)||ra(S))return F!==null?null:f(v,y,S,P,null);_u(v,S)}return null}function w(v,y,S,P,F){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(S)||null,l(y,v,""+P,F);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ou:return v=v.get(P.key===null?S:P.key)||null,u(y,v,P,F);case Ws:return v=v.get(P.key===null?S:P.key)||null,c(y,v,P,F);case ri:var B=P._init;return w(v,y,S,B(P._payload),F)}if(wa(P)||ra(P))return v=v.get(S)||null,f(y,v,P,F,null);_u(y,P)}return null}function k(v,y,S,P){for(var F=null,B=null,_=y,E=y=0,I=null;_!==null&&E<S.length;E++){_.index>E?(I=_,_=null):I=_.sibling;var x=g(v,_,S[E],P);if(x===null){_===null&&(_=I);break}t&&_&&x.alternate===null&&e(v,_),y=s(x,y,E),B===null?F=x:B.sibling=x,B=x,_=I}if(E===S.length)return n(v,_),He&&Yi(v,E),F;if(_===null){for(;E<S.length;E++)_=h(v,S[E],P),_!==null&&(y=s(_,y,E),B===null?F=_:B.sibling=_,B=_);return He&&Yi(v,E),F}for(_=r(v,_);E<S.length;E++)I=w(_,v,E,S[E],P),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?E:I.key),y=s(I,y,E),B===null?F=I:B.sibling=I,B=I);return t&&_.forEach(function(b){return e(v,b)}),He&&Yi(v,E),F}function N(v,y,S,P){var F=ra(S);if(typeof F!="function")throw Error($(150));if(S=F.call(S),S==null)throw Error($(151));for(var B=F=null,_=y,E=y=0,I=null,x=S.next();_!==null&&!x.done;E++,x=S.next()){_.index>E?(I=_,_=null):I=_.sibling;var b=g(v,_,x.value,P);if(b===null){_===null&&(_=I);break}t&&_&&b.alternate===null&&e(v,_),y=s(b,y,E),B===null?F=b:B.sibling=b,B=b,_=I}if(x.done)return n(v,_),He&&Yi(v,E),F;if(_===null){for(;!x.done;E++,x=S.next())x=h(v,x.value,P),x!==null&&(y=s(x,y,E),B===null?F=x:B.sibling=x,B=x);return He&&Yi(v,E),F}for(_=r(v,_);!x.done;E++,x=S.next())x=w(_,v,E,x.value,P),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?E:x.key),y=s(x,y,E),B===null?F=x:B.sibling=x,B=x);return t&&_.forEach(function(D){return e(v,D)}),He&&Yi(v,E),F}function T(v,y,S,P){if(typeof S=="object"&&S!==null&&S.type===Vs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ou:e:{for(var F=S.key,B=y;B!==null;){if(B.key===F){if(F=S.type,F===Vs){if(B.tag===7){n(v,B.sibling),y=i(B,S.props.children),y.return=v,v=y;break e}}else if(B.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ri&&g_(F)===B.type){n(v,B.sibling),y=i(B,S.props),y.ref=la(v,B,S),y.return=v,v=y;break e}n(v,B);break}else e(v,B);B=B.sibling}S.type===Vs?(y=as(S.props.children,v.mode,P,S.key),y.return=v,v=y):(P=zu(S.type,S.key,S.props,null,v.mode,P),P.ref=la(v,y,S),P.return=v,v=P)}return o(v);case Ws:e:{for(B=S.key;y!==null;){if(y.key===B)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(v,y.sibling),y=i(y,S.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=fh(S,v.mode,P),y.return=v,v=y}return o(v);case ri:return B=S._init,T(v,y,B(S._payload),P)}if(wa(S))return k(v,y,S,P);if(ra(S))return N(v,y,S,P);_u(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,S),y.return=v,v=y):(n(v,y),y=hh(S,v.mode,P),y.return=v,v=y),o(v)):n(v,y)}return T}var vo=e0(!0),t0=e0(!1),uc=ji(null),cc=null,Zs=null,Tp=null;function Ip(){Tp=Zs=cc=null}function xp(t){var e=uc.current;Be(uc),t._currentValue=e}function df(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lo(t,e){cc=t,Tp=Zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function Pn(t){var e=t._currentValue;if(Tp!==t)if(t={context:t,memoizedValue:e,next:null},Zs===null){if(cc===null)throw Error($(308));Zs=t,cc.dependencies={lanes:0,firstContext:t}}else Zs=Zs.next=t;return e}var ns=null;function Np(t){ns===null?ns=[t]:ns.push(t)}function n0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Np(e)):(n.next=i.next,i.next=n),e.interleaved=n,jr(t,r)}function jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ii=!1;function Rp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,jr(t,n)}return i=r.interleaved,i===null?(e.next=e,Np(r)):(e.next=i.next,i.next=e),r.interleaved=e,jr(t,n)}function Ou(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pp(t,n)}}function __(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dc(t,e,n,r){var i=t.updateQueue;ii=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,f=c=u=null,l=s;do{var g=l.lane,w=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,N=l;switch(g=e,w=n,N.tag){case 1:if(k=N.payload,typeof k=="function"){h=k.call(w,h,g);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=N.payload,g=typeof k=="function"?k.call(w,h,g):k,g==null)break e;h=qe({},h,g);break e;case 2:ii=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=w,u=h):f=f.next=w,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);fs|=o,t.lanes=o,t.memoizedState=h}}function v_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var xl={},ur=ji(xl),tl=ji(xl),nl=ji(xl);function rs(t){if(t===xl)throw Error($(174));return t}function Pp(t,e){switch(Me(nl,e),Me(tl,t),Me(ur,xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wh(e,t)}Be(ur),Me(ur,e)}function yo(){Be(ur),Be(tl),Be(nl)}function i0(t){rs(nl.current);var e=rs(ur.current),n=Wh(e,t.type);e!==n&&(Me(tl,t),Me(ur,n))}function Ap(t){tl.current===t&&(Be(ur),Be(tl))}var Ve=ji(0);function hc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oh=[];function bp(){for(var t=0;t<oh.length;t++)oh[t]._workInProgressVersionPrimary=null;oh.length=0}var Mu=Hr.ReactCurrentDispatcher,ah=Hr.ReactCurrentBatchConfig,hs=0,Ke=null,ft=null,vt=null,fc=!1,Aa=!1,rl=0,aT=0;function Ot(){throw Error($(321))}function Dp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function Lp(t,e,n,r,i,s){if(hs=s,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mu.current=t===null||t.memoizedState===null?dT:hT,t=n(r,i),Aa){s=0;do{if(Aa=!1,rl=0,25<=s)throw Error($(301));s+=1,vt=ft=null,e.updateQueue=null,Mu.current=fT,t=n(r,i)}while(Aa)}if(Mu.current=pc,e=ft!==null&&ft.next!==null,hs=0,vt=ft=Ke=null,fc=!1,e)throw Error($(300));return t}function Op(){var t=rl!==0;return rl=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ke.memoizedState=vt=t:vt=vt.next=t,vt}function An(){if(ft===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=vt===null?Ke.memoizedState:vt.next;if(e!==null)vt=e,ft=t;else{if(t===null)throw Error($(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},vt===null?Ke.memoizedState=vt=t:vt=vt.next=t}return vt}function il(t,e){return typeof e=="function"?e(t):e}function lh(t){var e=An(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var f=c.lane;if((hs&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,Ke.lanes|=f,fs|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Yn(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ke.lanes|=s,fs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uh(t){var e=An(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Yn(s,e.memoizedState)||(sn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function s0(){}function o0(t,e){var n=Ke,r=An(),i=e(),s=!Yn(r.memoizedState,i);if(s&&(r.memoizedState=i,sn=!0),r=r.queue,Mp(u0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,sl(9,l0.bind(null,n,r,i,e),void 0,null),wt===null)throw Error($(349));hs&30||a0(n,e,i)}return i}function a0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function l0(t,e,n,r){e.value=n,e.getSnapshot=r,c0(e)&&d0(t)}function u0(t,e,n){return n(function(){c0(e)&&d0(t)})}function c0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function d0(t){var e=jr(t,1);e!==null&&Kn(e,t,1,-1)}function y_(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:t},e.queue=t,t=t.dispatch=cT.bind(null,Ke,t),[e.memoizedState,t]}function sl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function h0(){return An().memoizedState}function ju(t,e,n,r){var i=ir();Ke.flags|=t,i.memoizedState=sl(1|e,n,void 0,r===void 0?null:r)}function ed(t,e,n,r){var i=An();r=r===void 0?null:r;var s=void 0;if(ft!==null){var o=ft.memoizedState;if(s=o.destroy,r!==null&&Dp(r,o.deps)){i.memoizedState=sl(e,n,s,r);return}}Ke.flags|=t,i.memoizedState=sl(1|e,n,s,r)}function w_(t,e){return ju(8390656,8,t,e)}function Mp(t,e){return ed(2048,8,t,e)}function f0(t,e){return ed(4,2,t,e)}function p0(t,e){return ed(4,4,t,e)}function m0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function g0(t,e,n){return n=n!=null?n.concat([t]):null,ed(4,4,m0.bind(null,e,t),n)}function jp(){}function _0(t,e){var n=An();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v0(t,e){var n=An();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function y0(t,e,n){return hs&21?(Yn(n,e)||(n=kw(),Ke.lanes|=n,fs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function lT(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=ah.transition;ah.transition={};try{t(!1),e()}finally{Ie=n,ah.transition=r}}function w0(){return An().memoizedState}function uT(t,e,n){var r=Si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},E0(t))C0(e,n);else if(n=n0(t,e,n,r),n!==null){var i=Kt();Kn(n,t,r,i),S0(n,e,r)}}function cT(t,e,n){var r=Si(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(E0(t))C0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Yn(l,o)){var u=e.interleaved;u===null?(i.next=i,Np(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=n0(t,e,i,r),n!==null&&(i=Kt(),Kn(n,t,r,i),S0(n,e,r))}}function E0(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function C0(t,e){Aa=fc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function S0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pp(t,n)}}var pc={readContext:Pn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},dT={readContext:Pn,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:Pn,useEffect:w_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ju(4194308,4,m0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ju(4194308,4,t,e)},useInsertionEffect:function(t,e){return ju(4,2,t,e)},useMemo:function(t,e){var n=ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uT.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:y_,useDebugValue:jp,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=y_(!1),e=t[0];return t=lT.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ke,i=ir();if(He){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),wt===null)throw Error($(349));hs&30||a0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,w_(u0.bind(null,r,s,t),[t]),r.flags|=2048,sl(9,l0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ir(),e=wt.identifierPrefix;if(He){var n=kr,r=Sr;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hT={readContext:Pn,useCallback:_0,useContext:Pn,useEffect:Mp,useImperativeHandle:g0,useInsertionEffect:f0,useLayoutEffect:p0,useMemo:v0,useReducer:lh,useRef:h0,useState:function(){return lh(il)},useDebugValue:jp,useDeferredValue:function(t){var e=An();return y0(e,ft.memoizedState,t)},useTransition:function(){var t=lh(il)[0],e=An().memoizedState;return[t,e]},useMutableSource:s0,useSyncExternalStore:o0,useId:w0,unstable_isNewReconciler:!1},fT={readContext:Pn,useCallback:_0,useContext:Pn,useEffect:Mp,useImperativeHandle:g0,useInsertionEffect:f0,useLayoutEffect:p0,useMemo:v0,useReducer:uh,useRef:h0,useState:function(){return uh(il)},useDebugValue:jp,useDeferredValue:function(t){var e=An();return ft===null?e.memoizedState=t:y0(e,ft.memoizedState,t)},useTransition:function(){var t=uh(il)[0],e=An().memoizedState;return[t,e]},useMutableSource:s0,useSyncExternalStore:o0,useId:w0,unstable_isNewReconciler:!1};function Un(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var td={isMounted:function(t){return(t=t._reactInternals)?ks(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),i=Si(t),s=Pr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ei(t,s,i),e!==null&&(Kn(e,t,i,r),Ou(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),i=Si(t),s=Pr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ei(t,s,i),e!==null&&(Kn(e,t,i,r),Ou(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=Si(t),i=Pr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ei(t,i,r),e!==null&&(Kn(e,t,r,n),Ou(e,t,r))}};function E_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xa(n,r)||!Xa(i,s):!0}function k0(t,e,n){var r=!1,i=Pi,s=e.contextType;return typeof s=="object"&&s!==null?s=Pn(s):(i=ln(e)?cs:Bt.current,r=e.contextTypes,s=(r=r!=null)?go(t,i):Pi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=td,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function C_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&td.enqueueReplaceState(e,e.state,null)}function ff(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Rp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Pn(s):(s=ln(e)?cs:Bt.current,i.context=go(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&td.enqueueReplaceState(i,i.state,null),dc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wo(t,e){try{var n="",r=e;do n+=zS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ch(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pT=typeof WeakMap=="function"?WeakMap:Map;function T0(t,e,n){n=Pr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gc||(gc=!0,kf=r),pf(t,e)},n}function I0(t,e,n){n=Pr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){pf(t,e),typeof r!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function S_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pT;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=NT.bind(null,t,e,n),e.then(t,t))}function k_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function T_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pr(-1,1),e.tag=2,Ei(n,e,1))),n.lanes|=1),t)}var mT=Hr.ReactCurrentOwner,sn=!1;function Wt(t,e,n,r){e.child=t===null?t0(e,null,n,r):vo(e,t.child,n,r)}function I_(t,e,n,r,i){n=n.render;var s=e.ref;return lo(e,i),r=Lp(t,e,n,r,s,i),n=Op(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fr(t,e,i)):(He&&n&&Cp(e),e.flags|=1,Wt(t,e,r,i),e.child)}function x_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Vp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,x0(t,e,s,r,i)):(t=zu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Xa,n(o,r)&&t.ref===e.ref)return Fr(t,e,i)}return e.flags|=1,t=ki(s,r),t.ref=e.ref,t.return=e,e.child=t}function x0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Xa(s,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,Fr(t,e,i)}return mf(t,e,n,r,i)}function N0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(to,fn),fn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(to,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Me(to,fn),fn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Me(to,fn),fn|=r;return Wt(t,e,i,n),e.child}function R0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mf(t,e,n,r,i){var s=ln(n)?cs:Bt.current;return s=go(e,s),lo(e,i),n=Lp(t,e,n,r,s,i),r=Op(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fr(t,e,i)):(He&&r&&Cp(e),e.flags|=1,Wt(t,e,n,i),e.child)}function N_(t,e,n,r,i){if(ln(n)){var s=!0;oc(e)}else s=!1;if(lo(e,i),e.stateNode===null)Fu(t,e),k0(e,n,r),ff(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pn(c):(c=ln(n)?cs:Bt.current,c=go(e,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&C_(e,o,r,c),ii=!1;var g=e.memoizedState;o.state=g,dc(e,r,o,i),u=e.memoizedState,l!==r||g!==u||an.current||ii?(typeof f=="function"&&(hf(e,n,f,r),u=e.memoizedState),(l=ii||E_(e,n,l,r,g,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,r0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Un(e.type,l),o.props=c,h=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Pn(u):(u=ln(n)?cs:Bt.current,u=go(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||g!==u)&&C_(e,o,r,u),ii=!1,g=e.memoizedState,o.state=g,dc(e,r,o,i);var k=e.memoizedState;l!==h||g!==k||an.current||ii?(typeof w=="function"&&(hf(e,n,w,r),k=e.memoizedState),(c=ii||E_(e,n,c,r,g,k,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return gf(t,e,n,r,s,i)}function gf(t,e,n,r,i,s){R0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&f_(e,n,!1),Fr(t,e,s);r=e.stateNode,mT.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vo(e,t.child,null,s),e.child=vo(e,null,l,s)):Wt(t,e,l,s),e.memoizedState=r.state,i&&f_(e,n,!0),e.child}function P0(t){var e=t.stateNode;e.pendingContext?h_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&h_(t,e.context,!1),Pp(t,e.containerInfo)}function R_(t,e,n,r,i){return _o(),kp(i),e.flags|=256,Wt(t,e,n,r),e.child}var _f={dehydrated:null,treeContext:null,retryLane:0};function vf(t){return{baseLanes:t,cachePool:null,transitions:null}}function A0(t,e,n){var r=e.pendingProps,i=Ve.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Me(Ve,i&1),t===null)return cf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=id(o,r,0,null),t=as(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vf(n),e.memoizedState=_f,t):Fp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return gT(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ki(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ki(l,s):(s=as(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?vf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=_f,r}return s=t.child,t=s.sibling,r=ki(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fp(t,e){return e=id({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vu(t,e,n,r){return r!==null&&kp(r),vo(e,t.child,null,n),t=Fp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gT(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ch(Error($(422))),vu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=id({mode:"visible",children:r.children},i,0,null),s=as(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vo(e,t.child,null,o),e.child.memoizedState=vf(o),e.memoizedState=_f,s);if(!(e.mode&1))return vu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error($(419)),r=ch(s,r,void 0),vu(t,e,o,r)}if(l=(o&t.childLanes)!==0,sn||l){if(r=wt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,jr(t,i),Kn(r,t,i,-1))}return Wp(),r=ch(Error($(421))),vu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=RT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,mn=wi(i.nextSibling),_n=e,He=!0,$n=null,t!==null&&(kn[Tn++]=Sr,kn[Tn++]=kr,kn[Tn++]=ds,Sr=t.id,kr=t.overflow,ds=e),e=Fp(e,r.children),e.flags|=4096,e)}function P_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),df(t.return,e,n)}function dh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function b0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Wt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&P_(t,n,e);else if(t.tag===19)P_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&hc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),dh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&hc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}dh(e,!0,n,null,s);break;case"together":dh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=ki(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ki(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _T(t,e,n){switch(e.tag){case 3:P0(e),_o();break;case 5:i0(e);break;case 1:ln(e.type)&&oc(e);break;case 4:Pp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Me(uc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?A0(t,e,n):(Me(Ve,Ve.current&1),t=Fr(t,e,n),t!==null?t.sibling:null);Me(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return b0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Me(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,N0(t,e,n)}return Fr(t,e,n)}var D0,yf,L0,O0;D0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yf=function(){};L0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,rs(ur.current);var s=null;switch(n){case"input":i=Bh(t,i),r=Bh(t,r),s=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),s=[];break;case"textarea":i=Hh(t,i),r=Hh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ic)}Vh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Wa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Wa.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ue("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};O0=function(t,e,n,r){n!==r&&(e.flags|=4)};function ua(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vT(t,e,n){var r=e.pendingProps;switch(Sp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return ln(e.type)&&sc(),Mt(e),null;case 3:return r=e.stateNode,yo(),Be(an),Be(Bt),bp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$n!==null&&(xf($n),$n=null))),yf(t,e),Mt(e),null;case 5:Ap(e);var i=rs(nl.current);if(n=e.type,t!==null&&e.stateNode!=null)L0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Mt(e),null}if(t=rs(ur.current),gu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[sr]=e,r[el]=s,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<Ca.length;i++)Ue(Ca[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ug(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":zg(r,s),Ue("invalid",r)}Vh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&mu(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&mu(r.textContent,l,t),i=["children",""+l]):Wa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":au(r),Bg(r,s,!0);break;case"textarea":au(r),$g(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ic)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[sr]=e,t[el]=r,D0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gh(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ca.length;i++)Ue(Ca[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":Ug(t,r),i=Bh(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":zg(t,r),i=Hh(t,r),Ue("invalid",t);break;default:i=r}Vh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?hw(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cw(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Va(t,u):typeof u=="number"&&Va(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ue("scroll",t):u!=null&&lp(t,s,u,o))}switch(n){case"input":au(t),Bg(t,r,!1);break;case"textarea":au(t),$g(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ri(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?io(t,!!r.multiple,s,!1):r.defaultValue!=null&&io(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ic)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)O0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=rs(nl.current),rs(ur.current),gu(e)){if(r=e.stateNode,n=e.memoizedProps,r[sr]=e,(s=r.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:mu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sr]=e,e.stateNode=r}return Mt(e),null;case 13:if(Be(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&mn!==null&&e.mode&1&&!(e.flags&128))Zw(),_o(),e.flags|=98560,s=!1;else if(s=gu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[sr]=e}else _o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),s=!1}else $n!==null&&(xf($n),$n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?gt===0&&(gt=3):Wp())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return yo(),yf(t,e),t===null&&Ja(e.stateNode.containerInfo),Mt(e),null;case 10:return xp(e.type._context),Mt(e),null;case 17:return ln(e.type)&&sc(),Mt(e),null;case 19:if(Be(Ve),s=e.memoizedState,s===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ua(s,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hc(t),o!==null){for(e.flags|=128,ua(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(Ve,Ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&it()>Eo&&(e.flags|=128,r=!0,ua(s,!1),e.lanes=4194304)}else{if(!r)if(t=hc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ua(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return Mt(e),null}else 2*it()-s.renderingStartTime>Eo&&n!==1073741824&&(e.flags|=128,r=!0,ua(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=it(),e.sibling=null,n=Ve.current,Me(Ve,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return Hp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function yT(t,e){switch(Sp(e),e.tag){case 1:return ln(e.type)&&sc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yo(),Be(an),Be(Bt),bp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ap(e),null;case 13:if(Be(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));_o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ve),null;case 4:return yo(),null;case 10:return xp(e.type._context),null;case 22:case 23:return Hp(),null;case 24:return null;default:return null}}var yu=!1,Ut=!1,wT=typeof WeakSet=="function"?WeakSet:Set,q=null;function eo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function wf(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var A_=!1;function ET(t,e){if(nf=tc,t=Bw(),Ep(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,h=t,g=null;t:for(;;){for(var w;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)g=h,h=w;for(;;){if(h===t)break t;if(g===n&&++c===i&&(l=o),g===s&&++f===r&&(u=o),(w=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rf={focusedElem:t,selectionRange:n},tc=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,T=k.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?N:Un(e.type,N),T);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(P){Ye(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return k=A_,A_=!1,k}function ba(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&wf(e,n,s)}i=i.next}while(i!==r)}}function nd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ef(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function M0(t){var e=t.alternate;e!==null&&(t.alternate=null,M0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sr],delete e[el],delete e[af],delete e[rT],delete e[iT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function j0(t){return t.tag===5||t.tag===3||t.tag===4}function b_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ic));else if(r!==4&&(t=t.child,t!==null))for(Cf(t,e,n),t=t.sibling;t!==null;)Cf(t,e,n),t=t.sibling}function Sf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sf(t,e,n),t=t.sibling;t!==null;)Sf(t,e,n),t=t.sibling}var xt=null,Bn=!1;function Zr(t,e,n){for(n=n.child;n!==null;)F0(t,e,n),n=n.sibling}function F0(t,e,n){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(qc,n)}catch{}switch(n.tag){case 5:Ut||eo(n,e);case 6:var r=xt,i=Bn;xt=null,Zr(t,e,n),xt=r,Bn=i,xt!==null&&(Bn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(Bn?(t=xt,n=n.stateNode,t.nodeType===8?ih(t.parentNode,n):t.nodeType===1&&ih(t,n),Ya(t)):ih(xt,n.stateNode));break;case 4:r=xt,i=Bn,xt=n.stateNode.containerInfo,Bn=!0,Zr(t,e,n),xt=r,Bn=i;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&wf(n,e,o),i=i.next}while(i!==r)}Zr(t,e,n);break;case 1:if(!Ut&&(eo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ye(n,e,l)}Zr(t,e,n);break;case 21:Zr(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,Zr(t,e,n),Ut=r):Zr(t,e,n);break;default:Zr(t,e,n)}}function D_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wT),e.forEach(function(r){var i=PT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:xt=l.stateNode,Bn=!1;break e;case 3:xt=l.stateNode.containerInfo,Bn=!0;break e;case 4:xt=l.stateNode.containerInfo,Bn=!0;break e}l=l.return}if(xt===null)throw Error($(160));F0(s,o,i),xt=null,Bn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Ye(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U0(e,t),e=e.sibling}function U0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fn(e,t),nr(t),r&4){try{ba(3,t,t.return),nd(3,t)}catch(N){Ye(t,t.return,N)}try{ba(5,t,t.return)}catch(N){Ye(t,t.return,N)}}break;case 1:Fn(e,t),nr(t),r&512&&n!==null&&eo(n,n.return);break;case 5:if(Fn(e,t),nr(t),r&512&&n!==null&&eo(n,n.return),t.flags&32){var i=t.stateNode;try{Va(i,"")}catch(N){Ye(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&aw(i,s),Gh(l,o);var c=Gh(l,s);for(o=0;o<u.length;o+=2){var f=u[o],h=u[o+1];f==="style"?hw(i,h):f==="dangerouslySetInnerHTML"?cw(i,h):f==="children"?Va(i,h):lp(i,f,h,c)}switch(l){case"input":zh(i,s);break;case"textarea":lw(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?io(i,!!s.multiple,w,!1):g!==!!s.multiple&&(s.defaultValue!=null?io(i,!!s.multiple,s.defaultValue,!0):io(i,!!s.multiple,s.multiple?[]:"",!1))}i[el]=s}catch(N){Ye(t,t.return,N)}}break;case 6:if(Fn(e,t),nr(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){Ye(t,t.return,N)}}break;case 3:if(Fn(e,t),nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ya(e.containerInfo)}catch(N){Ye(t,t.return,N)}break;case 4:Fn(e,t),nr(t);break;case 13:Fn(e,t),nr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zp=it())),r&4&&D_(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(c=Ut)||f,Fn(e,t),Ut=c):Fn(e,t),nr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(h=q=f;q!==null;){switch(g=q,w=g.child,g.tag){case 0:case 11:case 14:case 15:ba(4,g,g.return);break;case 1:eo(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(N){Ye(r,n,N)}}break;case 5:eo(g,g.return);break;case 22:if(g.memoizedState!==null){O_(h);continue}}w!==null?(w.return=g,q=w):O_(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=dw("display",o))}catch(N){Ye(t,t.return,N)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(N){Ye(t,t.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Fn(e,t),nr(t),r&4&&D_(t);break;case 21:break;default:Fn(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(j0(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Va(i,""),r.flags&=-33);var s=b_(t);Sf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=b_(t);Cf(t,l,o);break;default:throw Error($(161))}}catch(u){Ye(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CT(t,e,n){q=t,B0(t)}function B0(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||yu;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ut;l=yu;var c=Ut;if(yu=o,(Ut=u)&&!c)for(q=i;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?M_(i):u!==null?(u.return=o,q=u):M_(i);for(;s!==null;)q=s,B0(s),s=s.sibling;q=i,yu=l,Ut=c}L_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):L_(t)}}function L_(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||nd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Un(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&v_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}v_(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Ya(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ut||e.flags&512&&Ef(e)}catch(g){Ye(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function O_(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function M_(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nd(4,e)}catch(u){Ye(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ye(e,i,u)}}var s=e.return;try{Ef(e)}catch(u){Ye(e,s,u)}break;case 5:var o=e.return;try{Ef(e)}catch(u){Ye(e,o,u)}}}catch(u){Ye(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var ST=Math.ceil,mc=Hr.ReactCurrentDispatcher,Up=Hr.ReactCurrentOwner,Nn=Hr.ReactCurrentBatchConfig,_e=0,wt=null,ut=null,Rt=0,fn=0,to=ji(0),gt=0,ol=null,fs=0,rd=0,Bp=0,Da=null,tn=null,zp=0,Eo=1/0,Er=null,gc=!1,kf=null,Ci=null,wu=!1,fi=null,_c=0,La=0,Tf=null,Uu=-1,Bu=0;function Kt(){return _e&6?it():Uu!==-1?Uu:Uu=it()}function Si(t){return t.mode&1?_e&2&&Rt!==0?Rt&-Rt:oT.transition!==null?(Bu===0&&(Bu=kw()),Bu):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:Aw(t.type)),t):1}function Kn(t,e,n,r){if(50<La)throw La=0,Tf=null,Error($(185));kl(t,n,r),(!(_e&2)||t!==wt)&&(t===wt&&(!(_e&2)&&(rd|=n),gt===4&&oi(t,Rt)),un(t,r),n===1&&_e===0&&!(e.mode&1)&&(Eo=it()+500,Zc&&Fi()))}function un(t,e){var n=t.callbackNode;ok(t,e);var r=ec(t,t===wt?Rt:0);if(r===0)n!==null&&Vg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vg(n),e===1)t.tag===0?sT(j_.bind(null,t)):Qw(j_.bind(null,t)),tT(function(){!(_e&6)&&Fi()}),n=null;else{switch(Tw(r)){case 1:n=fp;break;case 4:n=Cw;break;case 16:n=Zu;break;case 536870912:n=Sw;break;default:n=Zu}n=q0(n,z0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function z0(t,e){if(Uu=-1,Bu=0,_e&6)throw Error($(327));var n=t.callbackNode;if(uo()&&t.callbackNode!==n)return null;var r=ec(t,t===wt?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vc(t,r);else{e=r;var i=_e;_e|=2;var s=H0();(wt!==t||Rt!==e)&&(Er=null,Eo=it()+500,os(t,e));do try{IT();break}catch(l){$0(t,l)}while(!0);Ip(),mc.current=s,_e=i,ut!==null?e=0:(wt=null,Rt=0,e=gt)}if(e!==0){if(e===2&&(i=Xh(t),i!==0&&(r=i,e=If(t,i))),e===1)throw n=ol,os(t,0),oi(t,r),un(t,it()),n;if(e===6)oi(t,r);else{if(i=t.current.alternate,!(r&30)&&!kT(i)&&(e=vc(t,r),e===2&&(s=Xh(t),s!==0&&(r=s,e=If(t,s))),e===1))throw n=ol,os(t,0),oi(t,r),un(t,it()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Qi(t,tn,Er);break;case 3:if(oi(t,r),(r&130023424)===r&&(e=zp+500-it(),10<e)){if(ec(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=of(Qi.bind(null,t,tn,Er),e);break}Qi(t,tn,Er);break;case 4:if(oi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Gn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ST(r/1960))-r,10<r){t.timeoutHandle=of(Qi.bind(null,t,tn,Er),r);break}Qi(t,tn,Er);break;case 5:Qi(t,tn,Er);break;default:throw Error($(329))}}}return un(t,it()),t.callbackNode===n?z0.bind(null,t):null}function If(t,e){var n=Da;return t.current.memoizedState.isDehydrated&&(os(t,e).flags|=256),t=vc(t,e),t!==2&&(e=tn,tn=n,e!==null&&xf(e)),t}function xf(t){tn===null?tn=t:tn.push.apply(tn,t)}function kT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function oi(t,e){for(e&=~Bp,e&=~rd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function j_(t){if(_e&6)throw Error($(327));uo();var e=ec(t,0);if(!(e&1))return un(t,it()),null;var n=vc(t,e);if(t.tag!==0&&n===2){var r=Xh(t);r!==0&&(e=r,n=If(t,r))}if(n===1)throw n=ol,os(t,0),oi(t,e),un(t,it()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qi(t,tn,Er),un(t,it()),null}function $p(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(Eo=it()+500,Zc&&Fi())}}function ps(t){fi!==null&&fi.tag===0&&!(_e&6)&&uo();var e=_e;_e|=1;var n=Nn.transition,r=Ie;try{if(Nn.transition=null,Ie=1,t)return t()}finally{Ie=r,Nn.transition=n,_e=e,!(_e&6)&&Fi()}}function Hp(){fn=to.current,Be(to)}function os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eT(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(Sp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sc();break;case 3:yo(),Be(an),Be(Bt),bp();break;case 5:Ap(r);break;case 4:yo();break;case 13:Be(Ve);break;case 19:Be(Ve);break;case 10:xp(r.type._context);break;case 22:case 23:Hp()}n=n.return}if(wt=t,ut=t=ki(t.current,null),Rt=fn=e,gt=0,ol=null,Bp=rd=fs=0,tn=Da=null,ns!==null){for(e=0;e<ns.length;e++)if(n=ns[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ns=null}return t}function $0(t,e){do{var n=ut;try{if(Ip(),Mu.current=pc,fc){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fc=!1}if(hs=0,vt=ft=Ke=null,Aa=!1,rl=0,Up.current=null,n===null||n.return===null){gt=1,ol=e,ut=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Rt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=k_(o);if(w!==null){w.flags&=-257,T_(w,o,l,s,e),w.mode&1&&S_(s,c,e),e=w,u=c;var k=e.updateQueue;if(k===null){var N=new Set;N.add(u),e.updateQueue=N}else k.add(u);break e}else{if(!(e&1)){S_(s,c,e),Wp();break e}u=Error($(426))}}else if(He&&l.mode&1){var T=k_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),T_(T,o,l,s,e),kp(wo(u,l));break e}}s=u=wo(u,l),gt!==4&&(gt=2),Da===null?Da=[s]:Da.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=T0(s,u,e);__(s,v);break e;case 1:l=u;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ci===null||!Ci.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=I0(s,l,e);__(s,P);break e}}s=s.return}while(s!==null)}V0(n)}catch(F){e=F,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function H0(){var t=mc.current;return mc.current=pc,t===null?pc:t}function Wp(){(gt===0||gt===3||gt===2)&&(gt=4),wt===null||!(fs&268435455)&&!(rd&268435455)||oi(wt,Rt)}function vc(t,e){var n=_e;_e|=2;var r=H0();(wt!==t||Rt!==e)&&(Er=null,os(t,e));do try{TT();break}catch(i){$0(t,i)}while(!0);if(Ip(),_e=n,mc.current=r,ut!==null)throw Error($(261));return wt=null,Rt=0,gt}function TT(){for(;ut!==null;)W0(ut)}function IT(){for(;ut!==null&&!XS();)W0(ut)}function W0(t){var e=K0(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?V0(t):ut=e,Up.current=null}function V0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yT(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,ut=null;return}}else if(n=vT(n,e,fn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);gt===0&&(gt=5)}function Qi(t,e,n){var r=Ie,i=Nn.transition;try{Nn.transition=null,Ie=1,xT(t,e,n,r)}finally{Nn.transition=i,Ie=r}return null}function xT(t,e,n,r){do uo();while(fi!==null);if(_e&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ak(t,s),t===wt&&(ut=wt=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wu||(wu=!0,q0(Zu,function(){return uo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nn.transition,Nn.transition=null;var o=Ie;Ie=1;var l=_e;_e|=4,Up.current=null,ET(t,n),U0(n,t),Kk(rf),tc=!!nf,rf=nf=null,t.current=n,CT(n),JS(),_e=l,Ie=o,Nn.transition=s}else t.current=n;if(wu&&(wu=!1,fi=t,_c=i),s=t.pendingLanes,s===0&&(Ci=null),tk(n.stateNode),un(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gc)throw gc=!1,t=kf,kf=null,t;return _c&1&&t.tag!==0&&uo(),s=t.pendingLanes,s&1?t===Tf?La++:(La=0,Tf=t):La=0,Fi(),null}function uo(){if(fi!==null){var t=Tw(_c),e=Nn.transition,n=Ie;try{if(Nn.transition=null,Ie=16>t?16:t,fi===null)var r=!1;else{if(t=fi,fi=null,_c=0,_e&6)throw Error($(331));var i=_e;for(_e|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(q=c;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:ba(8,f,s)}var h=f.child;if(h!==null)h.return=f,q=h;else for(;q!==null;){f=q;var g=f.sibling,w=f.return;if(M0(f),f===c){q=null;break}if(g!==null){g.return=w,q=g;break}q=w}}}var k=s.alternate;if(k!==null){var N=k.child;if(N!==null){k.child=null;do{var T=N.sibling;N.sibling=null,N=T}while(N!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ba(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,q=v;break e}q=s.return}}var y=t.current;for(q=y;q!==null;){o=q;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,q=S;else e:for(o=y;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:nd(9,l)}}catch(F){Ye(l,l.return,F)}if(l===o){q=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,q=P;break e}q=l.return}}if(_e=i,Fi(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(qc,t)}catch{}r=!0}return r}finally{Ie=n,Nn.transition=e}}return!1}function F_(t,e,n){e=wo(n,e),e=T0(t,e,1),t=Ei(t,e,1),e=Kt(),t!==null&&(kl(t,1,e),un(t,e))}function Ye(t,e,n){if(t.tag===3)F_(t,t,n);else for(;e!==null;){if(e.tag===3){F_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ci===null||!Ci.has(r))){t=wo(n,t),t=I0(e,t,1),e=Ei(e,t,1),t=Kt(),e!==null&&(kl(e,1,t),un(e,t));break}}e=e.return}}function NT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(Rt&n)===n&&(gt===4||gt===3&&(Rt&130023424)===Rt&&500>it()-zp?os(t,0):Bp|=n),un(t,e)}function G0(t,e){e===0&&(t.mode&1?(e=cu,cu<<=1,!(cu&130023424)&&(cu=4194304)):e=1);var n=Kt();t=jr(t,e),t!==null&&(kl(t,e,n),un(t,n))}function RT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),G0(t,n)}function PT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),G0(t,n)}var K0;K0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,_T(t,e,n);sn=!!(t.flags&131072)}else sn=!1,He&&e.flags&1048576&&Xw(e,lc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fu(t,e),t=e.pendingProps;var i=go(e,Bt.current);lo(e,n),i=Lp(null,e,r,t,i,n);var s=Op();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(s=!0,oc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rp(e),i.updater=td,e.stateNode=i,i._reactInternals=e,ff(e,r,t,n),e=gf(null,e,r,!0,s,n)):(e.tag=0,He&&s&&Cp(e),Wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=bT(r),t=Un(r,t),i){case 0:e=mf(null,e,r,t,n);break e;case 1:e=N_(null,e,r,t,n);break e;case 11:e=I_(null,e,r,t,n);break e;case 14:e=x_(null,e,r,Un(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),mf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),N_(t,e,r,i,n);case 3:e:{if(P0(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,r0(t,e),dc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wo(Error($(423)),e),e=R_(t,e,r,n,i);break e}else if(r!==i){i=wo(Error($(424)),e),e=R_(t,e,r,n,i);break e}else for(mn=wi(e.stateNode.containerInfo.firstChild),_n=e,He=!0,$n=null,n=t0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_o(),r===i){e=Fr(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return i0(e),t===null&&cf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,sf(r,i)?o=null:s!==null&&sf(r,s)&&(e.flags|=32),R0(t,e),Wt(t,e,o,n),e.child;case 6:return t===null&&cf(e),null;case 13:return A0(t,e,n);case 4:return Pp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vo(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),I_(t,e,r,i,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Me(uc,r._currentValue),r._currentValue=o,s!==null)if(Yn(s.value,o)){if(s.children===i.children&&!an.current){e=Fr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Pr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),df(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),df(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,lo(e,n),i=Pn(i),r=r(i),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,i=Un(r,e.pendingProps),i=Un(r.type,i),x_(t,e,r,i,n);case 15:return x0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),Fu(t,e),e.tag=1,ln(r)?(t=!0,oc(e)):t=!1,lo(e,n),k0(e,r,i),ff(e,r,i,n),gf(null,e,r,!0,t,n);case 19:return b0(t,e,n);case 22:return N0(t,e,n)}throw Error($(156,e.tag))};function q0(t,e){return Ew(t,e)}function AT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new AT(t,e,n,r)}function Vp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bT(t){if(typeof t=="function")return Vp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cp)return 11;if(t===dp)return 14}return 2}function ki(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Vp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vs:return as(n.children,i,s,e);case up:o=8,i|=8;break;case Mh:return t=In(12,n,e,i|2),t.elementType=Mh,t.lanes=s,t;case jh:return t=In(13,n,e,i),t.elementType=jh,t.lanes=s,t;case Fh:return t=In(19,n,e,i),t.elementType=Fh,t.lanes=s,t;case iw:return id(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nw:o=10;break e;case rw:o=9;break e;case cp:o=11;break e;case dp:o=14;break e;case ri:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=In(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function as(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function id(t,e,n,r){return t=In(22,t,r,e),t.elementType=iw,t.lanes=n,t.stateNode={isHidden:!1},t}function hh(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function fh(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kd(0),this.expirationTimes=Kd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gp(t,e,n,r,i,s,o,l,u){return t=new DT(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=In(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rp(s),t}function LT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Y0(t){if(!t)return Pi;t=t._reactInternals;e:{if(ks(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(ln(n))return Yw(t,n,e)}return e}function Q0(t,e,n,r,i,s,o,l,u){return t=Gp(n,r,!0,t,i,s,o,l,u),t.context=Y0(null),n=t.current,r=Kt(),i=Si(n),s=Pr(r,i),s.callback=e??null,Ei(n,s,i),t.current.lanes=i,kl(t,i,r),un(t,r),t}function sd(t,e,n,r){var i=e.current,s=Kt(),o=Si(i);return n=Y0(n),e.context===null?e.context=n:e.pendingContext=n,e=Pr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ei(i,e,o),t!==null&&(Kn(t,i,o,s),Ou(t,i,o)),o}function yc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function U_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kp(t,e){U_(t,e),(t=t.alternate)&&U_(t,e)}function OT(){return null}var X0=typeof reportError=="function"?reportError:function(t){console.error(t)};function qp(t){this._internalRoot=t}od.prototype.render=qp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));sd(t,e,null,null)};od.prototype.unmount=qp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ps(function(){sd(null,t,null,null)}),e[Mr]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<si.length&&e!==0&&e<si[n].priority;n++);si.splice(n,0,t),n===0&&Pw(t)}};function Yp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function B_(){}function MT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=yc(o);s.call(c)}}var o=Q0(e,r,t,0,null,!1,!1,"",B_);return t._reactRootContainer=o,t[Mr]=o.current,Ja(t.nodeType===8?t.parentNode:t),ps(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=yc(u);l.call(c)}}var u=Gp(t,0,!1,null,null,!1,!1,"",B_);return t._reactRootContainer=u,t[Mr]=u.current,Ja(t.nodeType===8?t.parentNode:t),ps(function(){sd(e,u,n,r)}),u}function ld(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=yc(o);l.call(u)}}sd(e,o,t,i)}else o=MT(n,e,t,i,r);return yc(o)}Iw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ea(e.pendingLanes);n!==0&&(pp(e,n|1),un(e,it()),!(_e&6)&&(Eo=it()+500,Fi()))}break;case 13:ps(function(){var r=jr(t,1);if(r!==null){var i=Kt();Kn(r,t,1,i)}}),Kp(t,1)}};mp=function(t){if(t.tag===13){var e=jr(t,134217728);if(e!==null){var n=Kt();Kn(e,t,134217728,n)}Kp(t,134217728)}};xw=function(t){if(t.tag===13){var e=Si(t),n=jr(t,e);if(n!==null){var r=Kt();Kn(n,t,e,r)}Kp(t,e)}};Nw=function(){return Ie};Rw=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};qh=function(t,e,n){switch(e){case"input":if(zh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Jc(r);if(!i)throw Error($(90));ow(r),zh(r,i)}}}break;case"textarea":lw(t,n);break;case"select":e=n.value,e!=null&&io(t,!!n.multiple,e,!1)}};mw=$p;gw=ps;var jT={usingClientEntryPoint:!1,Events:[Il,Ys,Jc,fw,pw,$p]},ca={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FT={bundleType:ca.bundleType,version:ca.version,rendererPackageName:ca.rendererPackageName,rendererConfig:ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yw(t),t===null?null:t.stateNode},findFiberByHostInstance:ca.findFiberByHostInstance||OT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{qc=Eu.inject(FT),lr=Eu}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jT;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yp(e))throw Error($(200));return LT(t,e,null,n)};yn.createRoot=function(t,e){if(!Yp(t))throw Error($(299));var n=!1,r="",i=X0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Gp(t,1,!1,null,null,n,!1,r,i),t[Mr]=e.current,Ja(t.nodeType===8?t.parentNode:t),new qp(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=yw(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return ps(t)};yn.hydrate=function(t,e,n){if(!ad(e))throw Error($(200));return ld(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!Yp(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=X0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Q0(e,null,t,1,n??null,i,!1,s,o),t[Mr]=e.current,Ja(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new od(e)};yn.render=function(t,e,n){if(!ad(e))throw Error($(200));return ld(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!ad(t))throw Error($(40));return t._reactRootContainer?(ps(function(){ld(null,null,t,!1,function(){t._reactRootContainer=null,t[Mr]=null})}),!0):!1};yn.unstable_batchedUpdates=$p;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ad(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return ld(t,e,n,!1,r)};yn.version="18.3.1-next-f1338f8080-20240426";function J0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J0)}catch(t){console.error(t)}}J0(),Jy.exports=yn;var Qp=Jy.exports;const UT=Uy(Qp),BT=Fy({__proto__:null,default:UT},[Qp]);var z_=Qp;Lh.createRoot=z_.createRoot,Lh.hydrateRoot=z_.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $e(){return $e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$e.apply(this,arguments)}var at;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(at||(at={}));const $_="popstate";function zT(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return al("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:gs(i)}return HT(e,n,null,t)}function he(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ms(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $T(){return Math.random().toString(36).substr(2,8)}function H_(t,e){return{usr:t.state,key:t.key,idx:e}}function al(t,e,n,r){return n===void 0&&(n=null),$e({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ui(e):e,{state:n,key:e&&e.key||r||$T()})}function gs(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ui(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function HT(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=at.Pop,u=null,c=f();c==null&&(c=0,o.replaceState($e({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function h(){l=at.Pop;let T=f(),v=T==null?null:T-c;c=T,u&&u({action:l,location:N.location,delta:v})}function g(T,v){l=at.Push;let y=al(N.location,T,v);c=f()+1;let S=H_(y,c),P=N.createHref(y);try{o.pushState(S,"",P)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(P)}s&&u&&u({action:l,location:N.location,delta:1})}function w(T,v){l=at.Replace;let y=al(N.location,T,v);c=f();let S=H_(y,c),P=N.createHref(y);o.replaceState(S,"",P),s&&u&&u({action:l,location:N.location,delta:0})}function k(T){let v=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof T=="string"?T:gs(T);return y=y.replace(/ $/,"%20"),he(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let N={get action(){return l},get location(){return t(i,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener($_,h),u=T,()=>{i.removeEventListener($_,h),u=null}},createHref(T){return e(i,T)},createURL:k,encodeLocation(T){let v=k(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:g,replace:w,go(T){return o.go(T)}};return N}var Te;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Te||(Te={}));const WT=new Set(["lazy","caseSensitive","path","id","index","children"]);function VT(t){return t.index===!0}function wc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],l=typeof i.id=="string"?i.id:o.join("-");if(he(i.index!==!0||!i.children,"Cannot specify children on an index route"),he(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),VT(i)){let u=$e({},i,e(i),{id:l});return r[l]=u,u}else{let u=$e({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=wc(i.children,e,o,r)),u}})}function Zi(t,e,n){return n===void 0&&(n="/"),$u(t,e,n,!1)}function $u(t,e,n,r){let i=typeof e=="string"?Ui(e):e,s=Do(i.pathname||"/",n);if(s==null)return null;let o=Z0(t);KT(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=iI(s);l=nI(o[u],c,r)}return l}function GT(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Z0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(he(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Ar([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(he(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Z0(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:eI(c,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of eE(s.path))i(s,o,u)}),e}function eE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=eE(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function KT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qT=/^:[\w-]+$/,YT=3,QT=2,XT=1,JT=10,ZT=-2,W_=t=>t==="*";function eI(t,e){let n=t.split("/"),r=n.length;return n.some(W_)&&(r+=ZT),e&&(r+=QT),n.filter(i=>!W_(i)).reduce((i,s)=>i+(qT.test(s)?YT:s===""?XT:JT),r)}function tI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function nI(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",h=V_({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),g=u.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=V_({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Ar([s,h.pathname]),pathnameBase:lI(Ar([s,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(s=Ar([s,h.pathnameBase]))}return o}function V_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,f,h)=>{let{paramName:g,isOptional:w}=f;if(g==="*"){let N=l[h]||"";o=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const k=l[h];return w&&!k?c[g]=void 0:c[g]=(k||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function rI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ms(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function iI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ms(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Do(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const sI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oI=t=>sI.test(t);function aI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ui(t):t,s;if(n)if(oI(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ms(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=G_(n.substring(1),"/"):s=G_(n,e)}else s=e;return{pathname:s,search:uI(r),hash:cI(i)}}function G_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ph(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ud(t,e){let n=tE(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cd(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ui(t):(i=$e({},t),he(!i.pathname||!i.pathname.includes("?"),ph("?","pathname","search",i)),he(!i.pathname||!i.pathname.includes("#"),ph("#","pathname","hash",i)),he(!i.search||!i.search.includes("#"),ph("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}l=h>=0?e[h]:"/"}let u=aI(i,l),c=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const Ar=t=>t.join("/").replace(/\/\/+/g,"/"),lI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Ec{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function ll(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nE=["post","put","patch","delete"],dI=new Set(nE),hI=["get",...nE],fI=new Set(hI),pI=new Set([301,302,303,307,308]),mI=new Set([307,308]),mh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gI={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},da={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Xp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_I=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),rE="remix-router-transitions";function vI(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;he(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let A=t.detectErrorBoundary;i=O=>({hasErrorBoundary:A(O)})}else i=_I;let s={},o=wc(t.routes,i,void 0,s),l,u=t.basename||"/",c=t.dataStrategy||CI,f=t.patchRoutesOnNavigation,h=$e({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,w=new Set,k=null,N=null,T=null,v=t.hydrationData!=null,y=Zi(o,t.history.location,u),S=!1,P=null;if(y==null&&!f){let A=en(404,{pathname:t.history.location.pathname}),{matches:O,route:j}=rv(o);y=O,P={[j.id]:A}}y&&!t.hydrationData&&Gi(y,o,t.history.location.pathname).active&&(y=null);let F;if(y)if(y.some(A=>A.route.lazy))F=!1;else if(!y.some(A=>A.route.loader))F=!0;else if(h.v7_partialHydration){let A=t.hydrationData?t.hydrationData.loaderData:null,O=t.hydrationData?t.hydrationData.errors:null;if(O){let j=y.findIndex(z=>O[z.route.id]!==void 0);F=y.slice(0,j+1).every(z=>!Rf(z.route,A,O))}else F=y.every(j=>!Rf(j.route,A,O))}else F=t.hydrationData!=null;else if(F=!1,y=[],h.v7_partialHydration){let A=Gi(null,o,t.history.location.pathname);A.active&&A.matches&&(S=!0,y=A.matches)}let B,_={historyAction:t.history.action,location:t.history.location,matches:y,initialized:F,navigation:mh,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||P,fetchers:new Map,blockers:new Map},E=at.Pop,I=!1,x,b=!1,D=new Map,R=null,Pe=!1,Et=!1,Xn=[],Jt=new Set,H=new Map,Z=0,re=-1,Se=new Map,de=new Set,Ne=new Map,zt=new Map,et=new Set,Ct=new Map,St=new Map,Ns;function bd(){if(g=t.history.listen(A=>{let{action:O,location:j,delta:z}=A;if(Ns){Ns(),Ns=void 0;return}ms(St.size===0||z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let G=Vl({currentLocation:_.location,nextLocation:j,historyAction:O});if(G&&z!=null){let X=new Promise(te=>{Ns=te});t.history.go(z*-1),Wi(G,{state:"blocked",location:j,proceed(){Wi(G,{state:"proceeding",proceed:void 0,reset:void 0,location:j}),X.then(()=>t.history.go(z))},reset(){let te=new Map(_.blockers);te.set(G,da),ct({blockers:te})}});return}return Zn(O,j)}),n){MI(e,D);let A=()=>jI(e,D);e.addEventListener("pagehide",A),R=()=>e.removeEventListener("pagehide",A)}return _.initialized||Zn(at.Pop,_.location,{initialHydration:!0}),B}function Rs(){g&&g(),R&&R(),w.clear(),x&&x.abort(),_.fetchers.forEach((A,O)=>bs(O)),_.blockers.forEach((A,O)=>Ls(O))}function Ps(A){return w.add(A),()=>w.delete(A)}function ct(A,O){O===void 0&&(O={}),_=$e({},_,A);let j=[],z=[];h.v7_fetcherPersist&&_.fetchers.forEach((G,X)=>{G.state==="idle"&&(et.has(X)?z.push(X):j.push(X))}),et.forEach(G=>{!_.fetchers.has(G)&&!H.has(G)&&z.push(G)}),[...w].forEach(G=>G(_,{deletedFetchers:z,viewTransitionOpts:O.viewTransitionOpts,flushSync:O.flushSync===!0})),h.v7_fetcherPersist?(j.forEach(G=>_.fetchers.delete(G)),z.forEach(G=>bs(G))):z.forEach(G=>et.delete(G))}function Jn(A,O,j){var z,G;let{flushSync:X}=j===void 0?{}:j,te=_.actionData!=null&&_.navigation.formMethod!=null&&zn(_.navigation.formMethod)&&_.navigation.state==="loading"&&((z=A.state)==null?void 0:z._isRedirect)!==!0,Y;O.actionData?Object.keys(O.actionData).length>0?Y=O.actionData:Y=null:te?Y=_.actionData:Y=null;let Q=O.loaderData?tv(_.loaderData,O.loaderData,O.matches||[],O.errors):_.loaderData,K=_.blockers;K.size>0&&(K=new Map(K),K.forEach((ae,st)=>K.set(st,da)));let J=I===!0||_.navigation.formMethod!=null&&zn(_.navigation.formMethod)&&((G=A.state)==null?void 0:G._isRedirect)!==!0;l&&(o=l,l=void 0),Pe||E===at.Pop||(E===at.Push?t.history.push(A,A.state):E===at.Replace&&t.history.replace(A,A.state));let ie;if(E===at.Pop){let ae=D.get(_.location.pathname);ae&&ae.has(A.pathname)?ie={currentLocation:_.location,nextLocation:A}:D.has(A.pathname)&&(ie={currentLocation:A,nextLocation:_.location})}else if(b){let ae=D.get(_.location.pathname);ae?ae.add(A.pathname):(ae=new Set([A.pathname]),D.set(_.location.pathname,ae)),ie={currentLocation:_.location,nextLocation:A}}ct($e({},O,{actionData:Y,loaderData:Q,historyAction:E,location:A,initialized:!0,navigation:mh,revalidation:"idle",restoreScrollPosition:Os(A,O.matches||_.matches),preventScrollReset:J,blockers:K}),{viewTransitionOpts:ie,flushSync:X===!0}),E=at.Pop,I=!1,b=!1,Pe=!1,Et=!1,Xn=[]}async function As(A,O){if(typeof A=="number"){t.history.go(A);return}let j=Nf(_.location,_.matches,u,h.v7_prependBasename,A,h.v7_relativeSplatPath,O==null?void 0:O.fromRouteId,O==null?void 0:O.relative),{path:z,submission:G,error:X}=K_(h.v7_normalizeFormMethod,!1,j,O),te=_.location,Y=al(_.location,z,O&&O.state);Y=$e({},Y,t.history.encodeLocation(Y));let Q=O&&O.replace!=null?O.replace:void 0,K=at.Push;Q===!0?K=at.Replace:Q===!1||G!=null&&zn(G.formMethod)&&G.formAction===_.location.pathname+_.location.search&&(K=at.Replace);let J=O&&"preventScrollReset"in O?O.preventScrollReset===!0:void 0,ie=(O&&O.flushSync)===!0,ae=Vl({currentLocation:te,nextLocation:Y,historyAction:K});if(ae){Wi(ae,{state:"blocked",location:Y,proceed(){Wi(ae,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),As(A,O)},reset(){let st=new Map(_.blockers);st.set(ae,da),ct({blockers:st})}});return}return await Zn(K,Y,{submission:G,pendingError:X,preventScrollReset:J,replace:O&&O.replace,enableViewTransition:O&&O.viewTransition,flushSync:ie})}function $o(){if(ht(),ct({revalidation:"loading"}),_.navigation.state!=="submitting"){if(_.navigation.state==="idle"){Zn(_.historyAction,_.location,{startUninterruptedRevalidation:!0});return}Zn(E||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation,enableViewTransition:b===!0})}}async function Zn(A,O,j){x&&x.abort(),x=null,E=A,Pe=(j&&j.startUninterruptedRevalidation)===!0,Gl(_.location,_.matches),I=(j&&j.preventScrollReset)===!0,b=(j&&j.enableViewTransition)===!0;let z=l||o,G=j&&j.overrideNavigation,X=j!=null&&j.initialHydration&&_.matches&&_.matches.length>0&&!S?_.matches:Zi(z,O,u),te=(j&&j.flushSync)===!0;if(X&&_.initialized&&!Et&&NI(_.location,O)&&!(j&&j.submission&&zn(j.submission.formMethod))){Jn(O,{matches:X},{flushSync:te});return}let Y=Gi(X,z,O.pathname);if(Y.active&&Y.matches&&(X=Y.matches),!X){let{error:ke,notFoundMatches:pe,route:De}=pr(O.pathname);Jn(O,{matches:pe,loaderData:{},errors:{[De.id]:ke}},{flushSync:te});return}x=new AbortController;let Q=zs(t.history,O,x.signal,j&&j.submission),K;if(j&&j.pendingError)K=[es(X).route.id,{type:Te.error,error:j.pendingError}];else if(j&&j.submission&&zn(j.submission.formMethod)){let ke=await Dd(Q,O,j.submission,X,Y.active,{replace:j.replace,flushSync:te});if(ke.shortCircuited)return;if(ke.pendingActionResult){let[pe,De]=ke.pendingActionResult;if(pn(De)&&ll(De.error)&&De.error.status===404){x=null,Jn(O,{matches:ke.matches,loaderData:{},errors:{[pe]:De.error}});return}}X=ke.matches||X,K=ke.pendingActionResult,G=gh(O,j.submission),te=!1,Y.active=!1,Q=zs(t.history,Q.url,Q.signal)}let{shortCircuited:J,matches:ie,loaderData:ae,errors:st}=await Ld(Q,O,X,Y.active,G,j&&j.submission,j&&j.fetcherSubmission,j&&j.replace,j&&j.initialHydration===!0,te,K);J||(x=null,Jn(O,$e({matches:ie||X},nv(K),{loaderData:ae,errors:st})))}async function Dd(A,O,j,z,G,X){X===void 0&&(X={}),ht();let te=LI(O,j);if(ct({navigation:te},{flushSync:X.flushSync===!0}),G){let K=await er(z,O.pathname,A.signal);if(K.type==="aborted")return{shortCircuited:!0};if(K.type==="error"){let J=es(K.partialMatches).route.id;return{matches:K.partialMatches,pendingActionResult:[J,{type:Te.error,error:K.error}]}}else if(K.matches)z=K.matches;else{let{notFoundMatches:J,error:ie,route:ae}=pr(O.pathname);return{matches:J,pendingActionResult:[ae.id,{type:Te.error,error:ie}]}}}let Y,Q=Sa(z,O);if(!Q.route.action&&!Q.route.lazy)Y={type:Te.error,error:en(405,{method:A.method,pathname:O.pathname,routeId:Q.route.id})};else if(Y=(await Kr("action",_,A,[Q],z,null))[Q.route.id],A.signal.aborted)return{shortCircuited:!0};if(is(Y)){let K;return X&&X.replace!=null?K=X.replace:K=J_(Y.response.headers.get("Location"),new URL(A.url),u)===_.location.pathname+_.location.search,await Ln(A,Y,!0,{submission:j,replace:K}),{shortCircuited:!0}}if(pi(Y))throw en(400,{type:"defer-action"});if(pn(Y)){let K=es(z,Q.route.id);return(X&&X.replace)!==!0&&(E=at.Push),{matches:z,pendingActionResult:[K.route.id,Y]}}return{matches:z,pendingActionResult:[Q.route.id,Y]}}async function Ld(A,O,j,z,G,X,te,Y,Q,K,J){let ie=G||gh(O,X),ae=X||te||sv(ie),st=!Pe&&(!h.v7_partialHydration||!Q);if(z){if(st){let je=Ho(J);ct($e({navigation:ie},je!==void 0?{actionData:je}:{}),{flushSync:K})}let me=await er(j,O.pathname,A.signal);if(me.type==="aborted")return{shortCircuited:!0};if(me.type==="error"){let je=es(me.partialMatches).route.id;return{matches:me.partialMatches,loaderData:{},errors:{[je]:me.error}}}else if(me.matches)j=me.matches;else{let{error:je,notFoundMatches:vr,route:Qr}=pr(O.pathname);return{matches:vr,loaderData:{},errors:{[Qr.id]:je}}}}let ke=l||o,[pe,De]=Y_(t.history,_,j,ae,O,h.v7_partialHydration&&Q===!0,h.v7_skipActionErrorRevalidation,Et,Xn,Jt,et,Ne,de,ke,u,J);if(Vi(me=>!(j&&j.some(je=>je.route.id===me))||pe&&pe.some(je=>je.route.id===me)),re=++Z,pe.length===0&&De.length===0){let me=Ds();return Jn(O,$e({matches:j,loaderData:{},errors:J&&pn(J[1])?{[J[0]]:J[1].error}:null},nv(J),me?{fetchers:new Map(_.fetchers)}:{}),{flushSync:K}),{shortCircuited:!0}}if(st){let me={};if(!z){me.navigation=ie;let je=Ho(J);je!==void 0&&(me.actionData=je)}De.length>0&&(me.fetchers=Wo(De)),ct(me,{flushSync:K})}De.forEach(me=>{On(me.key),me.controller&&H.set(me.key,me.controller)});let gr=()=>De.forEach(me=>On(me.key));x&&x.signal.addEventListener("abort",gr);let{loaderResults:qr,fetcherResults:Mn}=await dt(_,j,pe,De,A);if(A.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",gr),De.forEach(me=>H.delete(me.key));let $t=Cu(qr);if($t)return await Ln(A,$t.result,!0,{replace:Y}),{shortCircuited:!0};if($t=Cu(Mn),$t)return de.add($t.key),await Ln(A,$t.result,!0,{replace:Y}),{shortCircuited:!0};let{loaderData:Ms,errors:_r}=ev(_,j,qr,J,De,Mn,Ct);Ct.forEach((me,je)=>{me.subscribe(vr=>{(vr||me.done)&&Ct.delete(je)})}),h.v7_partialHydration&&Q&&_.errors&&(_r=$e({},_.errors,_r));let dn=Ds(),Cn=Wl(re),Yr=dn||Cn||De.length>0;return $e({matches:j,loaderData:Ms,errors:_r},Yr?{fetchers:new Map(_.fetchers)}:{})}function Ho(A){if(A&&!pn(A[1]))return{[A[0]]:A[1].data};if(_.actionData)return Object.keys(_.actionData).length===0?null:_.actionData}function Wo(A){return A.forEach(O=>{let j=_.fetchers.get(O.key),z=ha(void 0,j?j.data:void 0);_.fetchers.set(O.key,z)}),new Map(_.fetchers)}function Hl(A,O,j,z){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");On(A);let G=(z&&z.flushSync)===!0,X=l||o,te=Nf(_.location,_.matches,u,h.v7_prependBasename,j,h.v7_relativeSplatPath,O,z==null?void 0:z.relative),Y=Zi(X,te,u),Q=Gi(Y,X,te);if(Q.active&&Q.matches&&(Y=Q.matches),!Y){En(A,O,en(404,{pathname:te}),{flushSync:G});return}let{path:K,submission:J,error:ie}=K_(h.v7_normalizeFormMethod,!0,te,z);if(ie){En(A,O,ie,{flushSync:G});return}let ae=Sa(Y,K),st=(z&&z.preventScrollReset)===!0;if(J&&zn(J.formMethod)){Od(A,O,K,ae,Y,Q.active,G,st,J);return}Ne.set(A,{routeId:O,path:K}),Vo(A,O,K,ae,Y,Q.active,G,st,J)}async function Od(A,O,j,z,G,X,te,Y,Q){ht(),Ne.delete(A);function K(ze){if(!ze.route.action&&!ze.route.lazy){let tr=en(405,{method:Q.formMethod,pathname:j,routeId:O});return En(A,O,tr,{flushSync:te}),!0}return!1}if(!X&&K(z))return;let J=_.fetchers.get(A);cn(A,OI(Q,J),{flushSync:te});let ie=new AbortController,ae=zs(t.history,j,ie.signal,Q);if(X){let ze=await er(G,new URL(ae.url).pathname,ae.signal,A);if(ze.type==="aborted")return;if(ze.type==="error"){En(A,O,ze.error,{flushSync:te});return}else if(ze.matches){if(G=ze.matches,z=Sa(G,j),K(z))return}else{En(A,O,en(404,{pathname:j}),{flushSync:te});return}}H.set(A,ie);let st=Z,pe=(await Kr("action",_,ae,[z],G,A))[z.route.id];if(ae.signal.aborted){H.get(A)===ie&&H.delete(A);return}if(h.v7_fetcherPersist&&et.has(A)){if(is(pe)||pn(pe)){cn(A,ni(void 0));return}}else{if(is(pe))if(H.delete(A),re>st){cn(A,ni(void 0));return}else return de.add(A),cn(A,ha(Q)),Ln(ae,pe,!1,{fetcherSubmission:Q,preventScrollReset:Y});if(pn(pe)){En(A,O,pe.error);return}}if(pi(pe))throw en(400,{type:"defer-action"});let De=_.navigation.location||_.location,gr=zs(t.history,De,ie.signal),qr=l||o,Mn=_.navigation.state!=="idle"?Zi(qr,_.navigation.location,u):_.matches;he(Mn,"Didn't find any matches after fetcher action");let $t=++Z;Se.set(A,$t);let Ms=ha(Q,pe.data);_.fetchers.set(A,Ms);let[_r,dn]=Y_(t.history,_,Mn,Q,De,!1,h.v7_skipActionErrorRevalidation,Et,Xn,Jt,et,Ne,de,qr,u,[z.route.id,pe]);dn.filter(ze=>ze.key!==A).forEach(ze=>{let tr=ze.key,Yo=_.fetchers.get(tr),ql=ha(void 0,Yo?Yo.data:void 0);_.fetchers.set(tr,ql),On(tr),ze.controller&&H.set(tr,ze.controller)}),ct({fetchers:new Map(_.fetchers)});let Cn=()=>dn.forEach(ze=>On(ze.key));ie.signal.addEventListener("abort",Cn);let{loaderResults:Yr,fetcherResults:me}=await dt(_,Mn,_r,dn,gr);if(ie.signal.aborted)return;ie.signal.removeEventListener("abort",Cn),Se.delete(A),H.delete(A),dn.forEach(ze=>H.delete(ze.key));let je=Cu(Yr);if(je)return Ln(gr,je.result,!1,{preventScrollReset:Y});if(je=Cu(me),je)return de.add(je.key),Ln(gr,je.result,!1,{preventScrollReset:Y});let{loaderData:vr,errors:Qr}=ev(_,Mn,Yr,void 0,dn,me,Ct);if(_.fetchers.has(A)){let ze=ni(pe.data);_.fetchers.set(A,ze)}Wl($t),_.navigation.state==="loading"&&$t>re?(he(E,"Expected pending action"),x&&x.abort(),Jn(_.navigation.location,{matches:Mn,loaderData:vr,errors:Qr,fetchers:new Map(_.fetchers)})):(ct({errors:Qr,loaderData:tv(_.loaderData,vr,Mn,Qr),fetchers:new Map(_.fetchers)}),Et=!1)}async function Vo(A,O,j,z,G,X,te,Y,Q){let K=_.fetchers.get(A);cn(A,ha(Q,K?K.data:void 0),{flushSync:te});let J=new AbortController,ie=zs(t.history,j,J.signal);if(X){let pe=await er(G,new URL(ie.url).pathname,ie.signal,A);if(pe.type==="aborted")return;if(pe.type==="error"){En(A,O,pe.error,{flushSync:te});return}else if(pe.matches)G=pe.matches,z=Sa(G,j);else{En(A,O,en(404,{pathname:j}),{flushSync:te});return}}H.set(A,J);let ae=Z,ke=(await Kr("loader",_,ie,[z],G,A))[z.route.id];if(pi(ke)&&(ke=await Jp(ke,ie.signal,!0)||ke),H.get(A)===J&&H.delete(A),!ie.signal.aborted){if(et.has(A)){cn(A,ni(void 0));return}if(is(ke))if(re>ae){cn(A,ni(void 0));return}else{de.add(A),await Ln(ie,ke,!1,{preventScrollReset:Y});return}if(pn(ke)){En(A,O,ke.error);return}he(!pi(ke),"Unhandled fetcher deferred data"),cn(A,ni(ke.data))}}async function Ln(A,O,j,z){let{submission:G,fetcherSubmission:X,preventScrollReset:te,replace:Y}=z===void 0?{}:z;O.response.headers.has("X-Remix-Revalidate")&&(Et=!0);let Q=O.response.headers.get("Location");he(Q,"Expected a Location header on the redirect Response"),Q=J_(Q,new URL(A.url),u);let K=al(_.location,Q,{_isRedirect:!0});if(n){let pe=!1;if(O.response.headers.has("X-Remix-Reload-Document"))pe=!0;else if(Xp.test(Q)){const De=t.history.createURL(Q);pe=De.origin!==e.location.origin||Do(De.pathname,u)==null}if(pe){Y?e.location.replace(Q):e.location.assign(Q);return}}x=null;let J=Y===!0||O.response.headers.has("X-Remix-Replace")?at.Replace:at.Push,{formMethod:ie,formAction:ae,formEncType:st}=_.navigation;!G&&!X&&ie&&ae&&st&&(G=sv(_.navigation));let ke=G||X;if(mI.has(O.response.status)&&ke&&zn(ke.formMethod))await Zn(J,K,{submission:$e({},ke,{formAction:Q}),preventScrollReset:te||I,enableViewTransition:j?b:void 0});else{let pe=gh(K,G);await Zn(J,K,{overrideNavigation:pe,fetcherSubmission:X,preventScrollReset:te||I,enableViewTransition:j?b:void 0})}}async function Kr(A,O,j,z,G,X){let te,Y={};try{te=await SI(c,A,O,j,z,G,X,s,i)}catch(Q){return z.forEach(K=>{Y[K.route.id]={type:Te.error,error:Q}}),Y}for(let[Q,K]of Object.entries(te))if(RI(K)){let J=K.result;Y[Q]={type:Te.redirect,response:II(J,j,Q,G,u,h.v7_relativeSplatPath)}}else Y[Q]=await TI(K);return Y}async function dt(A,O,j,z,G){let X=A.matches,te=Kr("loader",A,G,j,O,null),Y=Promise.all(z.map(async J=>{if(J.matches&&J.match&&J.controller){let ae=(await Kr("loader",A,zs(t.history,J.path,J.controller.signal),[J.match],J.matches,J.key))[J.match.route.id];return{[J.key]:ae}}else return Promise.resolve({[J.key]:{type:Te.error,error:en(404,{pathname:J.path})}})})),Q=await te,K=(await Y).reduce((J,ie)=>Object.assign(J,ie),{});return await Promise.all([bI(O,Q,G.signal,X,A.loaderData),DI(O,K,z)]),{loaderResults:Q,fetcherResults:K}}function ht(){Et=!0,Xn.push(...Vi()),Ne.forEach((A,O)=>{H.has(O)&&Jt.add(O),On(O)})}function cn(A,O,j){j===void 0&&(j={}),_.fetchers.set(A,O),ct({fetchers:new Map(_.fetchers)},{flushSync:(j&&j.flushSync)===!0})}function En(A,O,j,z){z===void 0&&(z={});let G=es(_.matches,O);bs(A),ct({errors:{[G.route.id]:j},fetchers:new Map(_.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function Go(A){return zt.set(A,(zt.get(A)||0)+1),et.has(A)&&et.delete(A),_.fetchers.get(A)||gI}function bs(A){let O=_.fetchers.get(A);H.has(A)&&!(O&&O.state==="loading"&&Se.has(A))&&On(A),Ne.delete(A),Se.delete(A),de.delete(A),h.v7_fetcherPersist&&et.delete(A),Jt.delete(A),_.fetchers.delete(A)}function Hi(A){let O=(zt.get(A)||0)-1;O<=0?(zt.delete(A),et.add(A),h.v7_fetcherPersist||bs(A)):zt.set(A,O),ct({fetchers:new Map(_.fetchers)})}function On(A){let O=H.get(A);O&&(O.abort(),H.delete(A))}function Ko(A){for(let O of A){let j=Go(O),z=ni(j.data);_.fetchers.set(O,z)}}function Ds(){let A=[],O=!1;for(let j of de){let z=_.fetchers.get(j);he(z,"Expected fetcher: "+j),z.state==="loading"&&(de.delete(j),A.push(j),O=!0)}return Ko(A),O}function Wl(A){let O=[];for(let[j,z]of Se)if(z<A){let G=_.fetchers.get(j);he(G,"Expected fetcher: "+j),G.state==="loading"&&(On(j),Se.delete(j),O.push(j))}return Ko(O),O.length>0}function Md(A,O){let j=_.blockers.get(A)||da;return St.get(A)!==O&&St.set(A,O),j}function Ls(A){_.blockers.delete(A),St.delete(A)}function Wi(A,O){let j=_.blockers.get(A)||da;he(j.state==="unblocked"&&O.state==="blocked"||j.state==="blocked"&&O.state==="blocked"||j.state==="blocked"&&O.state==="proceeding"||j.state==="blocked"&&O.state==="unblocked"||j.state==="proceeding"&&O.state==="unblocked","Invalid blocker state transition: "+j.state+" -> "+O.state);let z=new Map(_.blockers);z.set(A,O),ct({blockers:z})}function Vl(A){let{currentLocation:O,nextLocation:j,historyAction:z}=A;if(St.size===0)return;St.size>1&&ms(!1,"A router only supports one blocker at a time");let G=Array.from(St.entries()),[X,te]=G[G.length-1],Y=_.blockers.get(X);if(!(Y&&Y.state==="proceeding")&&te({currentLocation:O,nextLocation:j,historyAction:z}))return X}function pr(A){let O=en(404,{pathname:A}),j=l||o,{matches:z,route:G}=rv(j);return Vi(),{notFoundMatches:z,route:G,error:O}}function Vi(A){let O=[];return Ct.forEach((j,z)=>{(!A||A(z))&&(j.cancel(),O.push(z),Ct.delete(z))}),O}function qo(A,O,j){if(k=A,T=O,N=j||null,!v&&_.navigation===mh){v=!0;let z=Os(_.location,_.matches);z!=null&&ct({restoreScrollPosition:z})}return()=>{k=null,T=null,N=null}}function mr(A,O){return N&&N(A,O.map(z=>GT(z,_.loaderData)))||A.key}function Gl(A,O){if(k&&T){let j=mr(A,O);k[j]=T()}}function Os(A,O){if(k){let j=mr(A,O),z=k[j];if(typeof z=="number")return z}return null}function Gi(A,O,j){if(f)if(A){if(Object.keys(A[0].params).length>0)return{active:!0,matches:$u(O,j,u,!0)}}else return{active:!0,matches:$u(O,j,u,!0)||[]};return{active:!1,matches:null}}async function er(A,O,j,z){if(!f)return{type:"success",matches:A};let G=A;for(;;){let X=l==null,te=l||o,Y=s;try{await f({signal:j,path:O,matches:G,fetcherKey:z,patch:(J,ie)=>{j.aborted||X_(J,ie,te,Y,i)}})}catch(J){return{type:"error",error:J,partialMatches:G}}finally{X&&!j.aborted&&(o=[...o])}if(j.aborted)return{type:"aborted"};let Q=Zi(te,O,u);if(Q)return{type:"success",matches:Q};let K=$u(te,O,u,!0);if(!K||G.length===K.length&&G.every((J,ie)=>J.route.id===K[ie].route.id))return{type:"success",matches:null};G=K}}function Kl(A){s={},l=wc(A,i,void 0,s)}function kt(A,O){let j=l==null;X_(A,O,l||o,s,i),j&&(o=[...o],ct({}))}return B={get basename(){return u},get future(){return h},get state(){return _},get routes(){return o},get window(){return e},initialize:bd,subscribe:Ps,enableScrollRestoration:qo,navigate:As,fetch:Hl,revalidate:$o,createHref:A=>t.history.createHref(A),encodeLocation:A=>t.history.encodeLocation(A),getFetcher:Go,deleteFetcher:Hi,dispose:Rs,getBlocker:Md,deleteBlocker:Ls,patchRoutes:kt,_internalFetchControllers:H,_internalActiveDeferreds:Ct,_internalSetRoutes:Kl},B}function yI(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Nf(t,e,n,r,i,s,o,l){let u,c;if(o){u=[];for(let h of e)if(u.push(h),h.route.id===o){c=h;break}}else u=e,c=e[e.length-1];let f=cd(i||".",ud(u,s),Do(t.pathname,n)||t.pathname,l==="path");if(i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&c){let h=Zp(f.search);if(c.route.index&&!h)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&h){let g=new URLSearchParams(f.search),w=g.getAll("index");g.delete("index"),w.filter(N=>N).forEach(N=>g.append("index",N));let k=g.toString();f.search=k?"?"+k:""}}return r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:Ar([n,f.pathname])),gs(f)}function K_(t,e,n,r){if(!r||!yI(r))return{path:n};if(r.formMethod&&!AI(r.formMethod))return{path:n,error:en(405,{method:r.formMethod})};let i=()=>({path:n,error:en(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=oE(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!zn(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((w,k)=>{let[N,T]=k;return""+w+N+"="+T+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!zn(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}he(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=Pf(r.formData),c=r.formData;else if(r.body instanceof FormData)u=Pf(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=Z_(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=Z_(u)}catch{return i()}let f={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(zn(f.formMethod))return{path:n,submission:f};let h=Ui(n);return e&&h.search&&Zp(h.search)&&u.append("index",""),h.search="?"+u,{path:gs(h),submission:f}}function q_(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Y_(t,e,n,r,i,s,o,l,u,c,f,h,g,w,k,N){let T=N?pn(N[1])?N[1].error:N[1].data:void 0,v=t.createURL(e.location),y=t.createURL(i),S=n;s&&e.errors?S=q_(n,Object.keys(e.errors)[0],!0):N&&pn(N[1])&&(S=q_(n,N[0]));let P=N?N[1].statusCode:void 0,F=o&&P&&P>=400,B=S.filter((E,I)=>{let{route:x}=E;if(x.lazy)return!0;if(x.loader==null)return!1;if(s)return Rf(x,e.loaderData,e.errors);if(wI(e.loaderData,e.matches[I],E)||u.some(R=>R===E.route.id))return!0;let b=e.matches[I],D=E;return Q_(E,$e({currentUrl:v,currentParams:b.params,nextUrl:y,nextParams:D.params},r,{actionResult:T,actionStatus:P,defaultShouldRevalidate:F?!1:l||v.pathname+v.search===y.pathname+y.search||v.search!==y.search||iE(b,D)}))}),_=[];return h.forEach((E,I)=>{if(s||!n.some(Pe=>Pe.route.id===E.routeId)||f.has(I))return;let x=Zi(w,E.path,k);if(!x){_.push({key:I,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let b=e.fetchers.get(I),D=Sa(x,E.path),R=!1;g.has(I)?R=!1:c.has(I)?(c.delete(I),R=!0):b&&b.state!=="idle"&&b.data===void 0?R=l:R=Q_(D,$e({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:T,actionStatus:P,defaultShouldRevalidate:F?!1:l})),R&&_.push({key:I,routeId:E.routeId,path:E.path,matches:x,match:D,controller:new AbortController})}),[B,_]}function Rf(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function wI(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function iE(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Q_(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function X_(t,e,n,r,i){var s;let o;if(t){let c=r[t];he(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let l=e.filter(c=>!o.some(f=>sE(c,f))),u=wc(l,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...u)}function sE(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>sE(n,s))}):!1}async function EI(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];he(i,"No route found in manifest");let s={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";ms(!u,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!WT.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,$e({},e(i),{lazy:void 0}))}async function CI(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function SI(t,e,n,r,i,s,o,l,u,c){let f=s.map(w=>w.route.lazy?EI(w.route,u,l):void 0),h=s.map((w,k)=>{let N=f[k],T=i.some(y=>y.route.id===w.route.id);return $e({},w,{shouldLoad:T,resolve:async y=>(y&&r.method==="GET"&&(w.route.lazy||w.route.loader)&&(T=!0),T?kI(e,r,w,N,y,c):Promise.resolve({type:Te.data,result:void 0}))})}),g=await t({matches:h,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(f)}catch{}return g}async function kI(t,e,n,r,i,s){let o,l,u=c=>{let f,h=new Promise((k,N)=>f=N);l=()=>f(),e.signal.addEventListener("abort",l);let g=k=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...k!==void 0?[k]:[]),w=(async()=>{try{return{type:"data",result:await(i?i(N=>g(N)):g())}}catch(k){return{type:"error",result:k}}})();return Promise.race([w,h])};try{let c=n.route[t];if(r)if(c){let f,[h]=await Promise.all([u(c).catch(g=>{f=g}),r]);if(f!==void 0)throw f;o=h}else if(await r,c=n.route[t],c)o=await u(c);else if(t==="action"){let f=new URL(e.url),h=f.pathname+f.search;throw en(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:Te.data,result:void 0};else if(c)o=await u(c);else{let f=new URL(e.url),h=f.pathname+f.search;throw en(404,{pathname:h})}he(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Te.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function TI(t){let{result:e,type:n}=t;if(aE(e)){let h;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?h=null:h=await e.json():h=await e.text()}catch(g){return{type:Te.error,error:g}}return n===Te.error?{type:Te.error,error:new Ec(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:Te.data,data:h,statusCode:e.status,headers:e.headers}}if(n===Te.error){if(iv(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:Te.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Te.error,error:new Ec(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:ll(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Te.error,error:e,statusCode:ll(e)?e.status:void 0}}if(PI(e)){var l,u;return{type:Te.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(iv(e)){var c,f;return{type:Te.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:Te.data,data:e}}function II(t,e,n,r,i,s){let o=t.headers.get("Location");if(he(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Xp.test(o)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=Nf(new URL(e.url),l,i,!0,o,s),t.headers.set("Location",o)}return t}function J_(t,e,n){if(Xp.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Do(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function zs(t,e,n,r){let i=t.createURL(oE(e)).toString(),s={signal:n};if(r&&zn(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=Pf(r.formData):s.body=r.formData}return new Request(i,s)}function Pf(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Z_(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function xI(t,e,n,r,i){let s={},o=null,l,u=!1,c={},f=n&&pn(n[1])?n[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in e))return;let g=h.route.id,w=e[g];if(he(!is(w),"Cannot handle redirect results in processLoaderData"),pn(w)){let k=w.error;f!==void 0&&(k=f,f=void 0),o=o||{};{let N=es(t,g);o[N.route.id]==null&&(o[N.route.id]=k)}s[g]=void 0,u||(u=!0,l=ll(w.error)?w.error.status:500),w.headers&&(c[g]=w.headers)}else pi(w)?(r.set(g,w.deferredData),s[g]=w.deferredData.data,w.statusCode!=null&&w.statusCode!==200&&!u&&(l=w.statusCode),w.headers&&(c[g]=w.headers)):(s[g]=w.data,w.statusCode&&w.statusCode!==200&&!u&&(l=w.statusCode),w.headers&&(c[g]=w.headers))}),f!==void 0&&n&&(o={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:c}}function ev(t,e,n,r,i,s,o){let{loaderData:l,errors:u}=xI(e,n,r,o);return i.forEach(c=>{let{key:f,match:h,controller:g}=c,w=s[f];if(he(w,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(pn(w)){let k=es(t.matches,h==null?void 0:h.route.id);u&&u[k.route.id]||(u=$e({},u,{[k.route.id]:w.error})),t.fetchers.delete(f)}else if(is(w))he(!1,"Unhandled fetcher revalidation redirect");else if(pi(w))he(!1,"Unhandled fetcher deferred data");else{let k=ni(w.data);t.fetchers.set(f,k)}}),{loaderData:l,errors:u}}function tv(t,e,n,r){let i=$e({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function nv(t){return t?pn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function es(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function rv(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function en(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?u="defer() is not supported in actions":s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new Ec(t||500,l,new Error(u),!0)}function Cu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(is(i))return{key:r,result:i}}}function oE(t){let e=typeof t=="string"?Ui(t):t;return gs($e({},e,{hash:""}))}function NI(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function RI(t){return aE(t.result)&&pI.has(t.result.status)}function pi(t){return t.type===Te.deferred}function pn(t){return t.type===Te.error}function is(t){return(t&&t.type)===Te.redirect}function iv(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function PI(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function aE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function AI(t){return fI.has(t.toLowerCase())}function zn(t){return dI.has(t.toLowerCase())}async function bI(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[l,u]=s[o],c=t.find(g=>(g==null?void 0:g.route.id)===l);if(!c)continue;let f=r.find(g=>g.route.id===c.route.id),h=f!=null&&!iE(f,c)&&(i&&i[c.route.id])!==void 0;pi(u)&&h&&await Jp(u,n,!1).then(g=>{g&&(e[l]=g)})}}async function DI(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],l=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&pi(l)&&(he(o,"Expected an AbortController for revalidating fetcher deferred result"),await Jp(l,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function Jp(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Te.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Te.error,error:i}}return{type:Te.data,data:t.deferredData.data}}}function Zp(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Sa(t,e){let n=typeof e=="string"?Ui(e).search:e.search;if(t[t.length-1].route.index&&Zp(n||""))return t[t.length-1];let r=tE(t);return r[r.length-1]}function sv(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function gh(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function LI(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ha(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function OI(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ni(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function MI(t,e){try{let n=t.sessionStorage.getItem(rE);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function jI(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(rE,JSON.stringify(n))}catch(r){ms(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cc(){return Cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cc.apply(this,arguments)}const dd=L.createContext(null),lE=L.createContext(null),Bi=L.createContext(null),em=L.createContext(null),Wr=L.createContext({outlet:null,matches:[],isDataRoute:!1}),uE=L.createContext(null);function FI(t,e){let{relative:n}=e===void 0?{}:e;Lo()||he(!1);let{basename:r,navigator:i}=L.useContext(Bi),{hash:s,pathname:o,search:l}=hE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ar([r,o])),i.createHref({pathname:u,search:l,hash:s})}function Lo(){return L.useContext(em)!=null}function Oo(){return Lo()||he(!1),L.useContext(em).location}function cE(t){L.useContext(Bi).static||L.useLayoutEffect(t)}function Nl(){let{isDataRoute:t}=L.useContext(Wr);return t?QI():UI()}function UI(){Lo()||he(!1);let t=L.useContext(dd),{basename:e,future:n,navigator:r}=L.useContext(Bi),{matches:i}=L.useContext(Wr),{pathname:s}=Oo(),o=JSON.stringify(ud(i,n.v7_relativeSplatPath)),l=L.useRef(!1);return cE(()=>{l.current=!0}),L.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let h=cd(c,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ar([e,h.pathname])),(f.replace?r.replace:r.push)(h,f.state,f)},[e,r,o,s,t])}function dE(){let{matches:t}=L.useContext(Wr),e=t[t.length-1];return e?e.params:{}}function hE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(Bi),{matches:i}=L.useContext(Wr),{pathname:s}=Oo(),o=JSON.stringify(ud(i,r.v7_relativeSplatPath));return L.useMemo(()=>cd(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function BI(t,e,n,r){Lo()||he(!1);let{navigator:i}=L.useContext(Bi),{matches:s}=L.useContext(Wr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Oo(),f;f=c;let h=f.pathname||"/",g=h;if(u!=="/"){let N=u.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(N.length).join("/")}let w=Zi(t,{pathname:g});return VI(w&&w.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:Ar([u,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Ar([u,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r)}function zI(){let t=YI(),e=ll(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:i},n):null,null)}const $I=L.createElement(zI,null);class HI extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Wr.Provider,{value:this.props.routeContext},L.createElement(uE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WI(t){let{routeContext:e,match:n,children:r}=t,i=L.useContext(dd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Wr.Provider,{value:e},r)}function VI(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);f>=0||he(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let h=o[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:w}=n,k=h.route.loader&&g[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||k){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,h,g)=>{let w,k=!1,N=null,T=null;n&&(w=l&&h.route.id?l[h.route.id]:void 0,N=h.route.errorElement||$I,u&&(c<0&&g===0?(XI("route-fallback"),k=!0,T=null):c===g&&(k=!0,T=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,g+1)),y=()=>{let S;return w?S=N:k?S=T:h.route.Component?S=L.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=f,L.createElement(WI,{match:h,routeContext:{outlet:f,matches:v,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?L.createElement(HI,{location:n.location,revalidation:n.revalidation,component:N,error:w,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var fE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(fE||{}),pE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pE||{});function GI(t){let e=L.useContext(dd);return e||he(!1),e}function KI(t){let e=L.useContext(lE);return e||he(!1),e}function qI(t){let e=L.useContext(Wr);return e||he(!1),e}function mE(t){let e=qI(),n=e.matches[e.matches.length-1];return n.route.id||he(!1),n.route.id}function YI(){var t;let e=L.useContext(uE),n=KI(),r=mE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function QI(){let{router:t}=GI(fE.UseNavigateStable),e=mE(pE.UseNavigateStable),n=L.useRef(!1);return cE(()=>{n.current=!0}),L.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Cc({fromRouteId:e},s)))},[t,e])}const ov={};function XI(t,e,n){ov[t]||(ov[t]=!0)}function JI(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Hu(t){let{to:e,replace:n,state:r,relative:i}=t;Lo()||he(!1);let{future:s,static:o}=L.useContext(Bi),{matches:l}=L.useContext(Wr),{pathname:u}=Oo(),c=Nl(),f=cd(e,ud(l,s.v7_relativeSplatPath),u,i==="path"),h=JSON.stringify(f);return L.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function ZI(t){let{basename:e="/",children:n=null,location:r,navigationType:i=at.Pop,navigator:s,static:o=!1,future:l}=t;Lo()&&he(!1);let u=e.replace(/^\/*/,"/"),c=L.useMemo(()=>({basename:u,navigator:s,static:o,future:Cc({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Ui(r));let{pathname:f="/",search:h="",hash:g="",state:w=null,key:k="default"}=r,N=L.useMemo(()=>{let T=Do(f,u);return T==null?null:{location:{pathname:T,search:h,hash:g,state:w,key:k},navigationType:i}},[u,f,h,g,w,k,i]);return N==null?null:L.createElement(Bi.Provider,{value:c},L.createElement(em.Provider,{children:n,value:N}))}new Promise(()=>{});function ex(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:L.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:L.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:L.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ul.apply(this,arguments)}function tx(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function nx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rx(t,e){return t.button===0&&(!e||e==="_self")&&!nx(t)}const ix=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sx="6";try{window.__reactRouterVersion=sx}catch{}function ox(t,e){return vI({basename:e==null?void 0:e.basename,future:ul({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:zT({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||ax(),routes:t,mapRouteProperties:ex,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function ax(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=ul({},e,{errors:lx(e.errors)})),e}function lx(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Ec(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const ux=L.createContext({isTransitioning:!1}),cx=L.createContext(new Map),dx="startTransition",av=NS[dx],hx="flushSync",lv=BT[hx];function fx(t){av?av(t):t()}function fa(t){lv?lv(t):t()}let px=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function mx(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=L.useState(n.state),[o,l]=L.useState(),[u,c]=L.useState({isTransitioning:!1}),[f,h]=L.useState(),[g,w]=L.useState(),[k,N]=L.useState(),T=L.useRef(new Map),{v7_startTransition:v}=r||{},y=L.useCallback(E=>{v?fx(E):E()},[v]),S=L.useCallback((E,I)=>{let{deletedFetchers:x,flushSync:b,viewTransitionOpts:D}=I;E.fetchers.forEach((Pe,Et)=>{Pe.data!==void 0&&T.current.set(Et,Pe.data)}),x.forEach(Pe=>T.current.delete(Pe));let R=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!D||R){b?fa(()=>s(E)):y(()=>s(E));return}if(b){fa(()=>{g&&(f&&f.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let Pe=n.window.document.startViewTransition(()=>{fa(()=>s(E))});Pe.finished.finally(()=>{fa(()=>{h(void 0),w(void 0),l(void 0),c({isTransitioning:!1})})}),fa(()=>w(Pe));return}g?(f&&f.resolve(),g.skipTransition(),N({state:E,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(l(E),c({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,g,f,T,y]);L.useLayoutEffect(()=>n.subscribe(S),[n,S]),L.useEffect(()=>{u.isTransitioning&&!u.flushSync&&h(new px)},[u]),L.useEffect(()=>{if(f&&o&&n.window){let E=o,I=f.promise,x=n.window.document.startViewTransition(async()=>{y(()=>s(E)),await I});x.finished.finally(()=>{h(void 0),w(void 0),l(void 0),c({isTransitioning:!1})}),w(x)}},[y,o,f,n.window]),L.useEffect(()=>{f&&o&&i.location.key===o.location.key&&f.resolve()},[f,g,i.location,o]),L.useEffect(()=>{!u.isTransitioning&&k&&(l(k.state),c({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}),N(void 0))},[u.isTransitioning,k]),L.useEffect(()=>{},[]);let P=L.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:E=>n.navigate(E),push:(E,I,x)=>n.navigate(E,{state:I,preventScrollReset:x==null?void 0:x.preventScrollReset}),replace:(E,I,x)=>n.navigate(E,{replace:!0,state:I,preventScrollReset:x==null?void 0:x.preventScrollReset})}),[n]),F=n.basename||"/",B=L.useMemo(()=>({router:n,navigator:P,static:!1,basename:F}),[n,P,F]),_=L.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return L.useEffect(()=>JI(r,n.future),[r,n.future]),L.createElement(L.Fragment,null,L.createElement(dd.Provider,{value:B},L.createElement(lE.Provider,{value:i},L.createElement(cx.Provider,{value:T.current},L.createElement(ux.Provider,{value:u},L.createElement(ZI,{basename:F,location:i.location,navigationType:i.historyAction,navigator:P,future:_},i.initialized||n.future.v7_partialHydration?L.createElement(gx,{routes:n.routes,future:n.future,state:i}):e))))),null)}const gx=L.memo(_x);function _x(t){let{routes:e,future:n,state:r}=t;return BI(e,void 0,r,n)}const vx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gE=L.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:f,viewTransition:h}=e,g=tx(e,ix),{basename:w}=L.useContext(Bi),k,N=!1;if(typeof c=="string"&&yx.test(c)&&(k=c,vx))try{let S=new URL(window.location.href),P=c.startsWith("//")?new URL(S.protocol+c):new URL(c),F=Do(P.pathname,w);P.origin===S.origin&&F!=null?c=F+P.search+P.hash:N=!0}catch{}let T=FI(c,{relative:i}),v=wx(c,{replace:o,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:h});function y(S){r&&r(S),S.defaultPrevented||v(S)}return L.createElement("a",ul({},g,{href:k||T,onClick:N||s?r:y,ref:n,target:u}))});var uv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(uv||(uv={}));var cv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cv||(cv={}));function wx(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=Nl(),c=Oo(),f=hE(t,{relative:o});return L.useCallback(h=>{if(rx(h,n)){h.preventDefault();let g=r!==void 0?r:gs(c)===gs(f);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,f,r,i,n,t,s,o,l])}var dv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W=function(t,e){if(!t)throw Mo(e)},Mo=function(t){return new Error("Firebase Database ("+_E.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ex=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},tm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=s>>2,h=(s&3)<<4|l>>4;let g=(l&15)<<2|c>>6,w=c&63;u||(w=64,o||(g=64)),r.push(n[f],n[h],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ex(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||h==null)throw new Cx;const g=s<<2|l>>4;if(r.push(g),c!==64){const w=l<<4&240|c>>2;if(r.push(w),h!==64){const k=c<<6&192|h;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Cx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yE=function(t){const e=vE(t);return tm.encodeByteArray(e,!0)},Sc=function(t){return yE(t).replace(/\./g,"")},kc=function(t){try{return tm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){return wE(void 0,t)}function wE(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!kx(n)||(t[n]=wE(t[n],e[n]));return t}function kx(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=()=>Tx().__FIREBASE_DEFAULTS__,xx=()=>{if(typeof process>"u"||typeof dv>"u")return;const t=dv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Nx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kc(t[1]);return e&&JSON.parse(e)},nm=()=>{try{return Ix()||xx()||Nx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},EE=t=>{var e,n;return(n=(e=nm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},rm=t=>{const e=EE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},CE=()=>{var t;return(t=nm())===null||t===void 0?void 0:t.config},SE=t=>{var e;return(e=nm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sc(JSON.stringify(n)),Sc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function Rx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Px(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ax(){const t=Yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bx(){return _E.NODE_ADMIN===!0}function Dx(){try{return typeof indexedDB=="object"}catch{return!1}}function Lx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="FirebaseError";class hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ox,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Mx(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new hr(i,l,r)}}function Mx(t,e){return t.replace(jx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){return JSON.parse(t)}function mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=cl(kc(s[0])||""),n=cl(kc(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Fx=function(t){const e=TE(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Ux=function(t){const e=TE(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Co(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Af(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tc(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ic(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(hv(s)&&hv(o)){if(!Ic(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ka(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ta(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const g=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],u=this.chain_[4],c,f;for(let h=0;h<80;h++){h<40?h<20?(c=l^s&(o^l),f=1518500249):(c=s^o^l,f=1859775393):h<60?(c=s&o|l&(s|o),f=2400959708):(c=s^o^l,f=3395469782);const g=(i<<5|i>>>27)+c+u+f+r[h]&4294967295;u=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function zx(t,e){const n=new $x(t,e);return n.subscribe.bind(n)}class $x{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Hx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_h),i.error===void 0&&(i.error=_h),i.complete===void 0&&(i.complete=_h);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _h(){}function hd(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,W(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},fd=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class Ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Rl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kx(e))try{this.getOrInitializeService({instanceIdentifier:Xi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xi){return this.instances.has(e)}getOptions(e=Xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Gx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xi){return this.component?this.component.multipleInstances?e:Xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gx(t){return t===Xi?void 0:t}function Kx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Vx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const Yx={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},Qx=Ce.INFO,Xx={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},Jx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Xx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pd{constructor(e){this.name=e,this._logLevel=Qx,this._logHandler=Jx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const Zx=(t,e)=>e.some(n=>t instanceof n);let fv,pv;function eN(){return fv||(fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tN(){return pv||(pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IE=new WeakMap,bf=new WeakMap,xE=new WeakMap,vh=new WeakMap,om=new WeakMap;function nN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ti(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IE.set(n,t)}).catch(()=>{}),om.set(e,t),e}function rN(t){if(bf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});bf.set(t,e)}let Df={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ti(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iN(t){Df=t(Df)}function sN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yh(this),e,...n);return xE.set(r,e.sort?e.sort():[e]),Ti(r)}:tN().includes(t)?function(...e){return t.apply(yh(this),e),Ti(IE.get(this))}:function(...e){return Ti(t.apply(yh(this),e))}}function oN(t){return typeof t=="function"?sN(t):(t instanceof IDBTransaction&&rN(t),Zx(t,eN())?new Proxy(t,Df):t)}function Ti(t){if(t instanceof IDBRequest)return nN(t);if(vh.has(t))return vh.get(t);const e=oN(t);return e!==t&&(vh.set(t,e),om.set(e,t)),e}const yh=t=>om.get(t);function aN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Ti(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ti(o.result),u.oldVersion,u.newVersion,Ti(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const lN=["get","getKey","getAll","getAllKeys","count"],uN=["put","add","delete","clear"],wh=new Map;function mv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wh.get(e))return wh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=uN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lN.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return wh.set(e,s),s}iN(t=>({...t,get:(e,n,r)=>mv(e,n)||t.get(e,n,r),has:(e,n)=>!!mv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lf="@firebase/app",gv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new pd("@firebase/app"),hN="@firebase/app-compat",fN="@firebase/analytics-compat",pN="@firebase/analytics",mN="@firebase/app-check-compat",gN="@firebase/app-check",_N="@firebase/auth",vN="@firebase/auth-compat",yN="@firebase/database",wN="@firebase/data-connect",EN="@firebase/database-compat",CN="@firebase/functions",SN="@firebase/functions-compat",kN="@firebase/installations",TN="@firebase/installations-compat",IN="@firebase/messaging",xN="@firebase/messaging-compat",NN="@firebase/performance",RN="@firebase/performance-compat",PN="@firebase/remote-config",AN="@firebase/remote-config-compat",bN="@firebase/storage",DN="@firebase/storage-compat",LN="@firebase/firestore",ON="@firebase/vertexai-preview",MN="@firebase/firestore-compat",jN="firebase",FN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="[DEFAULT]",UN={[Lf]:"fire-core",[hN]:"fire-core-compat",[pN]:"fire-analytics",[fN]:"fire-analytics-compat",[gN]:"fire-app-check",[mN]:"fire-app-check-compat",[_N]:"fire-auth",[vN]:"fire-auth-compat",[yN]:"fire-rtdb",[wN]:"fire-data-connect",[EN]:"fire-rtdb-compat",[CN]:"fire-fn",[SN]:"fire-fn-compat",[kN]:"fire-iid",[TN]:"fire-iid-compat",[IN]:"fire-fcm",[xN]:"fire-fcm-compat",[NN]:"fire-perf",[RN]:"fire-perf-compat",[PN]:"fire-rc",[AN]:"fire-rc-compat",[bN]:"fire-gcs",[DN]:"fire-gcs-compat",[LN]:"fire-fst",[MN]:"fire-fst-compat",[ON]:"fire-vertex","fire-js":"fire-js",[jN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Map,BN=new Map,Mf=new Map;function _v(t,e){try{t.container.addComponent(e)}catch(n){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ai(t){const e=t.name;if(Mf.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;Mf.set(e,t);for(const n of xc.values())_v(n,t);for(const n of BN.values())_v(n,t);return!0}function Al(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function or(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new Pl("app","Firebase",zN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=FN;function NE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Of,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ii.create("bad-app-name",{appName:String(i)});if(n||(n=CE()),!n)throw Ii.create("no-options");const s=xc.get(i);if(s){if(Ic(n,s.options)&&Ic(r,s.config))return s;throw Ii.create("duplicate-app",{appName:i})}const o=new qx(i);for(const u of Mf.values())o.addComponent(u);const l=new $N(n,r,o);return xc.set(i,l),l}function md(t=Of){const e=xc.get(t);if(!e&&t===Of&&CE())return NE();if(!e)throw Ii.create("no-app",{appName:t});return e}function Rn(t,e,n){var r;let i=(r=UN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(l.join(" "));return}Ai(new Ur(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="firebase-heartbeat-database",WN=1,dl="firebase-heartbeat-store";let Eh=null;function RE(){return Eh||(Eh=aN(HN,WN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ii.create("idb-open",{originalErrorMessage:t.message})})),Eh}async function VN(t){try{const n=(await RE()).transaction(dl),r=await n.objectStore(dl).get(PE(t));return await n.done,r}catch(e){if(e instanceof hr)Br.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(n.message)}}}async function vv(t,e){try{const r=(await RE()).transaction(dl,"readwrite");await r.objectStore(dl).put(e,PE(t)),await r.done}catch(n){if(n instanceof hr)Br.warn(n.message);else{const r=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Br.warn(r.message)}}}function PE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=1024,KN=30*24*60*60*1e3;class qN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=KN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Br.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yv(),{heartbeatsToSend:r,unsentEntries:i}=YN(this._heartbeatsCache.heartbeats),s=Sc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Br.warn(n),""}}}function yv(){return new Date().toISOString().substring(0,10)}function YN(t,e=GN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),wv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dx()?Lx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wv(t){return Sc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t){Ai(new Ur("platform-logger",e=>new cN(e),"PRIVATE")),Ai(new Ur("heartbeat",e=>new qN(e),"PRIVATE")),Rn(Lf,gv,t),Rn(Lf,gv,"esm2017"),Rn("fire-js","")}XN("");var JN="firebase",ZN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn(JN,ZN,"app");function am(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eR=AE,bE=new Pl("auth","Firebase",AE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new pd("@firebase/auth");function tR(t,...e){Nc.logLevel<=Ce.WARN&&Nc.warn(`Auth (${zi}): ${t}`,...e)}function Wu(t,...e){Nc.logLevel<=Ce.ERROR&&Nc.error(`Auth (${zi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,...e){throw lm(t,...e)}function cr(t,...e){return lm(t,...e)}function DE(t,e,n){const r=Object.assign(Object.assign({},eR()),{[e]:n});return new Pl("auth","Firebase",r).create(e,{appName:t.name})}function br(t){return DE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bE.create(t,...e)}function ne(t,e,...n){if(!t)throw lm(e,...n)}function Tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wu(e),new Error(e)}function zr(t,e){t||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nR(){return Ev()==="http:"||Ev()==="https:"}function Ev(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nR()||Px()||"connection"in navigator)?navigator.onLine:!0}function iR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n){this.shortDelay=e,this.longDelay=n,zr(n>e,"Short delay should be less than long delay!"),this.isMobile=sm()||kE()}get(){return rR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t,e){zr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new bl(3e4,6e4);function $i(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vr(t,e,n,r,i={}){return OE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=jo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return Rx()||(c.referrerPolicy="no-referrer"),LE.fetch()(ME(t,t.config.apiHost,n,l),c)})}async function OE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sR),e);try{const i=new lR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Su(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Su(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Su(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Su(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw DE(t,f,c);Qn(t,f)}}catch(i){if(i instanceof hr)throw i;Qn(t,"network-request-failed",{message:String(i)})}}async function Dl(t,e,n,r,i={}){const s=await Vr(t,e,n,r,i);return"mfaPendingCredential"in s&&Qn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function ME(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?um(t.config,i):`${t.config.apiScheme}://${i}`}function aR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cr(this.auth,"network-request-failed")),oR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Su(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cr(t,e,r);return i.customData._tokenResponse=n,i}function Cv(t){return t!==void 0&&t.enterprise!==void 0}class uR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function cR(t,e){return Vr(t,"GET","/v2/recaptchaConfig",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t,e){return Vr(t,"POST","/v1/accounts:delete",e)}async function jE(t,e){return Vr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hR(t,e=!1){const n=Je(t),r=await n.getIdToken(e),i=cm(r);ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Oa(Ch(i.auth_time)),issuedAtTime:Oa(Ch(i.iat)),expirationTime:Oa(Ch(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ch(t){return Number(t)*1e3}function cm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{const i=kc(n);return i?JSON.parse(i):(Wu("Failed to decode base64 JWT payload"),null)}catch(i){return Wu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Sv(t){const e=cm(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hr&&fR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oa(this.lastLoginAt),this.creationTime=Oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await So(t,jE(n,{idToken:r}));ne(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?FE(s.providerUserInfo):[],l=gR(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Ff(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function mR(t){const e=Je(t);await Rc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function FE(t){return t.map(e=>{var{providerId:n}=e,r=am(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t,e){const n=await OE(t,{},async()=>{const r=jo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ME(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",LE.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vR(t,e){return Vr(t,"POST","/v2/accounts:revokeToken",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=Sv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _R(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new co;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ir{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=am(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ff(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await So(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hR(this,e)}reload(){return mR(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await So(this,dR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,f;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,T=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:P,isAnonymous:F,providerData:B,stsTokenManager:_}=n;ne(S&&_,e,"internal-error");const E=co.fromJSON(this.name,_);ne(typeof S=="string",e,"internal-error"),ei(h,e.name),ei(g,e.name),ne(typeof P=="boolean",e,"internal-error"),ne(typeof F=="boolean",e,"internal-error"),ei(w,e.name),ei(k,e.name),ei(N,e.name),ei(T,e.name),ei(v,e.name),ei(y,e.name);const I=new Ir({uid:S,auth:e,email:g,emailVerified:P,displayName:h,isAnonymous:F,photoURL:k,phoneNumber:w,tenantId:N,stsTokenManager:E,createdAt:v,lastLoginAt:y});return B&&Array.isArray(B)&&(I.providerData=B.map(x=>Object.assign({},x))),T&&(I._redirectEventId=T),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new co;i.updateFromServerResponse(n);const s=new Ir({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?FE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new co;l.updateFromIdToken(r);const u=new Ir({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ff(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=new Map;function xr(t){zr(t instanceof Function,"Expected a class definition");let e=kv.get(t);return e?(zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}UE.type="NONE";const Tv=UE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t,e,n){return`firebase:${t}:${e}:${n}`}class ho{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Vu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Vu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ir._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ho(xr(Tv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||xr(Tv);const o=Vu(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(o);if(f){const h=Ir._fromJSON(e,f);c!==s&&(l=h),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ho(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ho(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VE(e))return"Blackberry";if(GE(e))return"Webos";if(zE(e))return"Safari";if((e.includes("chrome/")||$E(e))&&!e.includes("edge/"))return"Chrome";if(WE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BE(t=Yt()){return/firefox\//i.test(t)}function zE(t=Yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $E(t=Yt()){return/crios\//i.test(t)}function HE(t=Yt()){return/iemobile/i.test(t)}function WE(t=Yt()){return/android/i.test(t)}function VE(t=Yt()){return/blackberry/i.test(t)}function GE(t=Yt()){return/webos/i.test(t)}function dm(t=Yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yR(t=Yt()){var e;return dm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wR(){return Ax()&&document.documentMode===10}function KE(t=Yt()){return dm(t)||WE(t)||GE(t)||VE(t)||/windows phone/i.test(t)||HE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t,e=[]){let n;switch(t){case"Browser":n=Iv(Yt());break;case"Worker":n=`${Iv(Yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e={}){return Vr(t,"GET","/v2/passwordPolicy",$i(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=6;class kR{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:SR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xv(this),this.idTokenSubscription=new xv(this),this.beforeStateQueue=new ER(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jE(this,{idToken:e}),r=await Ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(or(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(br(this));const n=e?Je(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CR(this),n=new kR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xr(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&tR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ts(t){return Je(t)}class xv{constructor(e){this.auth=e,this.observer=null,this.addObserver=zx(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IR(t){gd=t}function YE(t){return gd.loadJS(t)}function xR(){return gd.recaptchaEnterpriseScript}function NR(){return gd.gapiScript}function RR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const PR="recaptcha-enterprise",AR="NO_RECAPTCHA";class bR{constructor(e){this.type=PR,this.auth=Ts(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{cR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new uR(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;Cv(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(AR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&Cv(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=xR();u.length!==0&&(u+=l),YE(u).then(()=>{i(l,s,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function Nv(t,e,n,r=!1){const i=new bR(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Uf(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Nv(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Nv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t,e){const n=Al(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ic(s,e??{}))return i;Qn(i,"already-initialized")}return n.initialize({options:e})}function LR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(xr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function OR(t,e,n){const r=Ts(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=QE(e),{host:o,port:l}=MR(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),jR()}function QE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MR(t){const e=QE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Rv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Rv(o)}}}function Rv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,n){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function FR(t,e){return Vr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(t,e){return Dl(t,"POST","/v1/accounts:signInWithPassword",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(t,e){return Dl(t,"POST","/v1/accounts:signInWithEmailLink",$i(t,e))}async function zR(t,e){return Dl(t,"POST","/v1/accounts:signInWithEmailLink",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends hm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new hl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new hl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,n,"signInWithPassword",UR);case"emailLink":return BR(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,r,"signUpPassword",FR);case"emailLink":return zR(e,{idToken:n,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(t,e){return Dl(t,"POST","/v1/accounts:signInWithIdp",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="http://localhost";class _s extends hm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=am(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new _s(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return fo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fo(e,n)}buildRequest(){const e={requestUri:$R,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WR(t){const e=ka(Ta(t)).link,n=e?ka(Ta(e)).deep_link_id:null,r=ka(Ta(t)).deep_link_id;return(r?ka(Ta(r)).link:null)||r||n||e||t}class fm{constructor(e){var n,r,i,s,o,l;const u=ka(Ta(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,h=HR((i=u.mode)!==null&&i!==void 0?i:null);ne(c&&f&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=f,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=WR(e);try{return new fm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,n){return hl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fm.parseLink(n);return ne(r,"argument-error"),hl._fromEmailAndCode(e,r.code,r.tenantId)}}Fo.PROVIDER_ID="password";Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends XE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Ll{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ai.credential(e.oauthAccessToken)}catch{return null}}}ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _s._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return li.credential(n,r)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Ll{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.GITHUB_SIGN_IN_METHOD="github.com";ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Ll{constructor(){super("twitter.com")}static credential(e,n){return _s._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ci.credential(n,r)}catch{return null}}}ci.TWITTER_SIGN_IN_METHOD="twitter.com";ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){return Dl(t,"POST","/v1/accounts:signUp",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ir._fromIdTokenResponse(e,r,i),o=Pv(r);return new vs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Pv(r);return new vs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Pv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends hr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Pc(e,n,r,i)}}function JE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Pc._fromErrorAndOperation(t,s,e,r):s})}async function GR(t,e,n=!1){const r=await So(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t,e,n=!1){const{auth:r}=t;if(or(r.app))return Promise.reject(br(r));const i="reauthenticate";try{const s=await So(t,JE(r,i,e,t),n);ne(s.idToken,r,"internal-error");const o=cm(s.idToken);ne(o,r,"internal-error");const{sub:l}=o;return ne(t.uid===l,r,"user-mismatch"),vs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Qn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(t,e,n=!1){if(or(t.app))return Promise.reject(br(t));const r="signIn",i=await JE(t,r,e),s=await vs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function qR(t,e){return ZE(Ts(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(t){const e=Ts(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YR(t,e,n){if(or(t.app))return Promise.reject(br(t));const r=Ts(t),o=await Uf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VR).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&e1(t),u}),l=await vs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function QR(t,e,n){return or(t.app)?Promise.reject(br(t)):qR(Je(t),Fo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&e1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e){return Vr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Av(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Je(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await So(r,XR(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function JR(t,e,n,r){return Je(t).onIdTokenChanged(e,n,r)}function ZR(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function eP(t,e,n,r){return Je(t).onAuthStateChanged(e,n,r)}function bv(t){return Je(t).signOut()}const Ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ac,"1"),this.storage.removeItem(Ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=1e3,nP=10;class n1 extends t1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);wR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,nP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},tP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}n1.type="LOCAL";const rP=n1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1 extends t1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}r1.type="SESSION";const i1=r1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new _d(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await iP(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=pm("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return window}function oP(t){dr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function aP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uP(){return s1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="firebaseLocalStorageDb",cP=1,bc="firebaseLocalStorage",a1="fbase_key";class Ol{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vd(t,e){return t.transaction([bc],e?"readwrite":"readonly").objectStore(bc)}function dP(){const t=indexedDB.deleteDatabase(o1);return new Ol(t).toPromise()}function Bf(){const t=indexedDB.open(o1,cP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(bc,{keyPath:a1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(bc)?e(r):(r.close(),await dP(),e(await Bf()))})})}async function Dv(t,e,n){const r=vd(t,!0).put({[a1]:e,value:n});return new Ol(r).toPromise()}async function hP(t,e){const n=vd(t,!1).get(e),r=await new Ol(n).toPromise();return r===void 0?null:r.value}function Lv(t,e){const n=vd(t,!0).delete(e);return new Ol(n).toPromise()}const fP=800,pP=3;class l1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>pP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return s1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_d._getInstance(uP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aP(),!this.activeServiceWorker)return;this.sender=new sP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bf();return await Dv(e,Ac,"1"),await Lv(e,Ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Dv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>hP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=vd(i,!1).getAll();return new Ol(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}l1.type="LOCAL";const mP=l1;new bl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t,e){return e?xr(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends hm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _P(t){return ZE(t.auth,new mm(t),t.bypassAuthState)}function vP(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),KR(n,new mm(t),t.bypassAuthState)}async function yP(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),GR(n,new mm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _P;case"linkViaPopup":case"linkViaRedirect":return yP;case"reauthViaPopup":case"reauthViaRedirect":return vP;default:Qn(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new bl(2e3,1e4);class no extends u1{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wP.get())};e()}}no.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="pendingRedirect",Gu=new Map;class CP extends u1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Gu.get(this.auth._key());if(!e){try{const r=await SP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gu.set(this.auth._key(),e)}return this.bypassAuthState||Gu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SP(t,e){const n=IP(e),r=TP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function kP(t,e){Gu.set(t._key(),e)}function TP(t){return xr(t._redirectPersistence)}function IP(t){return Vu(EP,t.config.apiKey,t.name)}async function xP(t,e,n=!1){if(or(t.app))return Promise.reject(br(t));const r=Ts(t),i=gP(r,e),o=await new CP(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=10*60*1e3;class RP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!c1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ov(e))}saveEventToCache(e){this.cachedEventUids.add(Ov(e)),this.lastProcessedEventTime=Date.now()}}function Ov(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function c1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(t,e={}){return Vr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DP=/^https?/;async function LP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AP(t);for(const n of e)try{if(OP(n))return}catch{}Qn(t,"unauthorized-domain")}function OP(t){const e=jf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!DP.test(n))return!1;if(bP.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=new bl(3e4,6e4);function Mv(){const t=dr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jP(t){return new Promise((e,n)=>{var r,i,s;function o(){Mv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mv(),n(cr(t,"network-request-failed"))},timeout:MP.get()})}if(!((i=(r=dr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=dr().gapi)===null||s===void 0)&&s.load)o();else{const l=RR("iframefcb");return dr()[l]=()=>{gapi.load?o():n(cr(t,"network-request-failed"))},YE(`${NR()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ku=null,e})}let Ku=null;function FP(t){return Ku=Ku||jP(t),Ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=new bl(5e3,15e3),BP="__/auth/iframe",zP="emulator/auth/iframe",$P={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WP(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?um(e,zP):`https://${t.config.authDomain}/${BP}`,r={apiKey:e.apiKey,appName:t.name,v:zi},i=HP.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${jo(r).slice(1)}`}async function VP(t){const e=await FP(t),n=dr().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:WP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$P,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=cr(t,"network-request-failed"),l=dr().setTimeout(()=>{s(o)},UP.get());function u(){dr().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KP=500,qP=600,YP="_blank",QP="http://localhost";class jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XP(t,e,n,r=KP,i=qP){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},GP),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Yt().toLowerCase();n&&(l=$E(c)?YP:n),BE(c)&&(e=e||QP,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,k])=>`${g}${w}=${k},`,"");if(yR(c)&&l!=="_self")return JP(e||"",l),new jv(null);const h=window.open(e||"",l,f);ne(h,t,"popup-blocked");try{h.focus()}catch{}return new jv(h)}function JP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="__/auth/handler",e2="emulator/auth/handler",t2=encodeURIComponent("fac");async function Fv(t,e,n,r,i,s){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zi,eventId:i};if(e instanceof XE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Af(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))o[f]=h}if(e instanceof Ll){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${t2}=${encodeURIComponent(u)}`:"";return`${n2(t)}?${jo(l).slice(1)}${c}`}function n2({config:t}){return t.emulator?um(t,e2):`https://${t.authDomain}/${ZP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="webStorageSupport";class r2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i1,this._completeRedirectFn=xP,this._overrideRedirectResult=kP}async _openPopup(e,n,r,i){var s;zr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Fv(e,n,r,jf(),i);return XP(e,o,pm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Fv(e,n,r,jf(),i);return oP(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(zr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VP(e),r=new RP(e);return n.register("authEvent",i=>(ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sh,{type:Sh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Sh];o!==void 0&&n(!!o),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KE()||zE()||dm()}}const i2=r2;var Uv="@firebase/auth",Bv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a2(t){Ai(new Ur("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qE(t)},c=new TR(r,i,s,u);return LR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ai(new Ur("auth-internal",e=>{const n=Ts(e.getProvider("auth").getImmediate());return(r=>new s2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rn(Uv,Bv,o2(t)),Rn(Uv,Bv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=5*60,u2=SE("authIdTokenMaxAge")||l2;let zv=null;const c2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>u2)return;const i=n==null?void 0:n.token;zv!==i&&(zv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function d2(t=md()){const e=Al(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DR(t,{popupRedirectResolver:i2,persistence:[mP,rP,i1]}),r=SE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=c2(s.toString());ZR(n,o,()=>o(n.currentUser)),JR(n,l=>o(l))}}const i=EE("auth");return i&&OR(n,`http://${i}`),n}function h2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=cr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",h2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a2("Browser");var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,E){function I(){}I.prototype=E.prototype,_.D=E.prototype,_.prototype=new I,_.prototype.constructor=_,_.C=function(x,b,D){for(var R=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)R[Pe-2]=arguments[Pe];return E.prototype[b].apply(x,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,E,I){I||(I=0);var x=Array(16);if(typeof E=="string")for(var b=0;16>b;++b)x[b]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(b=0;16>b;++b)x[b]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=_.g[0],I=_.g[1],b=_.g[2];var D=_.g[3],R=E+(D^I&(b^D))+x[0]+3614090360&4294967295;E=I+(R<<7&4294967295|R>>>25),R=D+(b^E&(I^b))+x[1]+3905402710&4294967295,D=E+(R<<12&4294967295|R>>>20),R=b+(I^D&(E^I))+x[2]+606105819&4294967295,b=D+(R<<17&4294967295|R>>>15),R=I+(E^b&(D^E))+x[3]+3250441966&4294967295,I=b+(R<<22&4294967295|R>>>10),R=E+(D^I&(b^D))+x[4]+4118548399&4294967295,E=I+(R<<7&4294967295|R>>>25),R=D+(b^E&(I^b))+x[5]+1200080426&4294967295,D=E+(R<<12&4294967295|R>>>20),R=b+(I^D&(E^I))+x[6]+2821735955&4294967295,b=D+(R<<17&4294967295|R>>>15),R=I+(E^b&(D^E))+x[7]+4249261313&4294967295,I=b+(R<<22&4294967295|R>>>10),R=E+(D^I&(b^D))+x[8]+1770035416&4294967295,E=I+(R<<7&4294967295|R>>>25),R=D+(b^E&(I^b))+x[9]+2336552879&4294967295,D=E+(R<<12&4294967295|R>>>20),R=b+(I^D&(E^I))+x[10]+4294925233&4294967295,b=D+(R<<17&4294967295|R>>>15),R=I+(E^b&(D^E))+x[11]+2304563134&4294967295,I=b+(R<<22&4294967295|R>>>10),R=E+(D^I&(b^D))+x[12]+1804603682&4294967295,E=I+(R<<7&4294967295|R>>>25),R=D+(b^E&(I^b))+x[13]+4254626195&4294967295,D=E+(R<<12&4294967295|R>>>20),R=b+(I^D&(E^I))+x[14]+2792965006&4294967295,b=D+(R<<17&4294967295|R>>>15),R=I+(E^b&(D^E))+x[15]+1236535329&4294967295,I=b+(R<<22&4294967295|R>>>10),R=E+(b^D&(I^b))+x[1]+4129170786&4294967295,E=I+(R<<5&4294967295|R>>>27),R=D+(I^b&(E^I))+x[6]+3225465664&4294967295,D=E+(R<<9&4294967295|R>>>23),R=b+(E^I&(D^E))+x[11]+643717713&4294967295,b=D+(R<<14&4294967295|R>>>18),R=I+(D^E&(b^D))+x[0]+3921069994&4294967295,I=b+(R<<20&4294967295|R>>>12),R=E+(b^D&(I^b))+x[5]+3593408605&4294967295,E=I+(R<<5&4294967295|R>>>27),R=D+(I^b&(E^I))+x[10]+38016083&4294967295,D=E+(R<<9&4294967295|R>>>23),R=b+(E^I&(D^E))+x[15]+3634488961&4294967295,b=D+(R<<14&4294967295|R>>>18),R=I+(D^E&(b^D))+x[4]+3889429448&4294967295,I=b+(R<<20&4294967295|R>>>12),R=E+(b^D&(I^b))+x[9]+568446438&4294967295,E=I+(R<<5&4294967295|R>>>27),R=D+(I^b&(E^I))+x[14]+3275163606&4294967295,D=E+(R<<9&4294967295|R>>>23),R=b+(E^I&(D^E))+x[3]+4107603335&4294967295,b=D+(R<<14&4294967295|R>>>18),R=I+(D^E&(b^D))+x[8]+1163531501&4294967295,I=b+(R<<20&4294967295|R>>>12),R=E+(b^D&(I^b))+x[13]+2850285829&4294967295,E=I+(R<<5&4294967295|R>>>27),R=D+(I^b&(E^I))+x[2]+4243563512&4294967295,D=E+(R<<9&4294967295|R>>>23),R=b+(E^I&(D^E))+x[7]+1735328473&4294967295,b=D+(R<<14&4294967295|R>>>18),R=I+(D^E&(b^D))+x[12]+2368359562&4294967295,I=b+(R<<20&4294967295|R>>>12),R=E+(I^b^D)+x[5]+4294588738&4294967295,E=I+(R<<4&4294967295|R>>>28),R=D+(E^I^b)+x[8]+2272392833&4294967295,D=E+(R<<11&4294967295|R>>>21),R=b+(D^E^I)+x[11]+1839030562&4294967295,b=D+(R<<16&4294967295|R>>>16),R=I+(b^D^E)+x[14]+4259657740&4294967295,I=b+(R<<23&4294967295|R>>>9),R=E+(I^b^D)+x[1]+2763975236&4294967295,E=I+(R<<4&4294967295|R>>>28),R=D+(E^I^b)+x[4]+1272893353&4294967295,D=E+(R<<11&4294967295|R>>>21),R=b+(D^E^I)+x[7]+4139469664&4294967295,b=D+(R<<16&4294967295|R>>>16),R=I+(b^D^E)+x[10]+3200236656&4294967295,I=b+(R<<23&4294967295|R>>>9),R=E+(I^b^D)+x[13]+681279174&4294967295,E=I+(R<<4&4294967295|R>>>28),R=D+(E^I^b)+x[0]+3936430074&4294967295,D=E+(R<<11&4294967295|R>>>21),R=b+(D^E^I)+x[3]+3572445317&4294967295,b=D+(R<<16&4294967295|R>>>16),R=I+(b^D^E)+x[6]+76029189&4294967295,I=b+(R<<23&4294967295|R>>>9),R=E+(I^b^D)+x[9]+3654602809&4294967295,E=I+(R<<4&4294967295|R>>>28),R=D+(E^I^b)+x[12]+3873151461&4294967295,D=E+(R<<11&4294967295|R>>>21),R=b+(D^E^I)+x[15]+530742520&4294967295,b=D+(R<<16&4294967295|R>>>16),R=I+(b^D^E)+x[2]+3299628645&4294967295,I=b+(R<<23&4294967295|R>>>9),R=E+(b^(I|~D))+x[0]+4096336452&4294967295,E=I+(R<<6&4294967295|R>>>26),R=D+(I^(E|~b))+x[7]+1126891415&4294967295,D=E+(R<<10&4294967295|R>>>22),R=b+(E^(D|~I))+x[14]+2878612391&4294967295,b=D+(R<<15&4294967295|R>>>17),R=I+(D^(b|~E))+x[5]+4237533241&4294967295,I=b+(R<<21&4294967295|R>>>11),R=E+(b^(I|~D))+x[12]+1700485571&4294967295,E=I+(R<<6&4294967295|R>>>26),R=D+(I^(E|~b))+x[3]+2399980690&4294967295,D=E+(R<<10&4294967295|R>>>22),R=b+(E^(D|~I))+x[10]+4293915773&4294967295,b=D+(R<<15&4294967295|R>>>17),R=I+(D^(b|~E))+x[1]+2240044497&4294967295,I=b+(R<<21&4294967295|R>>>11),R=E+(b^(I|~D))+x[8]+1873313359&4294967295,E=I+(R<<6&4294967295|R>>>26),R=D+(I^(E|~b))+x[15]+4264355552&4294967295,D=E+(R<<10&4294967295|R>>>22),R=b+(E^(D|~I))+x[6]+2734768916&4294967295,b=D+(R<<15&4294967295|R>>>17),R=I+(D^(b|~E))+x[13]+1309151649&4294967295,I=b+(R<<21&4294967295|R>>>11),R=E+(b^(I|~D))+x[4]+4149444226&4294967295,E=I+(R<<6&4294967295|R>>>26),R=D+(I^(E|~b))+x[11]+3174756917&4294967295,D=E+(R<<10&4294967295|R>>>22),R=b+(E^(D|~I))+x[2]+718787259&4294967295,b=D+(R<<15&4294967295|R>>>17),R=I+(D^(b|~E))+x[9]+3951481745&4294967295,_.g[0]=_.g[0]+E&4294967295,_.g[1]=_.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,_.g[2]=_.g[2]+b&4294967295,_.g[3]=_.g[3]+D&4294967295}r.prototype.u=function(_,E){E===void 0&&(E=_.length);for(var I=E-this.blockSize,x=this.B,b=this.h,D=0;D<E;){if(b==0)for(;D<=I;)i(this,_,D),D+=this.blockSize;if(typeof _=="string"){for(;D<E;)if(x[b++]=_.charCodeAt(D++),b==this.blockSize){i(this,x),b=0;break}}else for(;D<E;)if(x[b++]=_[D++],b==this.blockSize){i(this,x),b=0;break}}this.h=b,this.o+=E},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var E=1;E<_.length-8;++E)_[E]=0;var I=8*this.o;for(E=_.length-8;E<_.length;++E)_[E]=I&255,I/=256;for(this.u(_),_=Array(16),E=I=0;4>E;++E)for(var x=0;32>x;x+=8)_[I++]=this.g[E]>>>x&255;return _};function s(_,E){var I=l;return Object.prototype.hasOwnProperty.call(I,_)?I[_]:I[_]=E(_)}function o(_,E){this.h=E;for(var I=[],x=!0,b=_.length-1;0<=b;b--){var D=_[b]|0;x&&D==E||(I[b]=D,x=!1)}this.g=I}var l={};function u(_){return-128<=_&&128>_?s(_,function(E){return new o([E|0],0>E?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return h;if(0>_)return T(c(-_));for(var E=[],I=1,x=0;_>=I;x++)E[x]=_/I|0,I*=4294967296;return new o(E,0)}function f(_,E){if(_.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(_.charAt(0)=="-")return T(f(_.substring(1),E));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(E,8)),x=h,b=0;b<_.length;b+=8){var D=Math.min(8,_.length-b),R=parseInt(_.substring(b,b+D),E);8>D?(D=c(Math.pow(E,D)),x=x.j(D).add(c(R))):(x=x.j(I),x=x.add(c(R)))}return x}var h=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-T(this).m();for(var _=0,E=1,I=0;I<this.g.length;I++){var x=this.i(I);_+=(0<=x?x:4294967296+x)*E,E*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(k(this))return"0";if(N(this))return"-"+T(this).toString(_);for(var E=c(Math.pow(_,6)),I=this,x="";;){var b=P(I,E).g;I=v(I,b.j(E));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(_);if(I=b,k(I))return D+x;for(;6>D.length;)D="0"+D;x=D+x}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function k(_){if(_.h!=0)return!1;for(var E=0;E<_.g.length;E++)if(_.g[E]!=0)return!1;return!0}function N(_){return _.h==-1}t.l=function(_){return _=v(this,_),N(_)?-1:k(_)?0:1};function T(_){for(var E=_.g.length,I=[],x=0;x<E;x++)I[x]=~_.g[x];return new o(I,~_.h).add(g)}t.abs=function(){return N(this)?T(this):this},t.add=function(_){for(var E=Math.max(this.g.length,_.g.length),I=[],x=0,b=0;b<=E;b++){var D=x+(this.i(b)&65535)+(_.i(b)&65535),R=(D>>>16)+(this.i(b)>>>16)+(_.i(b)>>>16);x=R>>>16,D&=65535,R&=65535,I[b]=R<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function v(_,E){return _.add(T(E))}t.j=function(_){if(k(this)||k(_))return h;if(N(this))return N(_)?T(this).j(T(_)):T(T(this).j(_));if(N(_))return T(this.j(T(_)));if(0>this.l(w)&&0>_.l(w))return c(this.m()*_.m());for(var E=this.g.length+_.g.length,I=[],x=0;x<2*E;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(var b=0;b<_.g.length;b++){var D=this.i(x)>>>16,R=this.i(x)&65535,Pe=_.i(b)>>>16,Et=_.i(b)&65535;I[2*x+2*b]+=R*Et,y(I,2*x+2*b),I[2*x+2*b+1]+=D*Et,y(I,2*x+2*b+1),I[2*x+2*b+1]+=R*Pe,y(I,2*x+2*b+1),I[2*x+2*b+2]+=D*Pe,y(I,2*x+2*b+2)}for(x=0;x<E;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=E;x<2*E;x++)I[x]=0;return new o(I,0)};function y(_,E){for(;(_[E]&65535)!=_[E];)_[E+1]+=_[E]>>>16,_[E]&=65535,E++}function S(_,E){this.g=_,this.h=E}function P(_,E){if(k(E))throw Error("division by zero");if(k(_))return new S(h,h);if(N(_))return E=P(T(_),E),new S(T(E.g),T(E.h));if(N(E))return E=P(_,T(E)),new S(T(E.g),E.h);if(30<_.g.length){if(N(_)||N(E))throw Error("slowDivide_ only works with positive integers.");for(var I=g,x=E;0>=x.l(_);)I=F(I),x=F(x);var b=B(I,1),D=B(x,1);for(x=B(x,2),I=B(I,2);!k(x);){var R=D.add(x);0>=R.l(_)&&(b=b.add(I),D=R),x=B(x,1),I=B(I,1)}return E=v(_,b.j(E)),new S(b,E)}for(b=h;0<=_.l(E);){for(I=Math.max(1,Math.floor(_.m()/E.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),D=c(I),R=D.j(E);N(R)||0<R.l(_);)I-=x,D=c(I),R=D.j(E);k(D)&&(D=g),b=b.add(D),_=v(_,R)}return new S(b,_)}t.A=function(_){return P(this,_).h},t.and=function(_){for(var E=Math.max(this.g.length,_.g.length),I=[],x=0;x<E;x++)I[x]=this.i(x)&_.i(x);return new o(I,this.h&_.h)},t.or=function(_){for(var E=Math.max(this.g.length,_.g.length),I=[],x=0;x<E;x++)I[x]=this.i(x)|_.i(x);return new o(I,this.h|_.h)},t.xor=function(_){for(var E=Math.max(this.g.length,_.g.length),I=[],x=0;x<E;x++)I[x]=this.i(x)^_.i(x);return new o(I,this.h^_.h)};function F(_){for(var E=_.g.length+1,I=[],x=0;x<E;x++)I[x]=_.i(x)<<1|_.i(x-1)>>>31;return new o(I,_.h)}function B(_,E){var I=E>>5;E%=32;for(var x=_.g.length-I,b=[],D=0;D<x;D++)b[D]=0<E?_.i(D+I)>>>E|_.i(D+I+1)<<32-E:_.i(D+I);return new o(b,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,d1=o}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});var ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,p){return a==Array.prototype||a==Object.prototype||(a[d]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ku=="object"&&ku];for(var d=0;d<a.length;++d){var p=a[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var p=r;a=a.split(".");for(var C=0;C<a.length-1;C++){var M=a[C];if(!(M in p))break e;p=p[M]}a=a[a.length-1],C=p[a],d=d(C),d!=C&&d!=null&&e(p,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var p=0,C=!1,M={next:function(){if(!C&&p<a.length){var U=p++;return{value:d(U,a[U]),done:!1}}return C=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,p){return a.call.apply(a.bind,arguments)}function h(a,d,p){if(!a)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,C),a.apply(d,M)}}return function(){return a.apply(d,arguments)}}function g(a,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:h,g.apply(null,arguments)}function w(a,d){var p=Array.prototype.slice.call(arguments,1);return function(){var C=p.slice();return C.push.apply(C,arguments),a.apply(this,C)}}function k(a,d){function p(){}p.prototype=d.prototype,a.aa=d.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(C,M,U){for(var V=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)V[Ae-2]=arguments[Ae];return d.prototype[M].apply(C,V)}}function N(a){const d=a.length;if(0<d){const p=Array(d);for(let C=0;C<d;C++)p[C]=a[C];return p}return[]}function T(a,d){for(let p=1;p<arguments.length;p++){const C=arguments[p];if(u(C)){const M=a.length||0,U=C.length||0;a.length=M+U;for(let V=0;V<U;V++)a[M+V]=C[V]}else a.push(C)}}class v{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function y(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function P(a){return P[" "](a),a}P[" "]=function(){};var F=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function B(a,d,p){for(const C in a)d.call(p,a[C],C,a)}function _(a,d){for(const p in a)d.call(void 0,a[p],p,a)}function E(a){const d={};for(const p in a)d[p]=a[p];return d}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,d){let p,C;for(let M=1;M<arguments.length;M++){C=arguments[M];for(p in C)a[p]=C[p];for(let U=0;U<I.length;U++)p=I[U],Object.prototype.hasOwnProperty.call(C,p)&&(a[p]=C[p])}}function b(a){var d=1;a=a.split(":");const p=[];for(;0<d&&a.length;)p.push(a.shift()),d--;return a.length&&p.push(a.join(":")),p}function D(a){l.setTimeout(()=>{throw a},0)}function R(){var a=Z;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Pe{constructor(){this.h=this.g=null}add(d,p){const C=Et.get();C.set(d,p),this.h?this.h.next=C:this.g=C,this.h=C}}var Et=new v(()=>new Xn,a=>a.reset());class Xn{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Jt,H=!1,Z=new Pe,re=()=>{const a=l.Promise.resolve(void 0);Jt=()=>{a.then(Se)}};var Se=()=>{for(var a;a=R();){try{a.h.call(a.g)}catch(p){D(p)}var d=Et;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}H=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var zt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,d),l.removeEventListener("test",p,d)}catch{}return a}();function et(a,d){if(Ne.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,C=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(F){e:{try{P(d.nodeName);var M=!0;break e}catch{}M=!1}M||(d=null)}}else p=="mouseover"?d=a.fromElement:p=="mouseout"&&(d=a.toElement);this.relatedTarget=d,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ct[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&et.aa.h.call(this)}}k(et,Ne);var Ct={2:"touch",3:"pen",4:"mouse"};et.prototype.h=function(){et.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var St="closure_listenable_"+(1e6*Math.random()|0),Ns=0;function bd(a,d,p,C,M){this.listener=a,this.proxy=null,this.src=d,this.type=p,this.capture=!!C,this.ha=M,this.key=++Ns,this.da=this.fa=!1}function Rs(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ps(a){this.src=a,this.g={},this.h=0}Ps.prototype.add=function(a,d,p,C,M){var U=a.toString();a=this.g[U],a||(a=this.g[U]=[],this.h++);var V=Jn(a,d,C,M);return-1<V?(d=a[V],p||(d.fa=!1)):(d=new bd(d,this.src,U,!!C,M),d.fa=p,a.push(d)),d};function ct(a,d){var p=d.type;if(p in a.g){var C=a.g[p],M=Array.prototype.indexOf.call(C,d,void 0),U;(U=0<=M)&&Array.prototype.splice.call(C,M,1),U&&(Rs(d),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Jn(a,d,p,C){for(var M=0;M<a.length;++M){var U=a[M];if(!U.da&&U.listener==d&&U.capture==!!p&&U.ha==C)return M}return-1}var As="closure_lm_"+(1e6*Math.random()|0),$o={};function Zn(a,d,p,C,M){if(Array.isArray(d)){for(var U=0;U<d.length;U++)Zn(a,d[U],p,C,M);return null}return p=Kr(p),a&&a[St]?a.K(d,p,c(C)?!!C.capture:!1,M):Dd(a,d,p,!1,C,M)}function Dd(a,d,p,C,M,U){if(!d)throw Error("Invalid event type");var V=c(M)?!!M.capture:!!M,Ae=Vo(a);if(Ae||(a[As]=Ae=new Ps(a)),p=Ae.add(d,p,C,V,U),p.proxy)return p;if(C=Ld(),p.proxy=C,C.src=a,C.listener=p,a.addEventListener)zt||(M=V),M===void 0&&(M=!1),a.addEventListener(d.toString(),C,M);else if(a.attachEvent)a.attachEvent(Hl(d.toString()),C);else if(a.addListener&&a.removeListener)a.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ld(){function a(p){return d.call(a.src,a.listener,p)}const d=Od;return a}function Ho(a,d,p,C,M){if(Array.isArray(d))for(var U=0;U<d.length;U++)Ho(a,d[U],p,C,M);else C=c(C)?!!C.capture:!!C,p=Kr(p),a&&a[St]?(a=a.i,d=String(d).toString(),d in a.g&&(U=a.g[d],p=Jn(U,p,C,M),-1<p&&(Rs(U[p]),Array.prototype.splice.call(U,p,1),U.length==0&&(delete a.g[d],a.h--)))):a&&(a=Vo(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Jn(d,p,C,M)),(p=-1<a?d[a]:null)&&Wo(p))}function Wo(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[St])ct(d.i,a);else{var p=a.type,C=a.proxy;d.removeEventListener?d.removeEventListener(p,C,a.capture):d.detachEvent?d.detachEvent(Hl(p),C):d.addListener&&d.removeListener&&d.removeListener(C),(p=Vo(d))?(ct(p,a),p.h==0&&(p.src=null,d[As]=null)):Rs(a)}}}function Hl(a){return a in $o?$o[a]:$o[a]="on"+a}function Od(a,d){if(a.da)a=!0;else{d=new et(d,this);var p=a.listener,C=a.ha||a.src;a.fa&&Wo(a),a=p.call(C,d)}return a}function Vo(a){return a=a[As],a instanceof Ps?a:null}var Ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kr(a){return typeof a=="function"?a:(a[Ln]||(a[Ln]=function(d){return a.handleEvent(d)}),a[Ln])}function dt(){de.call(this),this.i=new Ps(this),this.M=this,this.F=null}k(dt,de),dt.prototype[St]=!0,dt.prototype.removeEventListener=function(a,d,p,C){Ho(this,a,d,p,C)};function ht(a,d){var p,C=a.F;if(C)for(p=[];C;C=C.F)p.push(C);if(a=a.M,C=d.type||d,typeof d=="string")d=new Ne(d,a);else if(d instanceof Ne)d.target=d.target||a;else{var M=d;d=new Ne(C,a),x(d,M)}if(M=!0,p)for(var U=p.length-1;0<=U;U--){var V=d.g=p[U];M=cn(V,C,!0,d)&&M}if(V=d.g=a,M=cn(V,C,!0,d)&&M,M=cn(V,C,!1,d)&&M,p)for(U=0;U<p.length;U++)V=d.g=p[U],M=cn(V,C,!1,d)&&M}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var p=a.g[d],C=0;C<p.length;C++)Rs(p[C]);delete a.g[d],a.h--}}this.F=null},dt.prototype.K=function(a,d,p,C){return this.i.add(String(a),d,!1,p,C)},dt.prototype.L=function(a,d,p,C){return this.i.add(String(a),d,!0,p,C)};function cn(a,d,p,C){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var M=!0,U=0;U<d.length;++U){var V=d[U];if(V&&!V.da&&V.capture==p){var Ae=V.listener,Tt=V.ha||V.src;V.fa&&ct(a.i,V),M=Ae.call(Tt,C)!==!1&&M}}return M&&!C.defaultPrevented}function En(a,d,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Go(a){a.g=En(()=>{a.g=null,a.i&&(a.i=!1,Go(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class bs extends de{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Go(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(a){de.call(this),this.h=a,this.g={}}k(Hi,de);var On=[];function Ko(a){B(a.g,function(d,p){this.g.hasOwnProperty(p)&&Wo(d)},a),a.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),Ko(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=l.JSON.stringify,Wl=l.JSON.parse,Md=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ls(){}Ls.prototype.h=null;function Wi(a){return a.h||(a.h=a.i())}function Vl(){}var pr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vi(){Ne.call(this,"d")}k(Vi,Ne);function qo(){Ne.call(this,"c")}k(qo,Ne);var mr={},Gl=null;function Os(){return Gl=Gl||new dt}mr.La="serverreachability";function Gi(a){Ne.call(this,mr.La,a)}k(Gi,Ne);function er(a){const d=Os();ht(d,new Gi(d))}mr.STAT_EVENT="statevent";function Kl(a,d){Ne.call(this,mr.STAT_EVENT,a),this.stat=d}k(Kl,Ne);function kt(a){const d=Os();ht(d,new Kl(d,a))}mr.Ma="timingevent";function A(a,d){Ne.call(this,mr.Ma,a),this.size=d}k(A,Ne);function O(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function j(){this.g=!0}j.prototype.xa=function(){this.g=!1};function z(a,d,p,C,M,U){a.info(function(){if(a.g)if(U)for(var V="",Ae=U.split("&"),Tt=0;Tt<Ae.length;Tt++){var ve=Ae[Tt].split("=");if(1<ve.length){var Dt=ve[0];ve=ve[1];var Lt=Dt.split("_");V=2<=Lt.length&&Lt[1]=="type"?V+(Dt+"="+ve+"&"):V+(Dt+"=redacted&")}}else V=null;else V=U;return"XMLHTTP REQ ("+C+") [attempt "+M+"]: "+d+`
`+p+`
`+V})}function G(a,d,p,C,M,U,V){a.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+M+"]: "+d+`
`+p+`
`+U+" "+V})}function X(a,d,p,C){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Y(a,p)+(C?" "+C:"")})}function te(a,d){a.info(function(){return"TIMEOUT: "+d})}j.prototype.info=function(){};function Y(a,d){if(!a.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var C=p[a];if(!(2>C.length)){var M=C[1];if(Array.isArray(M)&&!(1>M.length)){var U=M[0];if(U!="noop"&&U!="stop"&&U!="close")for(var V=1;V<M.length;V++)M[V]=""}}}}return Ds(p)}catch{return d}}var Q={NO_ERROR:0,TIMEOUT:8},K={},J;function ie(){}k(ie,Ls),ie.prototype.g=function(){return new XMLHttpRequest},ie.prototype.i=function(){return{}},J=new ie;function ae(a,d,p,C){this.j=a,this.i=d,this.l=p,this.R=C||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new st}function st(){this.i=null,this.g="",this.h=!1}var ke={},pe={};function De(a,d,p){a.L=1,a.v=Xl(yr(d)),a.m=p,a.P=!0,gr(a,null)}function gr(a,d){a.F=Date.now(),$t(a),a.A=yr(a.v);var p=a.A,C=a.R;Array.isArray(C)||(C=[String(C)]),dg(p.i,"t",C),a.C=0,p=a.j.J,a.h=new st,a.g=Rg(a.j,p?d:null,!a.m),0<a.O&&(a.M=new bs(g(a.Y,a,a.g),a.O)),d=a.U,p=a.g,C=a.ca;var M="readystatechange";Array.isArray(M)||(M&&(On[0]=M.toString()),M=On);for(var U=0;U<M.length;U++){var V=Zn(p,M[U],C||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=a.H?E(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),er(),z(a.i,a.u,a.A,a.l,a.R,a.m)}ae.prototype.ca=function(a){a=a.target;const d=this.M;d&&wr(a)==3?d.j():this.Y(a)},ae.prototype.Y=function(a){try{if(a==this.g)e:{const Lt=wr(this.g);var d=this.g.Ba();const Us=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||vg(this.g)))){this.J||Lt!=4||d==7||(d==8||0>=Us?er(3):er(2)),_r(this);var p=this.g.Z();this.X=p;t:if(qr(this)){var C=vg(this.g);a="";var M=C.length,U=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),dn(this);var V="";break t}this.h.i=new l.TextDecoder}for(d=0;d<M;d++)this.h.h=!0,a+=this.h.i.decode(C[d],{stream:!(U&&d==M-1)});C.length=0,this.h.g+=a,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=p==200,G(this.i,this.u,this.A,this.l,this.R,Lt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,Tt=this.g;if((Ae=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ae)){var ve=Ae;break t}}ve=null}if(p=ve)X(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yr(this,p);else{this.o=!1,this.s=3,kt(12),Cn(this),dn(this);break e}}if(this.P){p=!0;let jn;for(;!this.J&&this.C<V.length;)if(jn=Mn(this,V),jn==pe){Lt==4&&(this.s=4,kt(14),p=!1),X(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==ke){this.s=4,kt(15),X(this.i,this.l,V,"[Invalid Chunk]"),p=!1;break}else X(this.i,this.l,jn,null),Yr(this,jn);if(qr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||V.length!=0||this.h.h||(this.s=1,kt(16),p=!1),this.o=this.o&&p,!p)X(this.i,this.l,V,"[Invalid Chunked Response]"),Cn(this),dn(this);else if(0<V.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Bd(Dt),Dt.M=!0,kt(11))}}else X(this.i,this.l,V,null),Yr(this,V);Lt==4&&Cn(this),this.o&&!this.J&&(Lt==4?Tg(this.j,this):(this.o=!1,$t(this)))}else dS(this.g),p==400&&0<V.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Cn(this),dn(this)}}}catch{}finally{}};function qr(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Mn(a,d){var p=a.C,C=d.indexOf(`
`,p);return C==-1?pe:(p=Number(d.substring(p,C)),isNaN(p)?ke:(C+=1,C+p>d.length?pe:(d=d.slice(C,C+p),a.C=C+p,d)))}ae.prototype.cancel=function(){this.J=!0,Cn(this)};function $t(a){a.S=Date.now()+a.I,Ms(a,a.I)}function Ms(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=O(g(a.ba,a),d)}function _r(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ae.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(te(this.i,this.A),this.L!=2&&(er(),kt(17)),Cn(this),this.s=2,dn(this)):Ms(this,this.S-a)};function dn(a){a.j.G==0||a.J||Tg(a.j,a)}function Cn(a){_r(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ko(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Yr(a,d){try{var p=a.j;if(p.G!=0&&(p.g==a||ze(p.h,a))){if(!a.K&&ze(p.h,a)&&p.G==3){try{var C=p.Da.g.parse(d)}catch{C=null}if(Array.isArray(C)&&C.length==3){var M=C;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)ru(p),tu(p);else break e;Ud(p),kt(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=O(g(p.Za,p),6e3));if(1>=Qr(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else qi(p,11)}else if((a.K||p.g==a)&&ru(p),!y(d))for(M=p.Da.g.parse(d),d=0;d<M.length;d++){let ve=M[d];if(p.T=ve[0],ve=ve[1],p.G==2)if(ve[0]=="c"){p.K=ve[1],p.ia=ve[2];const Dt=ve[3];Dt!=null&&(p.la=Dt,p.j.info("VER="+p.la));const Lt=ve[4];Lt!=null&&(p.Aa=Lt,p.j.info("SVER="+p.Aa));const Us=ve[5];Us!=null&&typeof Us=="number"&&0<Us&&(C=1.5*Us,p.L=C,p.j.info("backChannelRequestTimeoutMs_="+C)),C=p;const jn=a.g;if(jn){const iu=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var U=C.h;U.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(tr(U,U.h),U.h=null))}if(C.D){const zd=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;zd&&(C.ya=zd,Fe(C.I,C.D,zd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),C=p;var V=a;if(C.qa=Ng(C,C.J?C.ia:null,C.W),V.K){Yo(C.h,V);var Ae=V,Tt=C.L;Tt&&(Ae.I=Tt),Ae.B&&(_r(Ae),$t(Ae)),C.g=V}else Sg(C);0<p.i.length&&nu(p)}else ve[0]!="stop"&&ve[0]!="close"||qi(p,7);else p.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?qi(p,7):Fd(p):ve[0]!="noop"&&p.l&&p.l.ta(ve),p.v=0)}}er(4)}catch{}}var me=class{constructor(a,d){this.g=a,this.map=d}};function je(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vr(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Qr(a){return a.h?1:a.g?a.g.size:0}function ze(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function tr(a,d){a.g?a.g.add(d):a.h=d}function Yo(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}je.prototype.cancel=function(){if(this.i=ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ql(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const p of a.g.values())d=d.concat(p.D);return d}return N(a.i)}function QC(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],p=a.length,C=0;C<p;C++)d.push(a[C]);return d}d=[],p=0;for(C in a)d[p++]=a[C];return d}function XC(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var p=0;p<a;p++)d.push(p);return d}d=[],p=0;for(const C in a)d[p++]=C;return d}}}function sg(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var p=XC(a),C=QC(a),M=C.length,U=0;U<M;U++)d.call(void 0,C[U],p&&p[U],a)}var og=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JC(a,d){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var C=a[p].indexOf("="),M=null;if(0<=C){var U=a[p].substring(0,C);M=a[p].substring(C+1)}else U=a[p];d(U,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Ki(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ki){this.h=a.h,Yl(this,a.j),this.o=a.o,this.g=a.g,Ql(this,a.s),this.l=a.l;var d=a.i,p=new Jo;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),ag(this,p),this.m=a.m}else a&&(d=String(a).match(og))?(this.h=!1,Yl(this,d[1]||"",!0),this.o=Qo(d[2]||""),this.g=Qo(d[3]||"",!0),Ql(this,d[4]),this.l=Qo(d[5]||"",!0),ag(this,d[6]||"",!0),this.m=Qo(d[7]||"")):(this.h=!1,this.i=new Jo(null,this.h))}Ki.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Xo(d,lg,!0),":");var p=this.g;return(p||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Xo(d,lg,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Xo(p,p.charAt(0)=="/"?tS:eS,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Xo(p,rS)),a.join("")};function yr(a){return new Ki(a)}function Yl(a,d,p){a.j=p?Qo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Ql(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function ag(a,d,p){d instanceof Jo?(a.i=d,iS(a.i,a.h)):(p||(d=Xo(d,nS)),a.i=new Jo(d,a.h))}function Fe(a,d,p){a.i.set(d,p)}function Xl(a){return Fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Qo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Xo(a,d,p){return typeof a=="string"?(a=encodeURI(a).replace(d,ZC),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ZC(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var lg=/[#\/\?@]/g,eS=/[#\?:]/g,tS=/[#\?]/g,nS=/[#\?@]/g,rS=/#/g;function Jo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Xr(a){a.g||(a.g=new Map,a.h=0,a.i&&JC(a.i,function(d,p){a.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=Jo.prototype,t.add=function(a,d){Xr(this),this.i=null,a=js(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(d),this.h+=1,this};function ug(a,d){Xr(a),d=js(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function cg(a,d){return Xr(a),d=js(a,d),a.g.has(d)}t.forEach=function(a,d){Xr(this),this.g.forEach(function(p,C){p.forEach(function(M){a.call(d,M,C,this)},this)},this)},t.na=function(){Xr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let C=0;C<d.length;C++){const M=a[C];for(let U=0;U<M.length;U++)p.push(d[C])}return p},t.V=function(a){Xr(this);let d=[];if(typeof a=="string")cg(this,a)&&(d=d.concat(this.g.get(js(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)d=d.concat(a[p])}return d},t.set=function(a,d){return Xr(this),this.i=null,a=js(this,a),cg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function dg(a,d,p){ug(a,d),0<p.length&&(a.i=null,a.g.set(js(a,d),N(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var C=d[p];const U=encodeURIComponent(String(C)),V=this.V(C);for(C=0;C<V.length;C++){var M=U;V[C]!==""&&(M+="="+encodeURIComponent(String(V[C]))),a.push(M)}}return this.i=a.join("&")};function js(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function iS(a,d){d&&!a.j&&(Xr(a),a.i=null,a.g.forEach(function(p,C){var M=C.toLowerCase();C!=M&&(ug(this,C),dg(this,M,p))},a)),a.j=d}function sS(a,d){const p=new j;if(l.Image){const C=new Image;C.onload=w(Jr,p,"TestLoadImage: loaded",!0,d,C),C.onerror=w(Jr,p,"TestLoadImage: error",!1,d,C),C.onabort=w(Jr,p,"TestLoadImage: abort",!1,d,C),C.ontimeout=w(Jr,p,"TestLoadImage: timeout",!1,d,C),l.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=a}else d(!1)}function oS(a,d){const p=new j,C=new AbortController,M=setTimeout(()=>{C.abort(),Jr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:C.signal}).then(U=>{clearTimeout(M),U.ok?Jr(p,"TestPingServer: ok",!0,d):Jr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),Jr(p,"TestPingServer: error",!1,d)})}function Jr(a,d,p,C,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),C(p)}catch{}}function aS(){this.g=new Md}function lS(a,d,p){const C=p||"";try{sg(a,function(M,U){let V=M;c(M)&&(V=Ds(M)),d.push(C+U+"="+encodeURIComponent(V))})}catch(M){throw d.push(C+"type="+encodeURIComponent("_badmap")),M}}function Jl(a){this.l=a.Ub||null,this.j=a.eb||!1}k(Jl,Ls),Jl.prototype.g=function(){return new Zl(this.l,this.j)},Jl.prototype.i=function(a){return function(){return a}}({});function Zl(a,d){dt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Zl,dt),t=Zl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,ea(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function hg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Zo(this):ea(this),this.readyState==3&&hg(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Zo(this))},t.Qa=function(a){this.g&&(this.response=a,Zo(this))},t.ga=function(){this.g&&Zo(this)};function Zo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ea(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=d.next();return a.join(`\r
`)};function ea(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Zl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function fg(a){let d="";return B(a,function(p,C){d+=C,d+=":",d+=p,d+=`\r
`}),d}function jd(a,d,p){e:{for(C in p){var C=!1;break e}C=!0}C||(p=fg(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Fe(a,d,p))}function tt(a){dt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(tt,dt);var uS=/^https?$/i,cS=["POST","PUT"];t=tt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,p,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():J.g(),this.v=this.o?Wi(this.o):Wi(J),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(U){pg(this,U);return}if(a=p||"",p=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var M in C)p.set(M,C[M]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const U of C.keys())p.set(U,C.get(U));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(p.keys()).find(U=>U.toLowerCase()=="content-type"),M=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(cS,d,void 0))||C||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,V]of p)this.g.setRequestHeader(U,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_g(this),this.u=!0,this.g.send(a),this.u=!1}catch(U){pg(this,U)}};function pg(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,mg(a),eu(a)}function mg(a){a.A||(a.A=!0,ht(a,"complete"),ht(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ht(this,"complete"),ht(this,"abort"),eu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eu(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gg(this):this.bb())},t.bb=function(){gg(this)};function gg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||wr(a)!=4||a.Z()!=2)){if(a.u&&wr(a)==4)En(a.Ea,0,a);else if(ht(a,"readystatechange"),wr(a)==4){a.h=!1;try{const V=a.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var C;if(C=V===0){var M=String(a.D).match(og)[1]||null;!M&&l.self&&l.self.location&&(M=l.self.location.protocol.slice(0,-1)),C=!uS.test(M?M.toLowerCase():"")}p=C}if(p)ht(a,"complete"),ht(a,"success");else{a.m=6;try{var U=2<wr(a)?a.g.statusText:""}catch{U=""}a.l=U+" ["+a.Z()+"]",mg(a)}}finally{eu(a)}}}}function eu(a,d){if(a.g){_g(a);const p=a.g,C=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ht(a,"ready");try{p.onreadystatechange=C}catch{}}}function _g(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function wr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Wl(d)}};function vg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function dS(a){const d={};a=(a.g&&2<=wr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<a.length;C++){if(y(a[C]))continue;var p=b(a[C]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const U=d[M]||[];d[M]=U,U.push(p)}_(d,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(a,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||d}function yg(a){this.Aa=0,this.i=[],this.j=new j,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ta("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ta("baseRetryDelayMs",5e3,a),this.cb=ta("retryDelaySeedMs",1e4,a),this.Wa=ta("forwardChannelMaxRetries",2,a),this.wa=ta("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new je(a&&a.concurrentRequestLimit),this.Da=new aS,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=yg.prototype,t.la=8,t.G=1,t.connect=function(a,d,p,C){kt(0),this.W=a,this.H=d||{},p&&C!==void 0&&(this.H.OSID=p,this.H.OAID=C),this.F=this.X,this.I=Ng(this,null,this.W),nu(this)};function Fd(a){if(wg(a),a.G==3){var d=a.U++,p=yr(a.I);if(Fe(p,"SID",a.K),Fe(p,"RID",d),Fe(p,"TYPE","terminate"),na(a,p),d=new ae(a,a.j,d),d.L=2,d.v=Xl(yr(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=d.v,p=!0),p||(d.g=Rg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),$t(d)}xg(a)}function tu(a){a.g&&(Bd(a),a.g.cancel(),a.g=null)}function wg(a){tu(a),a.u&&(l.clearTimeout(a.u),a.u=null),ru(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function nu(a){if(!vr(a.h)&&!a.s){a.s=!0;var d=a.Ga;Jt||re(),H||(Jt(),H=!0),Z.add(d,a),a.B=0}}function hS(a,d){return Qr(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=O(g(a.Ga,a,d),Ig(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const M=new ae(this,this.j,a);let U=this.o;if(this.S&&(U?(U=E(U),x(U,this.S)):U=this.S),this.m!==null||this.O||(M.H=U,U=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var C=this.i[p];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(d+=C,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Cg(this,M,d),p=yr(this.I),Fe(p,"RID",a),Fe(p,"CVER",22),this.D&&Fe(p,"X-HTTP-Session-Id",this.D),na(this,p),U&&(this.O?d="headers="+encodeURIComponent(String(fg(U)))+"&"+d:this.m&&jd(p,this.m,U)),tr(this.h,M),this.Ua&&Fe(p,"TYPE","init"),this.P?(Fe(p,"$req",d),Fe(p,"SID","null"),M.T=!0,De(M,p,null)):De(M,p,d),this.G=2}}else this.G==3&&(a?Eg(this,a):this.i.length==0||vr(this.h)||Eg(this))};function Eg(a,d){var p;d?p=d.l:p=a.U++;const C=yr(a.I);Fe(C,"SID",a.K),Fe(C,"RID",p),Fe(C,"AID",a.T),na(a,C),a.m&&a.o&&jd(C,a.m,a.o),p=new ae(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Cg(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),tr(a.h,p),De(p,C,d)}function na(a,d){a.H&&B(a.H,function(p,C){Fe(d,C,p)}),a.l&&sg({},function(p,C){Fe(d,C,p)})}function Cg(a,d,p){p=Math.min(a.i.length,p);var C=a.l?g(a.l.Na,a.l,a):null;e:{var M=a.i;let U=-1;for(;;){const V=["count="+p];U==-1?0<p?(U=M[0].g,V.push("ofs="+U)):U=0:V.push("ofs="+U);let Ae=!0;for(let Tt=0;Tt<p;Tt++){let ve=M[Tt].g;const Dt=M[Tt].map;if(ve-=U,0>ve)U=Math.max(0,M[Tt].g-100),Ae=!1;else try{lS(Dt,V,"req"+ve+"_")}catch{C&&C(Dt)}}if(Ae){C=V.join("&");break e}}}return a=a.i.splice(0,p),d.D=a,C}function Sg(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Jt||re(),H||(Jt(),H=!0),Z.add(d,a),a.v=0}}function Ud(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=O(g(a.Fa,a),Ig(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,kg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=O(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),tu(this),kg(this))};function Bd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function kg(a){a.g=new ae(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=yr(a.qa);Fe(d,"RID","rpc"),Fe(d,"SID",a.K),Fe(d,"AID",a.T),Fe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Fe(d,"TO",a.ja),Fe(d,"TYPE","xmlhttp"),na(a,d),a.m&&a.o&&jd(d,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Xl(yr(d)),p.m=null,p.P=!0,gr(p,a)}t.Za=function(){this.C!=null&&(this.C=null,tu(this),Ud(this),kt(19))};function ru(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Tg(a,d){var p=null;if(a.g==d){ru(a),Bd(a),a.g=null;var C=2}else if(ze(a.h,d))p=d.D,Yo(a.h,d),C=1;else return;if(a.G!=0){if(d.o)if(C==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var M=a.B;C=Os(),ht(C,new A(C,p)),nu(a)}else Sg(a);else if(M=d.s,M==3||M==0&&0<d.X||!(C==1&&hS(a,d)||C==2&&Ud(a)))switch(p&&0<p.length&&(d=a.h,d.i=d.i.concat(p)),M){case 1:qi(a,5);break;case 4:qi(a,10);break;case 3:qi(a,6);break;default:qi(a,2)}}}function Ig(a,d){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*d}function qi(a,d){if(a.j.info("Error code "+d),d==2){var p=g(a.fb,a),C=a.Xa;const M=!C;C=new Ki(C||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Yl(C,"https"),Xl(C),M?sS(C.toString(),p):oS(C.toString(),p)}else kt(2);a.G=0,a.l&&a.l.sa(d),xg(a),wg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function xg(a){if(a.G=0,a.ka=[],a.l){const d=ql(a.h);(d.length!=0||a.i.length!=0)&&(T(a.ka,d),T(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Ng(a,d,p){var C=p instanceof Ki?yr(p):new Ki(p);if(C.g!="")d&&(C.g=d+"."+C.g),Ql(C,C.s);else{var M=l.location;C=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;var U=new Ki(null);C&&Yl(U,C),d&&(U.g=d),M&&Ql(U,M),p&&(U.l=p),C=U}return p=a.D,d=a.ya,p&&d&&Fe(C,p,d),Fe(C,"VER",a.la),na(a,C),C}function Rg(a,d,p){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new tt(new Jl({eb:p})):new tt(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pg(){}t=Pg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sn(a,d){dt.call(this),this.g=new yg(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!y(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!y(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Fs(this)}k(Sn,dt),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){Fd(this.g)},Sn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Ds(a),a=p);d.i.push(new me(d.Ya++,a)),d.G==3&&nu(d)},Sn.prototype.N=function(){this.g.l=null,delete this.j,Fd(this.g),delete this.g,Sn.aa.N.call(this)};function Ag(a){Vi.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const p in d){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}k(Ag,Vi);function bg(){qo.call(this),this.status=1}k(bg,qo);function Fs(a){this.g=a}k(Fs,Pg),Fs.prototype.ua=function(){ht(this.g,"a")},Fs.prototype.ta=function(a){ht(this.g,new Ag(a))},Fs.prototype.sa=function(a){ht(this.g,new bg)},Fs.prototype.ra=function(){ht(this.g,"b")},Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,Q.NO_ERROR=0,Q.TIMEOUT=8,Q.HTTP_ERROR=6,K.COMPLETE="complete",Vl.EventType=pr,pr.OPEN="a",pr.CLOSE="b",pr.ERROR="c",pr.MESSAGE="d",dt.prototype.listen=dt.prototype.K,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha}).apply(typeof ku<"u"?ku:typeof self<"u"?self:typeof window<"u"?window:{});const Hv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new pd("@firebase/firestore");function Wn(t,...e){if(ko.logLevel<=Ce.DEBUG){const n=e.map(gm);ko.debug(`Firestore (${Ml}): ${t}`,...n)}}function h1(t,...e){if(ko.logLevel<=Ce.ERROR){const n=e.map(gm);ko.error(`Firestore (${Ml}): ${t}`,...n)}}function f2(t,...e){if(ko.logLevel<=Ce.WARN){const n=e.map(gm);ko.warn(`Firestore (${Ml}): ${t}`,...n)}}function gm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t="Unexpected state"){const e=`FIRESTORE (${Ml}) INTERNAL ASSERTION FAILED: `+t;throw h1(e),new Error(e)}function Ma(t,e){t||_m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class rn extends hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class m2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class g2{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ma(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new ja;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ja,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{Wn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Wn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ja)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Wn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ma(typeof r.accessToken=="string"),new f1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ma(e===null||typeof e=="string"),new Vt(e)}}class _2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class v2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ma(this.o===void 0);const r=s=>{s.error!=null&&Wn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Wn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Wn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Wn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ma(typeof n.token=="string"),this.R=n.token,new y2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function E2(t){return t.name==="IndexedDbTransactionError"}class Dc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Dc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Dc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wv,ge;(ge=Wv||(Wv={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new d1([4294967295,4294967295],0);function kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Wn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ja,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new vm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rn(nn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Vv,Gv;(Gv=Vv||(Vv={})).ea="default",Gv.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=new Map;function k2(t,e,n,r){if(e===!0&&r===!0)throw new rn(nn.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function T2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_m()}function I2(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new rn(nn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=T2(t);throw new rn(nn.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new rn(nn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new rn(nn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new rn(nn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new rn(nn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new rn(nn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class p1{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rn(nn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new rn(nn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new p2;switch(r.type){case"firstParty":return new v2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new rn(nn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Kv.get(n);r&&(Wn("ComponentProvider","Removing Datastore"),Kv.delete(n),r.terminate())}(this),Promise.resolve()}}function x2(t,e,n,r={}){var i;const s=(t=I2(t,p1))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&f2("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Vt.MOCK_USER;else{l=im(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new rn(nn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Vt(c)}t._authCredentials=new m2(new f1(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new C2(this,"async_queue_retry"),this.Vu=()=>{const r=kh();r&&Wn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=kh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=kh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ja;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!E2(e))throw e;Wn("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw h1("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=vm.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&_m()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class N2 extends p1{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Yv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yv(e),this._firestoreClient=void 0,await e}}}function R2(t,e){const n=typeof t=="object"?t:md(),r=typeof t=="string"?t:"(default)",i=Al(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=rm("firestore");s&&x2(i,...s)}return i}(function(e,n=!0){(function(i){Ml=i})(zi),Ai(new Ur("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new N2(new g2(r.getProvider("auth-internal")),new w2(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new rn(nn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dc(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Rn(Hv,"4.7.3",e),Rn(Hv,"4.7.3","esm2017")})();var Qv={};const Xv="@firebase/database",Jv="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m1="";function P2(t){m1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:cl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return fr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new A2(e)}}catch{}return new b2},ss=g1("localStorage"),D2=g1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new pd("@firebase/database"),L2=function(){let t=1;return function(){return t++}}(),_1=function(t){const e=Wx(t),n=new Bx;n.update(e);const r=n.digest();return tm.encodeByteArray(r)},jl=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=jl.apply(null,r):typeof r=="object"?e+=mt(r):e+=r,e+=" "}return e};let Fa=null,Zv=!0;const O2=function(t,e){W(!0,"Can't turn on custom loggers persistently."),po.logLevel=Ce.VERBOSE,Fa=po.log.bind(po)},Nt=function(...t){if(Zv===!0&&(Zv=!1,Fa===null&&D2.get("logging_enabled")===!0&&O2()),Fa){const e=jl.apply(null,t);Fa(e)}},Fl=function(t){return function(...e){Nt(t,...e)}},zf=function(...t){const e="FIREBASE INTERNAL ERROR: "+jl(...t);po.error(e)},$r=function(...t){const e=`FIREBASE FATAL ERROR: ${jl(...t)}`;throw po.error(e),new Error(e)},qt=function(...t){const e="FIREBASE WARNING: "+jl(...t);po.warn(e)},M2=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&qt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ym=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},j2=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ys="[MIN_NAME]",bi="[MAX_NAME]",Is=function(t,e){if(t===e)return 0;if(t===ys||e===bi)return-1;if(e===ys||t===bi)return 1;{const n=ey(t),r=ey(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},F2=function(t,e){return t===e?0:t<e?-1:1},pa=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+mt(e))},wm=function(t){if(typeof t!="object"||t===null)return mt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=mt(e[r]),n+=":",n+=wm(t[e[r]]);return n+="}",n},v1=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function bt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const y1=function(t){W(!ym(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(u=n;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const f=c.join("");let h="";for(u=0;u<64;u+=8){let g=parseInt(f.substr(u,8),2).toString(16);g.length===1&&(g="0"+g),h=h+g}return h.toLowerCase()},U2=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},B2=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function z2(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const $2=new RegExp("^-?(0*)\\d{1,10}$"),H2=-2147483648,W2=2147483647,ey=function(t){if($2.test(t)){const e=Number(t);if(e>=H2&&e<=W2)return e}return null},Uo=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw qt("Exception was thrown by user callback.",n),e},Math.floor(0))}},V2=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ua=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){qt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Nt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qt(e)}}class qu{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}qu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="5",w1="v",E1="s",C1="r",S1="f",k1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,T1="ls",I1="p",$f="ac",x1="websocket",N1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,r,i,s=!1,o="",l=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ss.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ss.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function q2(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function P1(t,e,n){W(typeof e=="string","typeof type must == string"),W(typeof n=="object","typeof params must == object");let r;if(e===x1)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===N1)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);q2(t)&&(n.ns=t.namespace);const i=[];return bt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.counters_={}}incrementCounter(e,n=1){fr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Sx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th={},Ih={};function Cm(t){const e=t.toString();return Th[e]||(Th[e]=new Y2),Th[e]}function Q2(t,e){const n=t.toString();return Ih[n]||(Ih[n]=e()),Ih[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Uo(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="start",J2="close",Z2="pLPCommand",eA="pRTLPCB",A1="id",b1="pw",D1="ser",tA="cb",nA="seg",rA="ts",iA="d",sA="dframe",L1=1870,O1=30,oA=L1-O1,aA=25e3,lA=3e4;class ro{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fl(e),this.stats_=Cm(n),this.urlFn=u=>(this.appCheckToken&&(u[$f]=this.appCheckToken),P1(n,N1,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new X2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lA)),j2(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Sm((...s)=>{const[o,l,u,c,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===ty)this.id=l,this.password=u;else if(o===J2)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[ty]="t",r[D1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[tA]=this.scriptTagHolder.uniqueCallbackIdentifier),r[w1]=Em,this.transportSessionId&&(r[E1]=this.transportSessionId),this.lastSessionId&&(r[T1]=this.lastSessionId),this.applicationId&&(r[I1]=this.applicationId),this.appCheckToken&&(r[$f]=this.appCheckToken),typeof location<"u"&&location.hostname&&k1.test(location.hostname)&&(r[C1]=S1);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ro.forceAllow_=!0}static forceDisallow(){ro.forceDisallow_=!0}static isAvailable(){return ro.forceAllow_?!0:!ro.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!U2()&&!B2()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=yE(n),i=v1(r,oA);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[sA]="t",r[A1]=e,r[b1]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Sm{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=L2(),window[Z2+this.uniqueCallbackIdentifier]=e,window[eA+this.uniqueCallbackIdentifier]=n,this.myIFrame=Sm.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Nt("frame writing exception"),l.stack&&Nt(l.stack),Nt(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Nt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[A1]=this.myID,e[b1]=this.myPW,e[D1]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+O1+r.length<=L1;){const o=this.pendingSegs.shift();r=r+"&"+nA+i+"="+o.seg+"&"+rA+i+"="+o.ts+"&"+iA+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(aA)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Nt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=16384,cA=45e3;let Lc=null;typeof MozWebSocket<"u"?Lc=MozWebSocket:typeof WebSocket<"u"&&(Lc=WebSocket);class Hn{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fl(this.connId),this.stats_=Cm(n),this.connURL=Hn.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[w1]=Em,typeof location<"u"&&location.hostname&&k1.test(location.hostname)&&(o[C1]=S1),n&&(o[E1]=n),r&&(o[T1]=r),i&&(o[$f]=i),s&&(o[I1]=s),P1(e,x1,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ss.set("previous_websocket_failure",!0);try{let r;bx(),this.mySock=new Lc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Hn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Lc!==null&&!Hn.forceDisallow_}static previouslyFailed(){return ss.isInMemoryStorage||ss.get("previous_websocket_failure")===!0}markConnectionHealthy(){ss.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=cl(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(W(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=v1(n,uA);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(cA))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Hn.responsesRequiredToBeHealthy=2;Hn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ro,Hn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Hn&&Hn.isAvailable();let r=n&&!Hn.previouslyFailed();if(e.webSocketOnly&&(n||qt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Hn];else{const i=this.transports_=[];for(const s of fl.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);fl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}fl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=6e4,hA=5e3,fA=10*1024,pA=100*1024,xh="t",ny="d",mA="s",ry="r",gA="e",iy="o",sy="a",oy="n",ay="p",_A="h";class vA{constructor(e,n,r,i,s,o,l,u,c,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fl("c:"+this.id+":"),this.transportManager_=new fl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ua(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>pA?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fA?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(xh in e){const n=e[xh];n===sy?this.upgradeIfSecondaryHealthy_():n===ry?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===iy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=pa("t",e),r=pa("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ay,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:sy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:oy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=pa("t",e),r=pa("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=pa(xh,e);if(ny in e){const r=e[ny];if(n===_A){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===oy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===mA?this.onConnectionShutdown_(r):n===ry?this.onReset_(r):n===gA?zf("Server Error: "+r):n===iy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Em!==r&&qt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ua(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(dA))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ua(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(hA))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ay,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ss.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.allowedEvents_=e,this.listeners_={},W(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){W(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends j1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Oc}getInitialEvent(e){return W(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=32,uy=768;class xe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ye(){return new xe("")}function le(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Di(t){return t.pieces_.length-t.pieceNum_}function Oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new xe(t.pieces_,e)}function km(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yA(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function pl(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function F1(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new xe(e,0)}function Qe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof xe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new xe(n,0)}function ue(t){return t.pieceNum_>=t.pieces_.length}function Gt(t,e){const n=le(t),r=le(e);if(n===null)return e;if(n===r)return Gt(Oe(t),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wA(t,e){const n=pl(t,0),r=pl(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Is(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Tm(t,e){if(Di(t)!==Di(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function xn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Di(t)>Di(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class EA{constructor(e,n){this.errorPrefix_=n,this.parts_=pl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=fd(this.parts_[r]);U1(this)}}function CA(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=fd(e),U1(t)}function SA(t){const e=t.parts_.pop();t.byteLength_-=fd(e),t.parts_.length>0&&(t.byteLength_-=1)}function U1(t){if(t.byteLength_>uy)throw new Error(t.errorPrefix_+"has a key path longer than "+uy+" bytes ("+t.byteLength_+").");if(t.parts_.length>ly)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ly+") or object contains a cycle "+Ji(t))}function Ji(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends j1{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Im}getInitialEvent(e){return W(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=1e3,kA=60*5*1e3,cy=30*1e3,TA=1.3,IA=3e4,xA="server_kill",dy=3;class Dr extends M1{constructor(e,n,r,i,s,o,l,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=Dr.nextPersistentConnectionId_++,this.log_=Fl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ma,this.maxReconnectDelay_=kA,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Im.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Oc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(mt(s)),W(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Rl,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),W(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const u=l.d,c=l.s;Dr.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&fr(e,"w")){const r=Co(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();qt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Ux(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=cy)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Fx(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+mt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):zf("Unrecognized action received from server: "+mt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){W(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ma,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ma,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>IA&&(this.reconnectDelay_=ma),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*TA)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Dr.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const u=function(){l?l.close():(o=!0,r())},c=function(h){W(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:u,sendRequest:c};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,g]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?Nt("getToken() completed but was canceled"):(Nt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=g&&g.token,l=new vA(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,w=>{qt(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(xA)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&qt(h),u())}}}interrupt(e){Nt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Nt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Af(this.interruptReasons_)&&(this.reconnectDelay_=ma,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>wm(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new xe(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Nt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=dy&&(this.reconnectDelay_=cy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Nt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=dy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+m1.replace(/\./g,"-")]=1,sm()?e["framework.cordova"]=1:kE()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Oc.getInstance().currentlyOnline();return Af(this.interruptReasons_)&&e}}Dr.nextPersistentConnectionId_=0;Dr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ce(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ce(ys,e),i=new ce(ys,n);return this.compare(r,i)!==0}minPost(){return ce.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu;class B1 extends yd{static get __EMPTY_NODE(){return Tu}static set __EMPTY_NODE(e){Tu=e}compare(e,n){return Is(e.name,n.name)}isDefinedOn(e){throw Mo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ce.MIN}maxPost(){return new ce(bi,Tu)}makePost(e,n){return W(typeof e=="string","KeyIndex indexValue must always be a string."),new ce(e,Tu)}toString(){return".key"}}const ls=new B1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class yt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??yt.RED,this.left=i??on.EMPTY_NODE,this.right=s??on.EMPTY_NODE}copy(e,n,r,i,s){return new yt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return on.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return on.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}yt.RED=!0;yt.BLACK=!1;class NA{copy(e,n,r,i,s){return this}insert(e,n,r){return new yt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class on{constructor(e,n=on.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new on(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,yt.BLACK,null,null))}remove(e){return new on(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Iu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Iu(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Iu(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Iu(this.root_,null,this.comparator_,!0,e)}}on.EMPTY_NODE=new NA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t,e){return Is(t.name,e.name)}function xm(t,e){return Is(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hf;function PA(t){Hf=t}const z1=function(t){return typeof t=="number"?"number:"+y1(t):"string:"+t},$1=function(t){if(t.isLeafNode()){const e=t.val();W(typeof e=="string"||typeof e=="number"||typeof e=="object"&&fr(e,".sv"),"Priority must be a string or number.")}else W(t===Hf||t.isEmpty(),"priority of unexpected type.");W(t===Hf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hy;class _t{constructor(e,n=_t.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,W(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$1(this.priorityNode_)}static set __childrenNodeConstructor(e){hy=e}static get __childrenNodeConstructor(){return hy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new _t(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:_t.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ue(e)?this:le(e)===".priority"?this.priorityNode_:_t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:_t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=le(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(W(r!==".priority"||Di(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,_t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+z1(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=y1(this.value_):e+=this.value_,this.lazyHash_=_1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===_t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof _t.__childrenNodeConstructor?-1:(W(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=_t.VALUE_TYPE_ORDER.indexOf(n),s=_t.VALUE_TYPE_ORDER.indexOf(r);return W(i>=0,"Unknown leaf type: "+n),W(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}_t.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H1,W1;function AA(t){H1=t}function bA(t){W1=t}class DA extends yd{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Is(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ce.MIN}maxPost(){return new ce(bi,new _t("[PRIORITY-POST]",W1))}makePost(e,n){const r=H1(e);return new ce(n,new _t("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ge=new DA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=Math.log(2);class OA{constructor(e){const n=s=>parseInt(Math.log(s)/LA,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Mc=function(t,e,n,r){t.sort(e);const i=function(u,c){const f=c-u;let h,g;if(f===0)return null;if(f===1)return h=t[u],g=n?n(h):h,new yt(g,h.node,yt.BLACK,null,null);{const w=parseInt(f/2,10)+u,k=i(u,w),N=i(w+1,c);return h=t[w],g=n?n(h):h,new yt(g,h.node,yt.BLACK,k,N)}},s=function(u){let c=null,f=null,h=t.length;const g=function(k,N){const T=h-k,v=h;h-=k;const y=i(T+1,v),S=t[T],P=n?n(S):S;w(new yt(P,S.node,N,null,y))},w=function(k){c?(c.left=k,c=k):(f=k,c=k)};for(let k=0;k<u.count;++k){const N=u.nextBitIsOne(),T=Math.pow(2,u.count-(k+1));N?g(T,yt.BLACK):(g(T,yt.BLACK),g(T,yt.RED))}return f},o=new OA(t.length),l=s(o);return new on(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh;const $s={};class Nr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return W($s&&Ge,"ChildrenNode.ts has not been loaded"),Nh=Nh||new Nr({".priority":$s},{".priority":Ge}),Nh}get(e){const n=Co(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof on?n:null}hasIndex(e){return fr(this.indexSet_,e.toString())}addIndex(e,n){W(e!==ls,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ce.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Mc(r,e.getCompare()):l=$s;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const f=Object.assign({},this.indexes_);return f[u]=l,new Nr(f,c)}addToIndexes(e,n){const r=Tc(this.indexes_,(i,s)=>{const o=Co(this.indexSet_,s);if(W(o,"Missing index implementation for "+s),i===$s)if(o.isDefinedOn(e.node)){const l=[],u=n.getIterator(ce.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&l.push(c),c=u.getNext();return l.push(e),Mc(l,o.getCompare())}else return $s;else{const l=n.get(e.name);let u=i;return l&&(u=u.remove(new ce(e.name,l))),u.insert(e,e.node)}});return new Nr(r,this.indexSet_)}removeFromIndexes(e,n){const r=Tc(this.indexes_,i=>{if(i===$s)return i;{const s=n.get(e.name);return s?i.remove(new ce(e.name,s)):i}});return new Nr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga;class ee{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&$1(this.priorityNode_),this.children_.isEmpty()&&W(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ga||(ga=new ee(new on(xm),null,Nr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ga}updatePriority(e){return this.children_.isEmpty()?this:new ee(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ga:n}}getChild(e){const n=le(e);return n===null?this:this.getImmediateChild(n).getChild(Oe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(W(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ce(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ga:this.priorityNode_;return new ee(i,o,s)}}updateChild(e,n){const r=le(e);if(r===null)return n;{W(le(e)!==".priority"||Di(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Oe(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Ge,(o,l)=>{n[o]=l.val(e),r++,s&&ee.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+z1(this.getPriority().val())+":"),this.forEachChild(Ge,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":_1(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ce(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ce(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ce(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ce.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ce.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ul?-1:0}withIndex(e){if(e===ls||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ee(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ls||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ge),i=n.getIterator(Ge);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ls?null:this.indexMap_.get(e.toString())}}ee.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MA extends ee{constructor(){super(new on(xm),ee.EMPTY_NODE,Nr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}}const Ul=new MA;Object.defineProperties(ce,{MIN:{value:new ce(ys,ee.EMPTY_NODE)},MAX:{value:new ce(bi,Ul)}});B1.__EMPTY_NODE=ee.EMPTY_NODE;_t.__childrenNodeConstructor=ee;PA(Ul);bA(Ul);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=!0;function pt(t,e=null){if(t===null)return ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),W(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new _t(n,pt(e))}if(!(t instanceof Array)&&jA){const n=[];let r=!1;if(bt(t,(o,l)=>{if(o.substring(0,1)!=="."){const u=pt(l);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new ce(o,u)))}}),n.length===0)return ee.EMPTY_NODE;const s=Mc(n,RA,o=>o.name,xm);if(r){const o=Mc(n,Ge.getCompare());return new ee(s,pt(e),new Nr({".priority":o},{".priority":Ge}))}else return new ee(s,pt(e),Nr.Default)}else{let n=ee.EMPTY_NODE;return bt(t,(r,i)=>{if(fr(t,r)&&r.substring(0,1)!=="."){const s=pt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(pt(e))}}AA(pt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends yd{constructor(e){super(),this.indexPath_=e,W(!ue(e)&&le(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Is(e.name,n.name):s}makePost(e,n){const r=pt(e),i=ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new ce(n,i)}maxPost(){const e=ee.EMPTY_NODE.updateChild(this.indexPath_,Ul);return new ce(bi,e)}toString(){return pl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA extends yd{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Is(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ce.MIN}maxPost(){return ce.MAX}makePost(e,n){const r=pt(e);return new ce(n,r)}toString(){return".value"}}const V1=new FA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){return{type:"value",snapshotNode:t}}function To(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ml(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function gl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function UA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){W(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ml(n,l)):W(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(To(n,r)):o.trackChildChange(gl(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ge,(i,s)=>{n.hasChild(i)||r.trackChildChange(ml(i,s))}),n.isLeafNode()||n.forEachChild(Ge,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(gl(i,s,o))}else r.trackChildChange(To(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.indexedFilter_=new Rm(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_l.getStartPost_(e),this.endPost_=_l.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ce(n,r))||(r=ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ee.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ee.EMPTY_NODE);const s=this;return n.forEachChild(Ge,(o,l)=>{s.matches(new ce(o,l))||(i=i.updateImmediateChild(o,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new _l(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ce(n,r))||(r=ee.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ee.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ee.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(g,w)=>h(w,g)}else o=this.index_.getCompare();const l=e;W(l.numChildren()===this.limit_,"");const u=new ce(n,r),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(l.hasChild(n)){const h=l.getImmediateChild(n);let g=i.getChildAfterChild(this.index_,c,this.reverse_);for(;g!=null&&(g.name===n||l.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);const w=g==null?1:o(g,u);if(f&&!r.isEmpty()&&w>=0)return s!=null&&s.trackChildChange(gl(n,r,h)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(ml(n,h));const N=l.updateImmediateChild(n,ee.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s!=null&&s.trackChildChange(To(g.name,g.node)),N.updateImmediateChild(g.name,g.node)):N}}else return r.isEmpty()?e:f&&o(c,u)>=0?(s!=null&&(s.trackChildChange(ml(c.name,c.node)),s.trackChildChange(To(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(c.name,ee.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return W(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return W(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ys}hasEnd(){return this.endSet_}getIndexEndValue(){return W(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return W(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return W(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ge}copy(){const e=new Pm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zA(t){return t.loadsAllData()?new Rm(t.getIndex()):t.hasLimit()?new BA(t):new _l(t)}function $A(t,e){const n=t.copy();return n.index_=e,n}function fy(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ge?n="$priority":t.index_===V1?n="$value":t.index_===ls?n="$key":(W(t.index_ instanceof Nm,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=mt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=mt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+mt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=mt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function py(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ge&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends M1{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Fl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(W(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=jc.getListenId_(e,r),l={};this.listens_[o]=l;const u=fy(e._queryParams);this.restRequest_(s+".json",u,(c,f)=>{let h=f;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,r),Co(this.listens_,o)===l){let g;c?c===401?g="permission_denied":g="rest_error:"+c:g="ok",i(g,null)}})}unlisten(e,n){const r=jc.getListenId_(e,n);delete this.listens_[r]}get(e){const n=fy(e._queryParams),r=e._path.toString(),i=new Rl;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+jo(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let u=null;if(l.status>=200&&l.status<300){try{u=cl(l.responseText)}catch{qt("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,u)}else l.status!==401&&l.status!==404&&qt("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(){return{value:null,children:new Map}}function K1(t,e,n){if(ue(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=le(e);t.children.has(r)||t.children.set(r,Fc());const i=t.children.get(r);e=Oe(e),K1(i,e,n)}}function Wf(t,e,n){t.value!==null?n(e,t.value):WA(t,(r,i)=>{const s=new xe(e.toString()+"/"+r);Wf(i,s,n)})}function WA(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&bt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=10*1e3,GA=30*1e3,KA=5*60*1e3;class qA{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new VA(e);const r=my+(GA-my)*Math.random();Ua(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;bt(e,(i,s)=>{s>0&&fr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ua(this.reportStats_.bind(this),Math.floor(Math.random()*2*KA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vn||(Vn={}));function Am(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Dm(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Vn.ACK_USER_WRITE,this.source=Am()}operationForChild(e){if(ue(this.path)){if(this.affectedTree.value!=null)return W(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new xe(e));return new Uc(ye(),n,this.revert)}}else return W(le(this.path)===e,"operationForChild called for unrelated child."),new Uc(Oe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){this.source=e,this.path=n,this.type=Vn.LISTEN_COMPLETE}operationForChild(e){return ue(this.path)?new vl(this.source,ye()):new vl(this.source,Oe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Vn.OVERWRITE}operationForChild(e){return ue(this.path)?new ws(this.source,ye(),this.snap.getImmediateChild(e)):new ws(this.source,Oe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Vn.MERGE}operationForChild(e){if(ue(this.path)){const n=this.children.subtree(new xe(e));return n.isEmpty()?null:n.value?new ws(this.source,ye(),n.value):new Io(this.source,ye(),n)}else return W(le(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Io(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ue(e))return this.isFullyInitialized()&&!this.filtered_;const n=le(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function QA(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(UA(o.childName,o.snapshotNode))}),_a(t,i,"child_removed",e,r,n),_a(t,i,"child_added",e,r,n),_a(t,i,"child_moved",s,r,n),_a(t,i,"child_changed",e,r,n),_a(t,i,"value",e,r,n),i}function _a(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,u)=>JA(t,l,u)),o.forEach(l=>{const u=XA(t,l,s);i.forEach(c=>{c.respondsTo(l.type)&&e.push(c.createEvent(u,t.query_))})})}function XA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function JA(t,e,n){if(e.childName==null||n.childName==null)throw Mo("Should only compare child_ events.");const r=new ce(e.childName,e.snapshotNode),i=new ce(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t,e){return{eventCache:t,serverCache:e}}function Ba(t,e,n,r){return wd(new Li(e,n,r),t.serverCache)}function q1(t,e,n,r){return wd(t.eventCache,new Li(e,n,r))}function Bc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Es(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh;const ZA=()=>(Rh||(Rh=new on(F2)),Rh);class Le{constructor(e,n=ZA()){this.value=e,this.children=n}static fromObject(e){let n=new Le(null);return bt(e,(r,i)=>{n=n.set(new xe(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ye(),value:this.value};if(ue(e))return null;{const r=le(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Oe(e),n);return s!=null?{path:Qe(new xe(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ue(e))return this;{const n=le(e),r=this.children.get(n);return r!==null?r.subtree(Oe(e)):new Le(null)}}set(e,n){if(ue(e))return new Le(n,this.children);{const r=le(e),s=(this.children.get(r)||new Le(null)).set(Oe(e),n),o=this.children.insert(r,s);return new Le(this.value,o)}}remove(e){if(ue(e))return this.children.isEmpty()?new Le(null):new Le(null,this.children);{const n=le(e),r=this.children.get(n);if(r){const i=r.remove(Oe(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Le(null):new Le(this.value,s)}else return this}}get(e){if(ue(e))return this.value;{const n=le(e),r=this.children.get(n);return r?r.get(Oe(e)):null}}setTree(e,n){if(ue(e))return n;{const r=le(e),s=(this.children.get(r)||new Le(null)).setTree(Oe(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Le(this.value,o)}}fold(e){return this.fold_(ye(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Qe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ye(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ue(e))return null;{const s=le(e),o=this.children.get(s);return o?o.findOnPath_(Oe(e),Qe(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ye(),n)}foreachOnPath_(e,n,r){if(ue(e))return this;{this.value&&r(n,this.value);const i=le(e),s=this.children.get(i);return s?s.foreachOnPath_(Oe(e),Qe(n,i),r):new Le(null)}}foreach(e){this.foreach_(ye(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Qe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.writeTree_=e}static empty(){return new qn(new Le(null))}}function za(t,e,n){if(ue(e))return new qn(new Le(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Gt(i,e);return s=s.updateChild(o,n),new qn(t.writeTree_.set(i,s))}else{const i=new Le(n),s=t.writeTree_.setTree(e,i);return new qn(s)}}}function Vf(t,e,n){let r=t;return bt(n,(i,s)=>{r=za(r,Qe(e,i),s)}),r}function gy(t,e){if(ue(e))return qn.empty();{const n=t.writeTree_.setTree(e,new Le(null));return new qn(n)}}function Gf(t,e){return xs(t,e)!=null}function xs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Gt(n.path,e)):null}function _y(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ge,(r,i)=>{e.push(new ce(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ce(r,i.value))}),e}function xi(t,e){if(ue(e))return t;{const n=xs(t,e);return n!=null?new qn(new Le(n)):new qn(t.writeTree_.subtree(e))}}function Kf(t){return t.writeTree_.isEmpty()}function xo(t,e){return Y1(ye(),t.writeTree_,e)}function Y1(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(W(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Y1(Qe(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Qe(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t,e){return Z1(e,t)}function eb(t,e,n,r,i){W(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=za(t.visibleWrites,e,n)),t.lastWriteId=r}function tb(t,e,n,r){W(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Vf(t.visibleWrites,e,n),t.lastWriteId=r}function nb(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function rb(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);W(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&ib(l,r.path)?i=!1:xn(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return sb(t),!0;if(r.snap)t.visibleWrites=gy(t.visibleWrites,r.path);else{const l=r.children;bt(l,u=>{t.visibleWrites=gy(t.visibleWrites,Qe(r.path,u))})}return!0}else return!1}function ib(t,e){if(t.snap)return xn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&xn(Qe(t.path,n),e))return!0;return!1}function sb(t){t.visibleWrites=Q1(t.allWrites,ob,ye()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ob(t){return t.visible}function Q1(t,e,n){let r=qn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)xn(n,o)?(l=Gt(n,o),r=za(r,l,s.snap)):xn(o,n)&&(l=Gt(o,n),r=za(r,ye(),s.snap.getChild(l)));else if(s.children){if(xn(n,o))l=Gt(n,o),r=Vf(r,l,s.children);else if(xn(o,n))if(l=Gt(o,n),ue(l))r=Vf(r,ye(),s.children);else{const u=Co(s.children,le(l));if(u){const c=u.getChild(Oe(l));r=za(r,ye(),c)}}}else throw Mo("WriteRecord should have .snap or .children")}}return r}function X1(t,e,n,r,i){if(!r&&!i){const s=xs(t.visibleWrites,e);if(s!=null)return s;{const o=xi(t.visibleWrites,e);if(Kf(o))return n;if(n==null&&!Gf(o,ye()))return null;{const l=n||ee.EMPTY_NODE;return xo(o,l)}}}else{const s=xi(t.visibleWrites,e);if(!i&&Kf(s))return n;if(!i&&n==null&&!Gf(s,ye()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(xn(c.path,e)||xn(e,c.path))},l=Q1(t.allWrites,o,e),u=n||ee.EMPTY_NODE;return xo(l,u)}}}function ab(t,e,n){let r=ee.EMPTY_NODE;const i=xs(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ge,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=xi(t.visibleWrites,e);return n.forEachChild(Ge,(o,l)=>{const u=xo(xi(s,new xe(o)),l);r=r.updateImmediateChild(o,u)}),_y(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=xi(t.visibleWrites,e);return _y(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function lb(t,e,n,r,i){W(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Qe(e,n);if(Gf(t.visibleWrites,s))return null;{const o=xi(t.visibleWrites,s);return Kf(o)?i.getChild(n):xo(o,i.getChild(n))}}function ub(t,e,n,r){const i=Qe(e,n),s=xs(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=xi(t.visibleWrites,i);return xo(o,r.getNode().getImmediateChild(n))}else return null}function cb(t,e){return xs(t.visibleWrites,e)}function db(t,e,n,r,i,s,o){let l;const u=xi(t.visibleWrites,e),c=xs(u,ye());if(c!=null)l=c;else if(n!=null)l=xo(u,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const f=[],h=o.getCompare(),g=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let w=g.getNext();for(;w&&f.length<i;)h(w,r)!==0&&f.push(w),w=g.getNext();return f}else return[]}function hb(){return{visibleWrites:qn.empty(),allWrites:[],lastWriteId:-1}}function zc(t,e,n,r){return X1(t.writeTree,t.treePath,e,n,r)}function Lm(t,e){return ab(t.writeTree,t.treePath,e)}function vy(t,e,n,r){return lb(t.writeTree,t.treePath,e,n,r)}function $c(t,e){return cb(t.writeTree,Qe(t.treePath,e))}function fb(t,e,n,r,i,s){return db(t.writeTree,t.treePath,e,n,r,i,s)}function Om(t,e,n){return ub(t.writeTree,t.treePath,e,n)}function J1(t,e){return Z1(Qe(t.treePath,e),t.writeTree)}function Z1(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;W(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),W(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,gl(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ml(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,To(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,gl(r,e.snapshotNode,i.oldSnap));else throw Mo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const eC=new mb;class Mm{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Li(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Om(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Es(this.viewCache_),s=fb(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t){return{filter:t}}function _b(t,e){W(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),W(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function vb(t,e,n,r,i){const s=new pb;let o,l;if(n.type===Vn.OVERWRITE){const c=n;c.source.fromUser?o=qf(t,e,c.path,c.snap,r,i,s):(W(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered()&&!ue(c.path),o=Hc(t,e,c.path,c.snap,r,i,l,s))}else if(n.type===Vn.MERGE){const c=n;c.source.fromUser?o=wb(t,e,c.path,c.children,r,i,s):(W(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered(),o=Yf(t,e,c.path,c.children,r,i,l,s))}else if(n.type===Vn.ACK_USER_WRITE){const c=n;c.revert?o=Sb(t,e,c.path,r,i,s):o=Eb(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Vn.LISTEN_COMPLETE)o=Cb(t,e,n.path,r,s);else throw Mo("Unknown operation type: "+n.type);const u=s.getChanges();return yb(e,o,u),{viewCache:o,changes:u}}function yb(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Bc(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(G1(Bc(e)))}}function tC(t,e,n,r,i,s){const o=e.eventCache;if($c(r,n)!=null)return e;{let l,u;if(ue(n))if(W(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Es(e),f=c instanceof ee?c:ee.EMPTY_NODE,h=Lm(r,f);l=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=zc(r,Es(e));l=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=le(n);if(c===".priority"){W(Di(n)===1,"Can't have a priority with additional path components");const f=o.getNode();u=e.serverCache.getNode();const h=vy(r,n,f,u);h!=null?l=t.filter.updatePriority(f,h):l=o.getNode()}else{const f=Oe(n);let h;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const g=vy(r,n,o.getNode(),u);g!=null?h=o.getNode().getImmediateChild(c).updateChild(f,g):h=o.getNode().getImmediateChild(c)}else h=Om(r,c,e.serverCache);h!=null?l=t.filter.updateChild(o.getNode(),c,h,f,i,s):l=o.getNode()}}return Ba(e,l,o.isFullyInitialized()||ue(n),t.filter.filtersNodes())}}function Hc(t,e,n,r,i,s,o,l){const u=e.serverCache;let c;const f=o?t.filter:t.filter.getIndexedFilter();if(ue(n))c=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){const w=u.getNode().updateChild(n,r);c=f.updateFullNode(u.getNode(),w,null)}else{const w=le(n);if(!u.isCompleteForPath(n)&&Di(n)>1)return e;const k=Oe(n),T=u.getNode().getImmediateChild(w).updateChild(k,r);w===".priority"?c=f.updatePriority(u.getNode(),T):c=f.updateChild(u.getNode(),w,T,k,eC,null)}const h=q1(e,c,u.isFullyInitialized()||ue(n),f.filtersNodes()),g=new Mm(i,h,s);return tC(t,h,n,i,g,l)}function qf(t,e,n,r,i,s,o){const l=e.eventCache;let u,c;const f=new Mm(i,e,s);if(ue(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Ba(e,c,!0,t.filter.filtersNodes());else{const h=le(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),u=Ba(e,c,l.isFullyInitialized(),l.isFiltered());else{const g=Oe(n),w=l.getNode().getImmediateChild(h);let k;if(ue(g))k=r;else{const N=f.getCompleteChild(h);N!=null?km(g)===".priority"&&N.getChild(F1(g)).isEmpty()?k=N:k=N.updateChild(g,r):k=ee.EMPTY_NODE}if(w.equals(k))u=e;else{const N=t.filter.updateChild(l.getNode(),h,k,g,f,o);u=Ba(e,N,l.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function yy(t,e){return t.eventCache.isCompleteForChild(e)}function wb(t,e,n,r,i,s,o){let l=e;return r.foreach((u,c)=>{const f=Qe(n,u);yy(e,le(f))&&(l=qf(t,l,f,c,i,s,o))}),r.foreach((u,c)=>{const f=Qe(n,u);yy(e,le(f))||(l=qf(t,l,f,c,i,s,o))}),l}function wy(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Yf(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,c;ue(n)?c=r:c=new Le(null).setTree(n,r);const f=e.serverCache.getNode();return c.children.inorderTraversal((h,g)=>{if(f.hasChild(h)){const w=e.serverCache.getNode().getImmediateChild(h),k=wy(t,w,g);u=Hc(t,u,new xe(h),k,i,s,o,l)}}),c.children.inorderTraversal((h,g)=>{const w=!e.serverCache.isCompleteForChild(h)&&g.value===null;if(!f.hasChild(h)&&!w){const k=e.serverCache.getNode().getImmediateChild(h),N=wy(t,k,g);u=Hc(t,u,new xe(h),N,i,s,o,l)}}),u}function Eb(t,e,n,r,i,s,o){if($c(i,n)!=null)return e;const l=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(ue(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Hc(t,e,n,u.getNode().getChild(n),i,s,l,o);if(ue(n)){let c=new Le(null);return u.getNode().forEachChild(ls,(f,h)=>{c=c.set(new xe(f),h)}),Yf(t,e,n,c,i,s,l,o)}else return e}else{let c=new Le(null);return r.foreach((f,h)=>{const g=Qe(n,f);u.isCompleteForPath(g)&&(c=c.set(f,u.getNode().getChild(g)))}),Yf(t,e,n,c,i,s,l,o)}}function Cb(t,e,n,r,i){const s=e.serverCache,o=q1(e,s.getNode(),s.isFullyInitialized()||ue(n),s.isFiltered());return tC(t,o,n,r,eC,i)}function Sb(t,e,n,r,i,s){let o;if($c(r,n)!=null)return e;{const l=new Mm(r,e,i),u=e.eventCache.getNode();let c;if(ue(n)||le(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=zc(r,Es(e));else{const h=e.serverCache.getNode();W(h instanceof ee,"serverChildren would be complete if leaf node"),f=Lm(r,h)}f=f,c=t.filter.updateFullNode(u,f,s)}else{const f=le(n);let h=Om(r,f,e.serverCache);h==null&&e.serverCache.isCompleteForChild(f)&&(h=u.getImmediateChild(f)),h!=null?c=t.filter.updateChild(u,f,h,Oe(n),l,s):e.eventCache.getNode().hasChild(f)?c=t.filter.updateChild(u,f,ee.EMPTY_NODE,Oe(n),l,s):c=u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=zc(r,Es(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||$c(r,ye())!=null,Ba(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Rm(r.getIndex()),s=zA(r);this.processor_=gb(s);const o=n.serverCache,l=n.eventCache,u=i.updateFullNode(ee.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ee.EMPTY_NODE,l.getNode(),null),f=new Li(u,o.isFullyInitialized(),i.filtersNodes()),h=new Li(c,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=wd(h,f),this.eventGenerator_=new YA(this.query_)}get query(){return this.query_}}function Tb(t){return t.viewCache_.serverCache.getNode()}function Ib(t){return Bc(t.viewCache_)}function xb(t,e){const n=Es(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ue(e)&&!n.getImmediateChild(le(e)).isEmpty())?n.getChild(e):null}function Ey(t){return t.eventRegistrations_.length===0}function Nb(t,e){t.eventRegistrations_.push(e)}function Cy(t,e,n){const r=[];if(n){W(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Sy(t,e,n,r){e.type===Vn.MERGE&&e.source.queryId!==null&&(W(Es(t.viewCache_),"We should always have a full cache before handling merges"),W(Bc(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=vb(t.processor_,i,e,n,r);return _b(t.processor_,s.viewCache),W(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,nC(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Rb(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ge,(s,o)=>{r.push(To(s,o))}),n.isFullyInitialized()&&r.push(G1(n.getNode())),nC(t,r,n.getNode(),e)}function nC(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return QA(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc;class rC{constructor(){this.views=new Map}}function Pb(t){W(!Wc,"__referenceConstructor has already been defined"),Wc=t}function Ab(){return W(Wc,"Reference.ts has not been loaded"),Wc}function bb(t){return t.views.size===0}function jm(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return W(s!=null,"SyncTree gave us an op for an invalid query."),Sy(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Sy(o,e,n,r));return s}}function iC(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=zc(n,i?r:null),u=!1;l?u=!0:r instanceof ee?(l=Lm(n,r),u=!1):(l=ee.EMPTY_NODE,u=!1);const c=wd(new Li(l,u,!1),new Li(r,i,!1));return new kb(e,c)}return o}function Db(t,e,n,r,i,s){const o=iC(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Nb(o,n),Rb(o,n)}function Lb(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=Oi(t);if(i==="default")for(const[u,c]of t.views.entries())o=o.concat(Cy(c,n,r)),Ey(c)&&(t.views.delete(u),c.query._queryParams.loadsAllData()||s.push(c.query));else{const u=t.views.get(i);u&&(o=o.concat(Cy(u,n,r)),Ey(u)&&(t.views.delete(i),u.query._queryParams.loadsAllData()||s.push(u.query)))}return l&&!Oi(t)&&s.push(new(Ab())(e._repo,e._path)),{removed:s,events:o}}function sC(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ni(t,e){let n=null;for(const r of t.views.values())n=n||xb(r,e);return n}function oC(t,e){if(e._queryParams.loadsAllData())return Cd(t);{const r=e._queryIdentifier;return t.views.get(r)}}function aC(t,e){return oC(t,e)!=null}function Oi(t){return Cd(t)!=null}function Cd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc;function Ob(t){W(!Vc,"__referenceConstructor has already been defined"),Vc=t}function Mb(){return W(Vc,"Reference.ts has not been loaded"),Vc}let jb=1;class ky{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Le(null),this.pendingWriteTree_=hb(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lC(t,e,n,r,i){return eb(t.pendingWriteTree_,e,n,r,i),i?Bo(t,new ws(Am(),e,n)):[]}function Fb(t,e,n,r){tb(t.pendingWriteTree_,e,n,r);const i=Le.fromObject(n);return Bo(t,new Io(Am(),e,i))}function mi(t,e,n=!1){const r=nb(t.pendingWriteTree_,e);if(rb(t.pendingWriteTree_,e)){let s=new Le(null);return r.snap!=null?s=s.set(ye(),!0):bt(r.children,o=>{s=s.set(new xe(o),!0)}),Bo(t,new Uc(r.path,s,n))}else return[]}function Bl(t,e,n){return Bo(t,new ws(bm(),e,n))}function Ub(t,e,n){const r=Le.fromObject(n);return Bo(t,new Io(bm(),e,r))}function Bb(t,e){return Bo(t,new vl(bm(),e))}function zb(t,e,n){const r=Um(t,n);if(r){const i=Bm(r),s=i.path,o=i.queryId,l=Gt(s,e),u=new vl(Dm(o),l);return zm(t,s,u)}else return[]}function Gc(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||aC(o,e))){const u=Lb(o,e,n,r);bb(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=u.removed;if(l=u.events,!i){const f=c.findIndex(g=>g._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(s,(g,w)=>Oi(w));if(f&&!h){const g=t.syncPointTree_.subtree(s);if(!g.isEmpty()){const w=Wb(g);for(let k=0;k<w.length;++k){const N=w[k],T=N.query,v=hC(t,N);t.listenProvider_.startListening($a(T),yl(t,T),v.hashFn,v.onComplete)}}}!h&&c.length>0&&!r&&(f?t.listenProvider_.stopListening($a(e),null):c.forEach(g=>{const w=t.queryToTagMap.get(Sd(g));t.listenProvider_.stopListening($a(g),w)}))}Vb(t,c)}return l}function uC(t,e,n,r){const i=Um(t,r);if(i!=null){const s=Bm(i),o=s.path,l=s.queryId,u=Gt(o,e),c=new ws(Dm(l),u,n);return zm(t,o,c)}else return[]}function $b(t,e,n,r){const i=Um(t,r);if(i){const s=Bm(i),o=s.path,l=s.queryId,u=Gt(o,e),c=Le.fromObject(n),f=new Io(Dm(l),u,c);return zm(t,o,f)}else return[]}function Qf(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(g,w)=>{const k=Gt(g,i);s=s||Ni(w,k),o=o||Oi(w)});let l=t.syncPointTree_.get(i);l?(o=o||Oi(l),s=s||Ni(l,ye())):(l=new rC,t.syncPointTree_=t.syncPointTree_.set(i,l));let u;s!=null?u=!0:(u=!1,s=ee.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((w,k)=>{const N=Ni(k,ye());N&&(s=s.updateImmediateChild(w,N))}));const c=aC(l,e);if(!c&&!e._queryParams.loadsAllData()){const g=Sd(e);W(!t.queryToTagMap.has(g),"View does not exist, but we have a tag");const w=Gb();t.queryToTagMap.set(g,w),t.tagToQueryMap.set(w,g)}const f=Ed(t.pendingWriteTree_,i);let h=Db(l,e,n,f,s,u);if(!c&&!o&&!r){const g=oC(l,e);h=h.concat(Kb(t,e,g))}return h}function Fm(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const u=Gt(o,e),c=Ni(l,u);if(c)return c});return X1(i,e,s,n,!0)}function Hb(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,f)=>{const h=Gt(c,n);r=r||Ni(f,h)});let i=t.syncPointTree_.get(n);i?r=r||Ni(i,ye()):(i=new rC,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Li(r,!0,!1):null,l=Ed(t.pendingWriteTree_,e._path),u=iC(i,e,l,s?o.getNode():ee.EMPTY_NODE,s);return Ib(u)}function Bo(t,e){return cC(e,t.syncPointTree_,null,Ed(t.pendingWriteTree_,ye()))}function cC(t,e,n,r){if(ue(t.path))return dC(t,e,n,r);{const i=e.get(ye());n==null&&i!=null&&(n=Ni(i,ye()));let s=[];const o=le(t.path),l=t.operationForChild(o),u=e.children.get(o);if(u&&l){const c=n?n.getImmediateChild(o):null,f=J1(r,o);s=s.concat(cC(l,u,c,f))}return i&&(s=s.concat(jm(i,t,r,n))),s}}function dC(t,e,n,r){const i=e.get(ye());n==null&&i!=null&&(n=Ni(i,ye()));let s=[];return e.children.inorderTraversal((o,l)=>{const u=n?n.getImmediateChild(o):null,c=J1(r,o),f=t.operationForChild(o);f&&(s=s.concat(dC(f,l,u,c)))}),i&&(s=s.concat(jm(i,t,r,n))),s}function hC(t,e){const n=e.query,r=yl(t,n);return{hashFn:()=>(Tb(e)||ee.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?zb(t,n._path,r):Bb(t,n._path);{const s=z2(i,n);return Gc(t,n,null,s)}}}}function yl(t,e){const n=Sd(e);return t.queryToTagMap.get(n)}function Sd(t){return t._path.toString()+"$"+t._queryIdentifier}function Um(t,e){return t.tagToQueryMap.get(e)}function Bm(t){const e=t.indexOf("$");return W(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new xe(t.substr(0,e))}}function zm(t,e,n){const r=t.syncPointTree_.get(e);W(r,"Missing sync point for query tag that we're tracking");const i=Ed(t.pendingWriteTree_,e);return jm(r,n,i,null)}function Wb(t){return t.fold((e,n,r)=>{if(n&&Oi(n))return[Cd(n)];{let i=[];return n&&(i=sC(n)),bt(r,(s,o)=>{i=i.concat(o)}),i}})}function $a(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Mb())(t._repo,t._path):t}function Vb(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Sd(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Gb(){return jb++}function Kb(t,e,n){const r=e._path,i=yl(t,e),s=hC(t,n),o=t.listenProvider_.startListening($a(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)W(!Oi(l.value),"If we're adding a query, it shouldn't be shadowed");else{const u=l.fold((c,f,h)=>{if(!ue(c)&&f&&Oi(f))return[Cd(f).query];{let g=[];return f&&(g=g.concat(sC(f).map(w=>w.query))),bt(h,(w,k)=>{g=g.concat(k)}),g}});for(let c=0;c<u.length;++c){const f=u[c];t.listenProvider_.stopListening($a(f),yl(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new $m(n)}node(){return this.node_}}class Hm{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Qe(this.path_,e);return new Hm(this.syncTree_,n)}node(){return Fm(this.syncTree_,this.path_)}}const qb=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ty=function(t,e,n){if(!t||typeof t!="object")return t;if(W(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Yb(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Qb(t[".sv"],e);W(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Yb=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:W(!1,"Unexpected server value: "+t)}},Qb=function(t,e,n){t.hasOwnProperty("increment")||W(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&W(!1,"Unexpected increment value: "+r);const i=e.node();if(W(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},fC=function(t,e,n,r){return Wm(e,new Hm(n,t),r)},pC=function(t,e,n){return Wm(t,new $m(e),n)};function Wm(t,e,n){const r=t.getPriority().val(),i=Ty(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=Ty(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new _t(l,pt(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new _t(i))),o.forEachChild(Ge,(l,u)=>{const c=Wm(u,e.getImmediateChild(l),n);c!==u&&(s=s.updateImmediateChild(l,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Gm(t,e){let n=e instanceof xe?e:new xe(e),r=t,i=le(n);for(;i!==null;){const s=Co(r.node.children,i)||{children:{},childCount:0};r=new Vm(i,r,s),n=Oe(n),i=le(n)}return r}function zo(t){return t.node.value}function mC(t,e){t.node.value=e,Xf(t)}function gC(t){return t.node.childCount>0}function Xb(t){return zo(t)===void 0&&!gC(t)}function kd(t,e){bt(t.node.children,(n,r)=>{e(new Vm(n,t,r))})}function _C(t,e,n,r){n&&e(t),kd(t,i=>{_C(i,e,!0)})}function Jb(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function zl(t){return new xe(t.parent===null?t.name:zl(t.parent)+"/"+t.name)}function Xf(t){t.parent!==null&&Zb(t.parent,t.name,t)}function Zb(t,e,n){const r=Xb(n),i=fr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Xf(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Xf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=/[\[\].#$\/\u0000-\u001F\u007F]/,tD=/[\[\].#$\u0000-\u001F\u007F]/,Ph=10*1024*1024,Km=function(t){return typeof t=="string"&&t.length!==0&&!eD.test(t)},vC=function(t){return typeof t=="string"&&t.length!==0&&!tD.test(t)},nD=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vC(t)},Jf=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ym(t)||t&&typeof t=="object"&&fr(t,".sv")},yC=function(t,e,n,r){r&&e===void 0||Td(hd(t,"value"),e,n)},Td=function(t,e,n){const r=n instanceof xe?new EA(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ji(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ji(r)+" with contents = "+e.toString());if(ym(e))throw new Error(t+"contains "+e.toString()+" "+Ji(r));if(typeof e=="string"&&e.length>Ph/3&&fd(e)>Ph)throw new Error(t+"contains a string greater than "+Ph+" utf8 bytes "+Ji(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(bt(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Km(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ji(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);CA(r,o),Td(t,l,r),SA(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ji(r)+" in addition to actual children.")}},rD=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=pl(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Km(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(wA);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&xn(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},iD=function(t,e,n,r){const i=hd(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];bt(e,(o,l)=>{const u=new xe(o);if(Td(i,l,Qe(n,u)),km(u)===".priority"&&!Jf(l))throw new Error(i+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(u)}),rD(i,s)},qm=function(t,e,n,r){if(!vC(n))throw new Error(hd(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},sD=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qm(t,e,n)},Ym=function(t,e){if(le(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},oD=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Km(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!nD(n))throw new Error(hd(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Id(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Tm(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function wC(t,e,n){Id(t,n),EC(t,r=>Tm(r,e))}function bn(t,e,n){Id(t,n),EC(t,r=>xn(r,e)||xn(e,r))}function EC(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(lD(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function lD(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Fa&&Nt("event: "+n.toString()),Uo(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="repo_interrupt",cD=25;class dD{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new aD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fc(),this.transactionQueueTree_=new Vm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function hD(t,e,n){if(t.stats_=Cm(t.repoInfo_),t.forceRestClient_||V2())t.server_=new jc(t.repoInfo_,(r,i,s,o)=>{Iy(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>xy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Dr(t.repoInfo_,e,(r,i,s,o)=>{Iy(t,r,i,s,o)},r=>{xy(t,r)},r=>{fD(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Q2(t.repoInfo_,()=>new qA(t.stats_,t.server_)),t.infoData_=new HA,t.infoSyncTree_=new ky({startListening:(r,i,s,o)=>{let l=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(l=Bl(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Qm(t,"connected",!1),t.serverSyncTree_=new ky({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,u)=>{const c=o(l,u);bn(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function CC(t){const n=t.infoData_.getNode(new xe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function xd(t){return qb({timestamp:CC(t)})}function Iy(t,e,n,r,i){t.dataUpdateCount++;const s=new xe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=Tc(n,c=>pt(c));o=$b(t.serverSyncTree_,s,u,i)}else{const u=pt(n);o=uC(t.serverSyncTree_,s,u,i)}else if(r){const u=Tc(n,c=>pt(c));o=Ub(t.serverSyncTree_,s,u)}else{const u=pt(n);o=Bl(t.serverSyncTree_,s,u)}let l=s;o.length>0&&(l=No(t,s)),bn(t.eventQueue_,l,o)}function xy(t,e){Qm(t,"connected",e),e===!1&&_D(t)}function fD(t,e){bt(e,(n,r)=>{Qm(t,n,r)})}function Qm(t,e,n){const r=new xe("/.info/"+e),i=pt(n);t.infoData_.updateSnapshot(r,i);const s=Bl(t.infoSyncTree_,r,i);bn(t.eventQueue_,r,s)}function Xm(t){return t.nextWriteId_++}function pD(t,e,n){const r=Hb(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=pt(i).withIndex(e._queryParams.getIndex());Qf(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Bl(t.serverSyncTree_,e._path,s);else{const l=yl(t.serverSyncTree_,e);o=uC(t.serverSyncTree_,e._path,s,l)}return bn(t.eventQueue_,e._path,o),Gc(t.serverSyncTree_,e,n,null,!0),s},i=>($l(t,"get for query "+mt(e)+" failed: "+i),Promise.reject(new Error(i))))}function mD(t,e,n,r,i){$l(t,"set",{path:e.toString(),value:n,priority:r});const s=xd(t),o=pt(n,r),l=Fm(t.serverSyncTree_,e),u=pC(o,l,s),c=Xm(t),f=lC(t.serverSyncTree_,e,u,c,!0);Id(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(g,w)=>{const k=g==="ok";k||qt("set at "+e+" failed: "+g);const N=mi(t.serverSyncTree_,c,!k);bn(t.eventQueue_,e,N),Zf(t,i,g,w)});const h=Zm(t,e);No(t,h),bn(t.eventQueue_,h,[])}function gD(t,e,n,r){$l(t,"update",{path:e.toString(),value:n});let i=!0;const s=xd(t),o={};if(bt(n,(l,u)=>{i=!1,o[l]=fC(Qe(e,l),pt(u),t.serverSyncTree_,s)}),i)Nt("update() called with empty data.  Don't do anything."),Zf(t,r,"ok",void 0);else{const l=Xm(t),u=Fb(t.serverSyncTree_,e,o,l);Id(t.eventQueue_,u),t.server_.merge(e.toString(),n,(c,f)=>{const h=c==="ok";h||qt("update at "+e+" failed: "+c);const g=mi(t.serverSyncTree_,l,!h),w=g.length>0?No(t,e):e;bn(t.eventQueue_,w,g),Zf(t,r,c,f)}),bt(n,c=>{const f=Zm(t,Qe(e,c));No(t,f)}),bn(t.eventQueue_,e,[])}}function _D(t){$l(t,"onDisconnectEvents");const e=xd(t),n=Fc();Wf(t.onDisconnect_,ye(),(i,s)=>{const o=fC(i,s,t.serverSyncTree_,e);K1(n,i,o)});let r=[];Wf(n,ye(),(i,s)=>{r=r.concat(Bl(t.serverSyncTree_,i,s));const o=Zm(t,i);No(t,o)}),t.onDisconnect_=Fc(),bn(t.eventQueue_,ye(),r)}function vD(t,e,n){let r;le(e._path)===".info"?r=Qf(t.infoSyncTree_,e,n):r=Qf(t.serverSyncTree_,e,n),wC(t.eventQueue_,e._path,r)}function Ny(t,e,n){let r;le(e._path)===".info"?r=Gc(t.infoSyncTree_,e,n):r=Gc(t.serverSyncTree_,e,n),wC(t.eventQueue_,e._path,r)}function yD(t){t.persistentConnection_&&t.persistentConnection_.interrupt(uD)}function $l(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Nt(n,...e)}function Zf(t,e,n,r){e&&Uo(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function SC(t,e,n){return Fm(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function Jm(t,e=t.transactionQueueTree_){if(e||Nd(t,e),zo(e)){const n=TC(t,e);W(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&wD(t,zl(e),n)}else gC(e)&&kd(e,n=>{Jm(t,n)})}function wD(t,e,n){const r=n.map(c=>c.currentWriteId),i=SC(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const f=n[c];W(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const h=Gt(e,f.path);s=s.updateChild(h,f.currentOutputSnapshotRaw)}const l=s.val(!0),u=e;t.server_.put(u.toString(),l,c=>{$l(t,"transaction put response",{path:u.toString(),status:c});let f=[];if(c==="ok"){const h=[];for(let g=0;g<n.length;g++)n[g].status=2,f=f.concat(mi(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&h.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();Nd(t,Gm(t.transactionQueueTree_,e)),Jm(t,t.transactionQueueTree_),bn(t.eventQueue_,e,f);for(let g=0;g<h.length;g++)Uo(h[g])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{qt("transaction at "+u.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}No(t,e)}},o)}function No(t,e){const n=kC(t,e),r=zl(n),i=TC(t,n);return ED(t,i,r),r}function ED(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const u=e[l],c=Gt(n,u.path);let f=!1,h;if(W(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,h=u.abortReason,i=i.concat(mi(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=cD)f=!0,h="maxretry",i=i.concat(mi(t.serverSyncTree_,u.currentWriteId,!0));else{const g=SC(t,u.path,o);u.currentInputSnapshot=g;const w=e[l].update(g.val());if(w!==void 0){Td("transaction failed: Data returned ",w,u.path);let k=pt(w);typeof w=="object"&&w!=null&&fr(w,".priority")||(k=k.updatePriority(g.getPriority()));const T=u.currentWriteId,v=xd(t),y=pC(k,g,v);u.currentOutputSnapshotRaw=k,u.currentOutputSnapshotResolved=y,u.currentWriteId=Xm(t),o.splice(o.indexOf(T),1),i=i.concat(lC(t.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally)),i=i.concat(mi(t.serverSyncTree_,T,!0))}else f=!0,h="nodata",i=i.concat(mi(t.serverSyncTree_,u.currentWriteId,!0))}bn(t.eventQueue_,n,i),i=[],f&&(e[l].status=2,function(g){setTimeout(g,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(h==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(h),!1,null))))}Nd(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Uo(r[l]);Jm(t,t.transactionQueueTree_)}function kC(t,e){let n,r=t.transactionQueueTree_;for(n=le(e);n!==null&&zo(r)===void 0;)r=Gm(r,n),e=Oe(e),n=le(e);return r}function TC(t,e){const n=[];return IC(t,e,n),n.sort((r,i)=>r.order-i.order),n}function IC(t,e,n){const r=zo(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);kd(e,i=>{IC(t,i,n)})}function Nd(t,e){const n=zo(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,mC(e,n.length>0?n:void 0)}kd(e,r=>{Nd(t,r)})}function Zm(t,e){const n=zl(kC(t,e)),r=Gm(t.transactionQueueTree_,e);return Jb(r,i=>{Ah(t,i)}),Ah(t,r),_C(r,i=>{Ah(t,i)}),n}function Ah(t,e){const n=zo(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(W(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(W(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(mi(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?mC(e,void 0):n.length=s+1,bn(t.eventQueue_,zl(e),i);for(let o=0;o<r.length;o++)Uo(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function SD(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Ry=function(t,e){const n=kD(t),r=n.namespace;n.domain==="firebase.com"&&$r(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&$r("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||M2();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new R1(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new xe(n.pathString)}},kD=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",u=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(l=t.substring(0,c-1),t=t.substring(c+2));let f=t.indexOf("/");f===-1&&(f=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(f,h)),f<h&&(i=CD(t.substring(f,h)));const g=SD(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=l==="https"||l==="wss",u=parseInt(e.substring(c+1),10)):c=e.length;const w=e.slice(0,c);if(w.toLowerCase()==="localhost")n="localhost";else if(w.split(".").length<=2)n=w;else{const k=e.indexOf(".");r=e.substring(0,k).toLowerCase(),n=e.substring(k+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",TD=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Py.charAt(n%64),n=Math.floor(n/64);W(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Py.charAt(e[i]);return W(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+mt(this.snapshot.exportVal())}}class xD{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return W(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ue(this._path)?null:km(this._path)}get ref(){return new Gr(this._repo,this._path)}get _queryIdentifier(){const e=py(this._queryParams),n=wm(e);return n==="{}"?"default":n}get _queryObject(){return py(this._queryParams)}isEqual(e){if(e=Je(e),!(e instanceof Rd))return!1;const n=this._repo===e._repo,r=Tm(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+yA(this._path)}}function ND(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function RD(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ls){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ys)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==bi)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Ge){if(e!=null&&!Jf(e)||n!=null&&!Jf(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(W(t.getIndex()instanceof Nm||t.getIndex()===V1,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class Gr extends Rd{constructor(e,n){super(e,n,new Pm,!1)}get parent(){const e=F1(this._path);return e===null?null:new Gr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class wl{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new xe(e),r=El(this.ref,e);return new wl(this._node.getChild(n),r,Ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new wl(i,El(this.ref,r),Ge)))}hasChild(e){const n=new xe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function se(t,e){return t=Je(t),t._checkNotDeleted("ref"),e!==void 0?El(t._root,e):t._root}function El(t,e){return t=Je(t),le(t._path)===null?sD("child","path",e):qm("child","path",e),new Gr(t._repo,Qe(t._path,e))}function Ro(t,e){t=Je(t),Ym("push",t._path),yC("push",e,t._path,!0);const n=CC(t._repo),r=TD(n),i=El(t,r),s=El(t,r);let o;return e!=null?o=Lr(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Yu(t){return Ym("remove",t._path),Lr(t,null)}function Lr(t,e){t=Je(t),Ym("set",t._path),yC("set",e,t._path,!1);const n=new Rl;return mD(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Rr(t,e){iD("update",e,t._path);const n=new Rl;return gD(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Cl(t){t=Je(t);const e=new xC(()=>{}),n=new Pd(e);return pD(t._repo,t,n).then(r=>new wl(r,new Gr(t._repo,t._path),t._queryParams.getIndex()))}class Pd{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new ID("value",this,new wl(e.snapshotNode,new Gr(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new xD(this,e,n):null}matches(e){return e instanceof Pd?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function PD(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const u=n,c=(f,h)=>{Ny(t._repo,t,l),u(f,h)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new xC(n,s||void 0),l=new Pd(o);return vD(t._repo,t,l),()=>Ny(t._repo,t,l)}function Pt(t,e,n,r){return PD(t,"value",e,n,r)}class AD{}class bD extends AD{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){ND(e,"orderByChild");const n=new xe(this._path);if(ue(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Nm(n),i=$A(e._queryParams,r);return RD(i),new Rd(e._repo,e._path,i,!0)}}function DD(t){return qm("orderByChild","path",t),new bD(t)}function LD(t,...e){let n=Je(t);for(const r of e)n=r._apply(n);return n}Pb(Gr);Ob(Gr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="FIREBASE_DATABASE_EMULATOR_HOST",ep={};let MD=!1;function jD(t,e,n,r){t.repoInfo_=new R1(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function FD(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||$r("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Ry(s,i),l=o.repoInfo,u;typeof process<"u"&&Qv&&(u=Qv[OD]),u?(s=`http://${u}?ns=${l.namespace}`,o=Ry(s,i),l=o.repoInfo):o.repoInfo.secure;const c=new K2(t.name,t.options,e);oD("Invalid Firebase Database URL",o),ue(o.path)||$r("Database URL must point to the root of a Firebase Database (not including a child path).");const f=BD(l,t,c,new G2(t.name,n));return new zD(f,t)}function UD(t,e){const n=ep[e];(!n||n[t.key]!==t)&&$r(`Database ${e}(${t.repoInfo_}) has already been deleted.`),yD(t),delete n[t.key]}function BD(t,e,n,r){let i=ep[e.name];i||(i={},ep[e.name]=i);let s=i[t.toURLString()];return s&&$r("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new dD(t,MD,n,r),i[t.toURLString()]=s,s}class zD{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(hD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gr(this._repo,ye())),this._rootInternal}_delete(){return this._rootInternal!==null&&(UD(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&$r("Cannot call "+e+" on a deleted database.")}}function $D(t=md(),e){const n=Al(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=rm("database");r&&HD(n,...r)}return n}function HD(t,e,n,r={}){t=Je(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&$r("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&$r('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new qu(qu.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:im(r.mockUserToken,t.app.options.projectId);s=new qu(o)}jD(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){P2(zi),Ai(new Ur("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return FD(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Rn(Xv,Jv,t),Rn(Xv,Jv,"esm2017")}Dr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Dr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};WD();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="firebasestorage.googleapis.com",RC="storageBucket",VD=2*60*1e3,GD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends hr{constructor(e,n,r=0){super(bh(e),`Firebase Storage: ${n} (${bh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function bh(t){return"storage/"+t}function eg(){const t="An unknown error occurred, please check the error payload for server response.";return new Ze(Xe.UNKNOWN,t)}function KD(t){return new Ze(Xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function qD(t){return new Ze(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function YD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ze(Xe.UNAUTHENTICATED,t)}function QD(){return new Ze(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function XD(t){return new Ze(Xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function JD(){return new Ze(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZD(){return new Ze(Xe.CANCELED,"User canceled the upload/download.")}function eL(t){return new Ze(Xe.INVALID_URL,"Invalid URL '"+t+"'.")}function tL(t){return new Ze(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function nL(){return new Ze(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RC+"' property when initializing the app?")}function rL(){return new Ze(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function iL(){return new Ze(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function sL(t){return new Ze(Xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tp(t){return new Ze(Xe.INVALID_ARGUMENT,t)}function PC(){return new Ze(Xe.APP_DELETED,"The Firebase app was deleted.")}function oL(t){return new Ze(Xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ha(t,e){return new Ze(Xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function va(t){throw new Ze(Xe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=gn.makeFromUrl(e,n)}catch{return new gn(e,"")}if(r.path==="")return r;throw tL(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const f="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${h}/${f}/b/${i}/o${g}`,"i"),k={bucket:1,path:3},N=n===NC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",v=new RegExp(`^https?://${N}/${i}/${T}`,"i"),S=[{regex:l,indices:u,postModify:s},{regex:w,indices:k,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<S.length;P++){const F=S[P],B=F.regex.exec(e);if(B){const _=B[F.indices.bucket];let E=B[F.indices.path];E||(E=""),r=new gn(_,E),F.postModify(r);break}}if(r==null)throw eL(e);return r}}class aL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let c=!1;function f(...T){c||(c=!0,e.apply(null,T))}function h(T){i=setTimeout(()=>{i=null,t(w,u())},T)}function g(){s&&clearTimeout(s)}function w(T,...v){if(c){g();return}if(T){g(),f.call(null,T,...v);return}if(u()||o){g(),f.call(null,T,...v);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,h(S)}let k=!1;function N(T){k||(k=!0,g(),!c&&(i!==null?(T||(l=2),clearTimeout(i),h(0)):T||(l=1)))}return h(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function uL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t){return t!==void 0}function dL(t){return typeof t=="object"&&!Array.isArray(t)}function tg(t){return typeof t=="string"||t instanceof String}function Ay(t){return ng()&&t instanceof Blob}function ng(){return typeof Blob<"u"}function by(t,e,n,r){if(r<e)throw tp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw tp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function AC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var us;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(us||(us={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,r,i,s,o,l,u,c,f,h,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=h,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new xu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===us.NO_ERROR,u=s.getStatus();if(!l||hL(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===us.ABORT;r(!1,new xu(!1,null,f));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new xu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());cL(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=eg();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?PC():ZD();o(u)}else{const u=JD();o(u)}};this.canceled_?n(!1,new xu(!1,null,!0)):this.backoffId_=lL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&uL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function pL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function mL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function gL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function _L(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function vL(t,e,n,r,i,s,o=!0){const l=AC(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return gL(c,e),pL(c,n),mL(c,s),_L(c,r),new fL(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wL(...t){const e=yL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ng())return new Blob(t);throw new Ze(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function EL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){if(typeof atob>"u")throw sL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dh{constructor(e,n){this.data=e,this.contentType=n||null}}function SL(t,e){switch(t){case ar.RAW:return new Dh(bC(e));case ar.BASE64:case ar.BASE64URL:return new Dh(DC(t,e));case ar.DATA_URL:return new Dh(TL(e),IL(e))}throw eg()}function bC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function kL(t){let e;try{e=decodeURIComponent(t)}catch{throw Ha(ar.DATA_URL,"Malformed data URL.")}return bC(e)}function DC(t,e){switch(t){case ar.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ha(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ar.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ha(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=CL(e)}catch(i){throw i.message.includes("polyfill")?i:Ha(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class LC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ha(ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=xL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function TL(t){const e=new LC(t);return e.base64?DC(ar.BASE64,e.rest):kL(e.rest)}function IL(t){return new LC(t).contentType}function xL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){let r=0,i="";Ay(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ay(this.data_)){const r=this.data_,i=EL(r,e,n);return i===null?null:new di(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new di(r,!0)}}static getBlob(...e){if(ng()){const n=e.map(r=>r instanceof di?r.data_:r);return new di(wL.apply(null,n))}else{const n=e.map(o=>tg(o)?SL(ar.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new di(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t){let e;try{e=JSON.parse(t)}catch{return null}return dL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function RL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function MC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e){return e}class Ht{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||PL}}let Nu=null;function AL(t){return!tg(t)||t.length<2?t:MC(t)}function jC(){if(Nu)return Nu;const t=[];t.push(new Ht("bucket")),t.push(new Ht("generation")),t.push(new Ht("metageneration")),t.push(new Ht("name","fullPath",!0));function e(s,o){return AL(o)}const n=new Ht("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ht("size");return i.xform=r,t.push(i),t.push(new Ht("timeCreated")),t.push(new Ht("updated")),t.push(new Ht("md5Hash",null,!0)),t.push(new Ht("cacheControl",null,!0)),t.push(new Ht("contentDisposition",null,!0)),t.push(new Ht("contentEncoding",null,!0)),t.push(new Ht("contentLanguage",null,!0)),t.push(new Ht("contentType",null,!0)),t.push(new Ht("metadata","customMetadata",!0)),Nu=t,Nu}function bL(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new gn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function DL(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return bL(r,t),r}function FC(t,e,n){const r=OC(e);return r===null?null:DL(t,r,n)}function LL(t,e,n,r){const i=OC(e);if(i===null||!tg(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const f=t.bucket,h=t.fullPath,g="/b/"+o(f)+"/o/"+o(h),w=rg(g,n,r),k=AC({alt:"media",token:c});return w+k})[0]}function OL(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class UC{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){if(!t)throw eg()}function ML(t,e){function n(r,i){const s=FC(t,i,e);return BC(s!==null),s}return n}function jL(t,e){function n(r,i){const s=FC(t,i,e);return BC(s!==null),LL(s,i,t.host,t._protocol)}return n}function zC(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=QD():i=YD():n.getStatus()===402?i=qD(t.bucket):n.getStatus()===403?i=XD(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function FL(t){const e=zC(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=KD(t.path)),s.serverResponse=i.serverResponse,s}return n}function UL(t,e,n){const r=e.fullServerUrl(),i=rg(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new UC(i,s,jL(t,n),o);return l.errorHandler=FL(e),l}function BL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function zL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=BL(null,e)),r}function $L(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let P=0;P<2;P++)S=S+Math.random().toString().slice(2);return S}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const c=zL(e,r,i),f=OL(c,n),h="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=di.getBlob(h,r,g);if(w===null)throw rL();const k={name:c.fullPath},N=rg(s,t.host,t._protocol),T="POST",v=t.maxUploadRetryTime,y=new UC(N,T,ML(t,n),v);return y.urlParams=k,y.headers=o,y.body=w.uploadData(),y.errorHandler=zC(e),y}class HL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=us.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=us.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=us.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw va("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw va("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw va("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw va("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw va("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class WL extends HL{initXhr(){this.xhr_.responseType="text"}}function $C(){return new WL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n){this._service=e,n instanceof gn?this._location=n:this._location=gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Cs(e,n)}get root(){const e=new gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MC(this._location.path)}get storage(){return this._service}get parent(){const e=NL(this._location.path);if(e===null)return null;const n=new gn(this._location.bucket,e);return new Cs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw oL(e)}}function VL(t,e,n){t._throwIfRoot("uploadBytes");const r=$L(t.storage,t._location,jC(),new di(e,!0),n);return t.storage.makeRequestWithTokens(r,$C).then(i=>({metadata:i,ref:t}))}function GL(t){t._throwIfRoot("getDownloadURL");const e=UL(t.storage,t._location,jC());return t.storage.makeRequestWithTokens(e,$C).then(n=>{if(n===null)throw iL();return n})}function KL(t,e){const n=RL(t._location.path,e),r=new gn(t._location.bucket,n);return new Cs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){return/^[A-Za-z]+:\/\//.test(t)}function YL(t,e){return new Cs(t,e)}function HC(t,e){if(t instanceof ig){const n=t;if(n._bucket==null)throw nL();const r=new Cs(n,n._bucket);return e!=null?HC(r,e):r}else return e!==void 0?KL(t,e):t}function QL(t,e){if(e&&qL(e)){if(t instanceof ig)return YL(t,e);throw tp("To use ref(service, url), the first argument must be a Storage instance.")}else return HC(t,e)}function Dy(t,e){const n=e==null?void 0:e[RC];return n==null?null:gn.makeFromBucketSpec(n,t)}function XL(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:im(i,t.app.options.projectId))}class ig{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=NC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VD,this._maxUploadRetryTime=GD,this._requests=new Set,i!=null?this._bucket=gn.makeFromBucketSpec(i,this._host):this._bucket=Dy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gn.makeFromBucketSpec(this._url,e):this._bucket=Dy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){by("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){by("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Cs(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new aL(PC());{const o=vL(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Ly="@firebase/storage",Oy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="storage";function JL(t,e,n){return t=Je(t),VL(t,e,n)}function ZL(t){return t=Je(t),GL(t)}function eO(t,e){return t=Je(t),QL(t,e)}function tO(t=md(),e){t=Je(t);const r=Al(t,WC).getImmediate({identifier:e}),i=rm("storage");return i&&nO(r,...i),r}function nO(t,e,n,r={}){XL(t,e,n,r)}function rO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ig(n,r,i,e,zi)}function iO(){Ai(new Ur(WC,rO,"PUBLIC").setMultipleInstances(!0)),Rn(Ly,Oy,""),Rn(Ly,Oy,"esm2017")}iO();{const t=window.fetch;window.fetch=function(...e){return t.apply(this,e)}}const VC={apiKey:"AIzaSyBoIhBb6QRGWfNYOIzccPLRFAICpdI489o",authDomain:"friendly-2fb02.firebaseapp.com",projectId:"friendly-2fb02",storageBucket:"friendly-2fb02.firebasestorage.app",messagingSenderId:"278579009470",appId:"1:278579009470:web:d55a556495e5e5f8ef8bef",databaseURL:"https://friendly-2fb02-default-rtdb.europe-west1.firebasedatabase.app"};VC.apiKey||console.error("Firebase API key is missing. Check your .env file.");const Ad=NE(VC),lt=d2(Ad);R2(Ad);const oe=$D(Ad),sO=tO(Ad),GC=L.createContext(void 0);function oO({children:t}){const[e,n]=L.useState(null),[r,i]=L.useState(!0);L.useEffect(()=>{const o=eP(lt,l=>{n(l),i(!1)});return()=>o()},[]);const s={user:e,loading:r};return m.jsx(GC.Provider,{value:s,children:t})}function aO(){const t=L.useContext(GC);if(!t)throw new Error("useAuthContext must be used within AuthProvider");return t}const KC=L.createContext();function lO({children:t}){const[e,n]=L.useState(()=>{const i=localStorage.getItem("darkMode");return i?JSON.parse(i):!1});L.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(e)),e?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode")},[e]);const r=()=>{n(i=>!i)};return m.jsx(KC.Provider,{value:{darkMode:e,toggleDarkMode:r},children:t})}function uO(){const t=L.useContext(KC);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}const cO="_homeContainer_asfr5_1",dO="_eventsColumn_asfr5_13",hO="_mapColumn_asfr5_28",fO="_chatColumn_asfr5_42",Ru={homeContainer:cO,eventsColumn:dO,mapColumn:hO,chatColumn:fO};function Dn(){const{user:t,loading:e}=aO(),n=Nl(),r=L.useCallback(async(l,u)=>{await QR(lt,l,u)},[]),i=L.useCallback(async(l,u)=>{await YR(lt,l,u)},[]),s=L.useCallback(async()=>{await bv(lt),n("/giris")},[n]),o=L.useCallback(async()=>{await bv(lt),n("/giris")},[n]);return{user:t,loading:e,signInWithEmail:r,signUpWithEmail:i,signOut:s,logout:o}}const pO=["kaankilicarslanofficial@gmail.com"];function gi(t){return t?pO.includes(t.toLowerCase()):!1}const mO="_mapWrapper_1040z_1",gO="_mapContainer_1040z_7",_O="_layerControl_1040z_15",vO="_layerBtn_1040z_33",yO="_active_1040z_62",wO="_mapFooter_1040z_74",ti={mapWrapper:mO,mapContainer:gO,layerControl:_O,layerBtn:vO,active:yO,mapFooter:wO};function EO(){const t=L.useRef(null),e=L.useRef(null),[n,r]=L.useState("roadmap"),[i,s]=L.useState([]),o=L.useRef([]),{user:l}=Dn();L.useEffect(()=>{if(!t.current)return;const c={lat:39.9334,lng:32.8597};if(window.google&&window.google.maps)f(c);else{const h=setInterval(()=>{window.google&&window.google.maps&&(clearInterval(h),f(c))},100)}function f(h){const g=new window.google.maps.LatLngBounds(new window.google.maps.LatLng(39.4,32.4),new window.google.maps.LatLng(42.5,36.3)),w=new window.google.maps.Map(t.current,{zoom:11,center:h,mapTypeId:"roadmap",disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{position:window.google.maps.ControlPosition.LEFT_TOP},streetViewControl:!0,streetViewControlOptions:{position:window.google.maps.ControlPosition.LEFT_TOP},mapTypeControl:!1,fullscreenControl:!1,rotateControl:!1,scaleControl:!1,panControl:!1,minZoom:11,maxZoom:18,restriction:{latLngBounds:g,strictBounds:!1}});w.addListener("bounds_changed",()=>{const k=w.getBounds();k&&!g.contains(k.getCenter())&&w.fitBounds(g)}),e.current=w}return()=>{e.current&&e.current.setCenter({lat:39.9334,lng:32.8597})}},[]),L.useEffect(()=>{const c=se(oe,"events"),f=Pt(c,h=>{const g=[];h.exists()&&h.forEach(w=>{const k=w.val();k.isDeleted&&!gi(l==null?void 0:l.email)||k.coordinates&&g.push({id:w.key,...k})}),s(g)});return()=>f()},[l]),L.useEffect(()=>{!e.current||!window.google||(o.current.forEach(c=>c.setMap(null)),o.current=[],i.forEach(c=>{if(c.coordinates){const f={lat:typeof c.coordinates.lat=="function"?c.coordinates.lat():c.coordinates.lat,lng:typeof c.coordinates.lng=="function"?c.coordinates.lng():c.coordinates.lng},h=l&&c.participation?c.participation[l.uid]:null,g=new window.google.maps.Marker({position:f,map:e.current,title:c.title,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4a7ab5" width="32" height="32">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
              </svg>
            `),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,32)}}),w=gi(c.createdByEmail)?'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="display: inline-block; width: 18px; height: 18px; color: #4a7ab5; margin-left: 8px; flex-shrink: 0;"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z" /></svg>':"",k=`
          <div style="padding: 12px; min-width: 250px; font-family: Arial, sans-serif;">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
              <h3 style="margin: 0; color: #2d3748; font-size: 14px;">${c.title}</h3>
              ${w}
            </div>
            <p style="margin: 4px 0; color: #4a5568; font-size: 12px;">${c.description}</p>
            <p style="margin: 4px 0; font-weight: bold; color: #4a7ab5; font-size: 12px;"> ${c.location}</p>
            <p style="margin: 4px 0; color: #4a5568; font-size: 12px;"> ${c.date} |  ${c.time}</p>
            <p style="margin: 8px 0 0 0; color: #4a5568; font-size: 12px;"> ${c.participantCount||1} kii</p>
            <div style="display: flex; gap: 8px; margin-top: 10px;">
              <button id="approveBtn-${c.id}" style="flex: 1; padding: 6px 8px; border: none; border-radius: 4px; background: ${h==="approved"?"#4a7ab5":"#e2e8f0"}; color: ${h==="approved"?"white":"#2d3748"}; cursor: pointer; font-size: 11px; font-weight: 500;"> Katlacam</button>
              <button id="rejectBtn-${c.id}" style="flex: 1; padding: 6px 8px; border: none; border-radius: 4px; background: ${h==="rejected"?"#e53e3e":"#e2e8f0"}; color: ${h==="rejected"?"white":"#2d3748"}; cursor: pointer; font-size: 11px; font-weight: 500;"> Katlmayacam</button>
            </div>
          </div>
        `,N=new window.google.maps.InfoWindow({content:k});g.addListener("click",()=>{N.open(e.current,g),setTimeout(()=>{const T=document.getElementById(`approveBtn-${c.id}`),v=document.getElementById(`rejectBtn-${c.id}`);T&&T.addEventListener("click",async()=>{if(l)try{await Rr(se(oe,`events/${c.id}`),{[`participation/${l.uid}`]:"approved"})}catch(y){console.error("Katlm durumu gncellenirken hata:",y)}}),v&&v.addEventListener("click",async()=>{if(l)try{await Rr(se(oe,`events/${c.id}`),{[`participation/${l.uid}`]:"rejected"})}catch(y){console.error("Katlm durumu gncellenirken hata:",y)}})},0)}),o.current.push(g)}}))},[i,l]),L.useEffect(()=>(window.focusEventOnMap=c=>{console.log("MapContainer: Etkinlik zoomlanyor:",c);const f=i.find(h=>h.id===c);if(f&&f.coordinates&&e.current){console.log("MapContainer: Etkinlik bulundu, zoomlaniyor:",f);const h={lat:typeof f.coordinates.lat=="function"?f.coordinates.lat():f.coordinates.lat,lng:typeof f.coordinates.lng=="function"?f.coordinates.lng():f.coordinates.lng};e.current.setCenter(h),e.current.setZoom(16);const g=o.current.find((w,k)=>{const N=i[k];return N&&N.id===c});g&&(console.log("MapContainer: Marker bulundu, InfoWindow alyor"),window.google.maps.event.trigger(g,"click"))}else console.log("MapContainer: Etkinlik bulunamad veya harita hazr deil:",{eventId:c,targetEvent:f,mapReady:!!e.current})},()=>{delete window.focusEventOnMap}),[i]);const u=c=>{r(c),e.current&&e.current.setMapTypeId(c)};return m.jsxs("div",{className:ti.mapWrapper,children:[m.jsx("div",{ref:t,className:ti.mapContainer}),m.jsxs("div",{className:ti.layerControl,children:[m.jsx("button",{className:`${ti.layerBtn} ${n==="satellite"?ti.active:""}`,onClick:()=>u("satellite"),title:"Uydu Grnts",children:"Uydu"}),m.jsx("button",{className:`${ti.layerBtn} ${n==="roadmap"?ti.active:""}`,onClick:()=>u("roadmap"),title:"Harita",children:"Harita"})]}),m.jsx("div",{className:ti.mapFooter,children:"FriendlyGIS by kaanklcrsln"})]})}const CO="_chatPanel_27i2y_1",SO="_profilePanel_27i2y_18",kO="_profileContent_27i2y_32",TO="_profileAvatar_27i2y_38",IO="_profileAvatarPlaceholder_27i2y_47",xO="_profileInfo_27i2y_67",NO="_profileName_27i2y_74",RO="_profileUniversity_27i2y_85",PO="_profileStats_27i2y_96",AO="_statText_27i2y_105",bO="_statDivider_27i2y_113",DO="_chatContent_27i2y_137",hn={chatPanel:CO,profilePanel:SO,profileContent:kO,profileAvatar:TO,profileAvatarPlaceholder:IO,profileInfo:xO,profileName:NO,profileUniversity:RO,profileStats:PO,statText:AO,statDivider:bO,chatContent:DO},LO="_modal_1o14t_1",OO="_modalContent_1o14t_14",MO="_closeBtn_1o14t_29",jO="_loading_1o14t_54",FO="_content_1o14t_64",UO="_profileHeader_1o14t_70",BO="_avatarSection_1o14t_76",zO="_avatar_1o14t_76",$O="_avatarPlaceholder_1o14t_92",HO="_statsSection_1o14t_110",WO="_userName_1o14t_117",VO="_university_1o14t_128",GO="_stats_1o14t_110",KO="_statItem_1o14t_145",qO="_statLabel_1o14t_151",YO="_statValue_1o14t_161",QO="_bioSection_1o14t_171",XO="_bio_1o14t_171",nt={modal:LO,modalContent:OO,closeBtn:MO,loading:jO,content:FO,profileHeader:UO,avatarSection:BO,avatar:zO,avatarPlaceholder:$O,statsSection:HO,userName:WO,university:VO,stats:GO,statItem:KO,statLabel:qO,statValue:YO,bioSection:QO,bio:XO},JO="_modalOverlay_xzmmb_1",ZO="_modal_xzmmb_1",e4="_modalHeader_xzmmb_37",t4="_closeBtn_xzmmb_51",n4="_modalContent_xzmmb_65",r4="_loadingMessage_xzmmb_71",i4="_emptyMessage_xzmmb_78",s4="_eventsList_xzmmb_89",o4="_eventCard_xzmmb_95",a4="_eventHeader_xzmmb_109",l4="_eventDate_xzmmb_123",u4="_eventDescription_xzmmb_130",c4="_eventDetails_xzmmb_137",d4="_eventLocation_xzmmb_144",h4="_eventCategory_xzmmb_145",f4="_participantCount_xzmmb_153",jt={modalOverlay:JO,modal:ZO,modalHeader:e4,closeBtn:t4,modalContent:n4,loadingMessage:r4,emptyMessage:i4,eventsList:s4,eventCard:o4,eventHeader:a4,eventDate:l4,eventDescription:u4,eventDetails:c4,eventLocation:d4,eventCategory:h4,participantCount:f4};function qC({isOpen:t,onClose:e,userId:n}){const{user:r}=Dn(),[i,s]=L.useState([]),[o,l]=L.useState(!0),u=n||(r==null?void 0:r.uid);return L.useEffect(()=>{if(!t||!u)return;l(!0);const c=se(oe,"events"),f=Pt(c,h=>{const g=[];h.exists()&&h.forEach(w=>{const k=w.val();k.participants&&k.participants[u]&&!k.isDeleted&&g.push({id:w.key,...k})}),g.sort((w,k)=>new Date(w.date)-new Date(k.date)),s(g),l(!1)});return()=>f()},[t,u]),t?m.jsx("div",{className:jt.modalOverlay,onClick:e,children:m.jsxs("div",{className:jt.modal,onClick:c=>c.stopPropagation(),children:[m.jsxs("div",{className:jt.modalHeader,children:[m.jsx("h2",{children:"Paylalan Etkinlikler"}),m.jsx("button",{className:jt.closeBtn,onClick:e,children:""})]}),m.jsx("div",{className:jt.modalContent,children:o?m.jsx("div",{className:jt.loadingMessage,children:"Ykleniyor..."}):i.length===0?m.jsx("div",{className:jt.emptyMessage,children:m.jsx("p",{children:"Henz katlnd etkinlik yok"})}):m.jsx("div",{className:jt.eventsList,children:i.map(c=>m.jsxs("div",{className:jt.eventCard,children:[m.jsxs("div",{className:jt.eventHeader,children:[m.jsx("h3",{children:c.title}),m.jsx("span",{className:jt.eventDate,children:new Date(c.date).toLocaleDateString("tr-TR")})]}),m.jsx("p",{className:jt.eventDescription,children:c.description}),m.jsxs("div",{className:jt.eventDetails,children:[m.jsxs("span",{className:jt.eventLocation,children:[" ",c.location]}),m.jsx("span",{className:jt.eventCategory,children:c.category})]}),c.participants&&m.jsxs("div",{className:jt.participantCount,children:[" ",Object.keys(c.participants).length," katlmc"]})]},c.id))})})]})}):null}const p4="_modalOverlay_1sltx_1",m4="_modal_1sltx_1",g4="_modalHeader_1sltx_37",_4="_closeBtn_1sltx_51",v4="_modalContent_1sltx_65",y4="_loadingMessage_1sltx_71",w4="_emptyMessage_1sltx_78",E4="_friendsList_1sltx_89",C4="_friendCard_1sltx_95",S4="_friendAvatar_1sltx_113",k4="_friendAvatarPlaceholder_1sltx_121",T4="_friendInfo_1sltx_133",I4="_friendUniversity_1sltx_148",x4="_friendBio_1sltx_157",Zt={modalOverlay:p4,modal:m4,modalHeader:g4,closeBtn:_4,modalContent:v4,loadingMessage:y4,emptyMessage:w4,friendsList:E4,friendCard:C4,friendAvatar:S4,friendAvatarPlaceholder:k4,friendInfo:T4,friendUniversity:I4,friendBio:x4};function YC({isOpen:t,onClose:e,userId:n}){const{user:r}=Dn(),[i,s]=L.useState([]),[o,l]=L.useState({}),[u,c]=L.useState(!0),f=n||(r==null?void 0:r.uid);return L.useEffect(()=>{if(!t||!f)return;c(!0);const h=se(oe,`users/${f}/friends`),g=Pt(h,w=>{const k=[];if(w.exists()&&w.forEach(v=>{k.push(v.key)}),s(k),k.length===0){l({}),c(!1);return}const N={};let T=0;k.forEach(v=>{const y=se(oe,`users/${v}`);return Pt(y,P=>{P.exists()&&(N[v]=P.val()),T++,T===k.length&&(l(N),c(!1))})})});return()=>g()},[t,f]),t?m.jsx("div",{className:Zt.modalOverlay,onClick:e,children:m.jsxs("div",{className:Zt.modal,onClick:h=>h.stopPropagation(),children:[m.jsxs("div",{className:Zt.modalHeader,children:[m.jsx("h2",{children:"Arkadalar"}),m.jsx("button",{className:Zt.closeBtn,onClick:e,children:""})]}),m.jsx("div",{className:Zt.modalContent,children:u?m.jsx("div",{className:Zt.loadingMessage,children:"Ykleniyor..."}):i.length===0?m.jsx("div",{className:Zt.emptyMessage,children:m.jsx("p",{children:"Henz arkada yok"})}):m.jsx("div",{className:Zt.friendsList,children:i.map(h=>{const g=o[h];return g?m.jsxs("div",{className:Zt.friendCard,children:[g.profilePicture?m.jsx("img",{src:g.profilePicture,alt:g.displayName,className:Zt.friendAvatar}):m.jsx("div",{className:Zt.friendAvatarPlaceholder,children:""}),m.jsxs("div",{className:Zt.friendInfo,children:[m.jsx("h3",{children:g.displayName}),g.university&&m.jsx("p",{className:Zt.friendUniversity,children:g.university}),g.bio&&m.jsx("p",{className:Zt.friendBio,children:g.bio})]})]},h):null})})})]})}):null}function N4({userId:t,isOpen:e,onClose:n}){const[r,i]=L.useState({displayName:"",profilePicture:null,university:"",bio:""}),[s,o]=L.useState({events:0,friends:0}),[l,u]=L.useState(!0),[c,f]=L.useState(!1),[h,g]=L.useState(!1);return L.useEffect(()=>{if(!e||!t)return;u(!0);const w=se(oe,`users/${t}`),k=Pt(w,S=>{const P=S.val();P&&i({displayName:P.displayName||"Kullanc",profilePicture:P.profilePicture||null,university:P.university||"",bio:P.bio||""})}),N=se(oe,"events"),T=Pt(N,S=>{let P=0;S.exists()&&S.forEach(F=>{const B=F.val();B.participants&&B.participants[t]&&P++}),o(F=>({...F,events:P}))}),v=se(oe,`users/${t}/friends`),y=Pt(v,S=>{let P=0;S.exists()&&(P=Object.keys(S.val()).length),o(F=>({...F,friends:P})),u(!1)});return()=>{k(),T(),y()}},[e,t]),e?m.jsx("div",{className:nt.modal,onClick:n,children:m.jsxs("div",{className:nt.modalContent,onClick:w=>w.stopPropagation(),children:[m.jsx("button",{className:nt.closeBtn,onClick:n,children:""}),l?m.jsx("div",{className:nt.loading,children:"Ykleniyor..."}):m.jsxs("div",{className:nt.content,children:[m.jsxs("div",{className:nt.profileHeader,children:[m.jsx("div",{className:nt.avatarSection,children:r.profilePicture?m.jsx("img",{src:r.profilePicture,alt:"Profil",className:nt.avatar}):m.jsx("div",{className:nt.avatarPlaceholder,children:""})}),m.jsxs("div",{className:nt.statsSection,children:[m.jsx("h2",{className:nt.userName,children:r.displayName}),r.university&&m.jsx("p",{className:nt.university,children:r.university}),m.jsxs("div",{className:nt.stats,children:[m.jsxs("div",{className:nt.statItem,onClick:()=>f(!0),style:{cursor:"pointer"},children:[m.jsx("span",{className:nt.statLabel,children:"Etkinlik"}),m.jsx("span",{className:nt.statValue,children:s.events})]}),m.jsxs("div",{className:nt.statItem,onClick:()=>g(!0),style:{cursor:"pointer"},children:[m.jsx("span",{className:nt.statLabel,children:"Arkada"}),m.jsx("span",{className:nt.statValue,children:s.friends})]})]})]})]}),r.bio&&m.jsx("div",{className:nt.bioSection,children:m.jsx("p",{className:nt.bio,children:r.bio})})]}),m.jsx(qC,{userId:t,isOpen:c,onClose:()=>f(!1)}),m.jsx(YC,{userId:t,isOpen:h,onClose:()=>g(!1)})]})}):null}const R4="_chatContainer_82wss_1",P4="_chatHeader_82wss_16",A4="_userCount_82wss_43",b4="_messagesList_82wss_56",D4="_emptyState_82wss_109",L4="_message_82wss_56",O4="_own_82wss_147",M4="_messageHeader_82wss_159",j4="_userNameContainer_82wss_166",F4="_userName_82wss_166",U4="_verifiedBadge_82wss_182",B4="_messageHeaderRight_82wss_203",z4="_timestamp_82wss_209",$4="_deleteMessageBtn_82wss_214",H4="_messageContent_82wss_237",W4="_inputForm_82wss_252",V4="_inputWrapper_82wss_269",G4="_input_82wss_252",K4="_charCount_82wss_303",q4="_errorMessage_82wss_314",Y4="_sendBtn_82wss_336",rt={chatContainer:R4,chatHeader:P4,userCount:A4,messagesList:b4,emptyState:D4,message:L4,own:O4,messageHeader:M4,userNameContainer:j4,userName:F4,verifiedBadge:U4,messageHeaderRight:B4,timestamp:z4,deleteMessageBtn:$4,messageContent:H4,inputForm:W4,inputWrapper:V4,input:G4,charCount:K4,errorMessage:q4,sendBtn:Y4},Q4=[/fuck|shit|asshole/gi,/spam+/gi,/(.)\1{4,}/g],X4=t=>{const e=t.trim();if(!e)return{valid:!1,error:"Mesaj bo olamaz"};if(e.length>50)return{valid:!1,error:"Mesaj max 50 karaktere kadar olabilir"};if(/[^\w\s,.!?\-'"()]/gu.test(e))return{valid:!1,error:"Emoji kullanlamaz"};for(const r of Q4)if(r.test(e))return{valid:!1,error:"Mesajda uygunsuz ierik bulundu"};return{valid:!0}};function J4(){const[t,e]=L.useState([]),[n,r]=L.useState(""),[i,s]=L.useState(!1),[o,l]=L.useState(""),[u,c]=L.useState(!0),f=L.useRef(null),h=L.useRef(!0),{user:g}=Dn();L.useEffect(()=>{if(!g)return;const v=se(oe,"chat/general/messages"),y=LD(v,DD("timestamp")),S=Pt(y,P=>{const F=[];P.exists()&&P.forEach(B=>{const _=B.val();F.push({id:B.key,..._})}),e(F)});return()=>S()},[g]),L.useEffect(()=>{f.current&&h.current&&(f.current.scrollTop=f.current.scrollHeight)},[t]);const w=()=>{if(f.current){const{scrollTop:v,scrollHeight:y,clientHeight:S}=f.current;h.current=y-v-S<20}},k=async v=>{if(v.preventDefault(),!g){console.error("GeneralChat: Kullanc giri yapmam!");return}console.log("GeneralChat: Mesaj gnderiliyor...",{text:n,userId:g.uid});const y=X4(n);if(!y.valid){console.warn("GeneralChat: Validasyon hatas:",y.error),l(y.error),setTimeout(()=>l(""),3e3);return}s(!0),l("");try{const S=new Date,P={text:n.trim(),userId:g.uid,userEmail:g.email,timestamp:S.toISOString(),displayName:g.displayName||g.email.split("@")[0]};console.log("GeneralChat: Firebase'e yazlyor...",P),await Ro(se(oe,"chat/general/messages"),P),console.log("GeneralChat: Mesaj baaryla gnderildi!"),r(""),h.current=!0}catch(S){console.error("GeneralChat: Mesaj gnderme hatas:",S),l("Mesaj gnderilemedi: "+S.message)}finally{s(!1)}},N=async v=>{if(window.confirm("Bu mesaj silmek istediinize emin misiniz?"))try{await Yu(se(oe,`chat/general/messages/${v}`))}catch(y){console.error("Mesaj silinirken hata:",y)}},T=v=>v===(g==null?void 0:g.uid);return m.jsxs("div",{className:rt.chatContainer,children:[m.jsxs("div",{className:rt.chatHeader,children:[m.jsx("h2",{children:"General Chat"}),m.jsxs("span",{className:rt.userCount,children:[t.length," mesaj"]})]}),m.jsx("div",{className:rt.messagesList,ref:f,onScroll:w,children:t.length===0?m.jsx("div",{className:rt.emptyState,children:m.jsx("p",{children:"Henz mesaj yok. lk mesaj gnder!"})}):t.map(v=>m.jsxs("div",{className:`${rt.message} ${T(v.userId)?rt.own:""}`,children:[m.jsxs("div",{className:rt.messageHeader,children:[m.jsxs("div",{className:rt.userNameContainer,children:[m.jsx("span",{className:rt.userName,children:T(v.userId)?"Sen":v.displayName}),gi(v.userEmail)&&m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:rt.verifiedBadge,title:"Admin",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})})]}),m.jsxs("div",{className:rt.messageHeaderRight,children:[m.jsx("span",{className:rt.timestamp,children:new Date(v.timestamp).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}),gi(g==null?void 0:g.email)&&m.jsx("button",{className:rt.deleteMessageBtn,onClick:()=>N(v.id),title:"Mesaj sil",children:""})]})]}),m.jsx("div",{className:rt.messageContent,children:m.jsx("p",{children:v.text})})]},v.id))}),m.jsxs("form",{onSubmit:k,className:rt.inputForm,children:[m.jsxs("div",{className:rt.inputWrapper,children:[m.jsx("input",{type:"text",value:n,onChange:v=>{console.log("GeneralChat: Input deiti:",v.target.value),r(v.target.value),l("")},onFocus:()=>{c(!1)},onKeyPress:v=>{console.log("GeneralChat: Key pressed:",v.key),v.key==="Enter"&&(console.log("GeneralChat: Enter tuuna basld"),v.preventDefault(),k(v))},placeholder:"Mesaj yaz...",disabled:i,maxLength:"50",className:rt.input}),m.jsxs("span",{className:rt.charCount,children:[n.length,"/50"]})]}),o&&m.jsx("div",{className:rt.errorMessage,children:o}),m.jsx("button",{type:"submit",disabled:i||!n.trim(),className:rt.sendBtn,onClick:v=>{console.log("GeneralChat: Gnder butonu tkland",{loading:i,messageText:n})},children:i?"...":"Gnder"})]})]})}function Z4(){const{user:t}=Dn(),[e,n]=L.useState(!1),[r,i]=L.useState(null),[s,o]=L.useState(!1),[l,u]=L.useState(!1),[c,f]=L.useState({displayName:"",profilePicture:null,university:""}),[h,g]=L.useState({events:0,friends:0});return L.useEffect(()=>{if(!(t!=null&&t.uid))return;const w=se(oe,`users/${t.uid}`),k=Pt(w,S=>{const P=S.val();P&&f({displayName:P.displayName||"Kullanc",profilePicture:P.profilePicture||null,university:P.university||""})}),N=se(oe,"events"),T=Pt(N,S=>{let P=0;S.exists()&&S.forEach(F=>{const B=F.val();B.participants&&B.participants[t.uid]&&P++}),g(F=>({...F,events:P}))}),v=se(oe,`users/${t.uid}/friends`),y=Pt(v,S=>{let P=0;S.exists()&&S.forEach(()=>{P++}),g(F=>({...F,friends:P}))});return()=>{k(),T(),y()}},[t]),m.jsxs("div",{className:hn.chatPanel,children:[m.jsx("div",{className:hn.profilePanel,children:m.jsxs("div",{className:hn.profileContent,children:[c.profilePicture?m.jsx("img",{src:c.profilePicture,alt:"Profil",className:hn.profileAvatar}):m.jsx("div",{className:hn.profileAvatarPlaceholder,children:""}),m.jsxs("div",{className:hn.profileInfo,children:[m.jsx("h4",{className:hn.profileName,children:c.displayName}),m.jsx("p",{className:hn.profileUniversity,children:c.university||"niversite belirtilmemi"}),m.jsxs("div",{className:hn.profileStats,children:[m.jsxs("span",{className:hn.statText,onClick:()=>o(!0),style:{cursor:"pointer"},children:[h.events," Etkinlik"]}),m.jsx("span",{className:hn.statDivider,children:"|"}),m.jsxs("span",{className:hn.statText,onClick:()=>u(!0),style:{cursor:"pointer"},children:[h.friends," Arkada"]})]})]})]})}),m.jsx("div",{className:hn.chatContent,children:m.jsx(J4,{})}),m.jsx(N4,{userId:r,isOpen:e,onClose:()=>n(!1)}),m.jsx(qC,{userId:t==null?void 0:t.uid,isOpen:s,onClose:()=>o(!1)}),m.jsx(YC,{userId:t==null?void 0:t.uid,isOpen:l,onClose:()=>u(!1)})]})}const eM="_eventsPanel_m1uj3_1",tM="_header_m1uj3_16",nM="_categoryTabs_m1uj3_37",rM="_categoryTab_m1uj3_37",iM="_active_m1uj3_75",sM="_eventsList_m1uj3_87",oM="_eventCard_m1uj3_100",aM="_deleted_m1uj3_108",lM="_eventHeader_m1uj3_130",uM="_eventTitleSection_m1uj3_138",cM="_creatorInfo_m1uj3_152",dM="_creatorName_m1uj3_159",hM="_creatorLabel_m1uj3_164",fM="_headerIcons_m1uj3_181",pM="_verifiedBadge_m1uj3_188",mM="_deleteBtn_m1uj3_227",gM="_restoreBtn_m1uj3_249",_M="_eventDetails_m1uj3_308",vM="_detail_m1uj3_315",yM="_detailIcon_m1uj3_323",wM="_participationActions_m1uj3_362",EM="_participationBtn_m1uj3_368",CM="_approved_m1uj3_396",SM="_rejected_m1uj3_408",we={eventsPanel:eM,header:tM,categoryTabs:nM,categoryTab:rM,active:iM,eventsList:sM,eventCard:oM,deleted:aM,eventHeader:lM,eventTitleSection:uM,creatorInfo:cM,creatorName:dM,creatorLabel:hM,headerIcons:fM,verifiedBadge:pM,deleteBtn:mM,restoreBtn:gM,eventDetails:_M,detail:vM,detailIcon:yM,participationActions:wM,participationBtn:EM,approved:CM,rejected:SM},kM=["Sosyal","Spor","Sanat","Eitim","Dier"];function TM(){const[t,e]=L.useState([]),[n,r]=L.useState("Sosyal"),[i,s]=L.useState(!1),{user:o}=Dn();L.useEffect(()=>{const w=se(oe,"events"),k=Pt(w,async N=>{const T=[];N.exists()&&N.forEach(v=>{T.push({id:v.key,...v.val()})}),T.sort((v,y)=>new Date(v.date)-new Date(y.date)),await l(T),e(T)});return()=>k()},[]);const l=async w=>{var N;const k={};for(const T of w)if(T.createdBy&&!T.createdByName)try{const v=se(oe,`users/${T.createdBy}`),y=await Cl(v);if(y.exists()){const S=y.val(),P=S.displayName||((N=S.email)==null?void 0:N.split("@")[0])||"Bilinmeyen";k[`events/${T.id}/createdByName`]=P}}catch(v){console.error("Kullanc bilgisi yklenirken hata:",v)}if(Object.keys(k).length>0)try{await Rr(se(oe),k),console.log("Eksik creator name'ler gncellendi:",Object.keys(k).length)}catch(T){console.error("Creator name gncellenirken hata:",T)}},u=async(w,k)=>{var N;if(o)try{if(await Rr(se(oe,`events/${w}`),{[`participation/${o.uid}`]:k}),k==="joining"){const T=se(oe,`events/${w}`),v=await Cl(T);if(v.exists()){const y=v.val(),S=y.createdBy;if(S&&S!==o.uid){const P=Ro(se(oe,`notifications/${S}`));await Lr(P,{type:"event_participation",from:o.uid,eventId:w,eventTitle:y.title,message:`${o.displayName||((N=o.email)==null?void 0:N.split("@")[0])||"Bir kullanc"} "${y.title}" etkinliine gelmeyi kabul etti!`,timestamp:Date.now(),read:!1}),console.log("Etkinlik katlm bildirimi gnderildi")}}}}catch(T){console.error("Katlm durumu gncellenirken hata:",T)}},c=async w=>{if(window.confirm("Bu etkinlii silmek istediinize emin misiniz?"))try{await Rr(se(oe,`events/${w}`),{isDeleted:!0,deletedAt:new Date().toISOString(),deletedBy:o.uid})}catch(k){console.error("Etkinlik silinirken hata:",k)}},f=async w=>{try{await Rr(se(oe,`events/${w}`),{isDeleted:!1,deletedAt:null,deletedBy:null})}catch(k){console.error("Etkinlik geri yklenirken hata:",k)}},h=t.filter(w=>{const k=w.category===n;return gi(o==null?void 0:o.email)&&i?k&&w.isDeleted:k&&!w.isDeleted}),g=w=>!o||!w.participation?null:w.participation[o.uid];return m.jsxs("div",{className:we.eventsPanel,children:[m.jsx("div",{className:we.header,children:m.jsx("h2",{children:"Etkinlikler"})}),m.jsxs("div",{className:we.categoryTabs,children:[kM.map(w=>m.jsx("button",{className:`${we.categoryTab} ${n===w?we.active:""}`,onClick:()=>{r(w),s(!1)},children:w},w)),gi(o==null?void 0:o.email)&&m.jsx("button",{className:`${we.categoryTab} ${i?we.active:""}`,onClick:()=>s(!i),title:i?"Normal etkinlikleri gster":"Silinen etkinlikleri gster",children:""})]}),m.jsx("div",{className:we.eventsList,children:h.map(w=>{var N;const k=g(w);return m.jsxs("div",{className:`${we.eventCard} ${w.isDeleted?we.deleted:""}`,children:[m.jsxs("div",{className:we.eventHeader,children:[m.jsxs("div",{className:we.eventTitleSection,children:[m.jsx("h3",{children:w.title}),m.jsxs("div",{className:we.creatorInfo,children:[m.jsx("span",{className:we.creatorName,children:w.createdByName||((N=w.createdByEmail)==null?void 0:N.split("@")[0])||"Bilinmeyen"}),m.jsx("span",{className:we.creatorLabel,children:"tarafndan oluturuldu"})]})]}),m.jsxs("div",{className:we.headerIcons,children:[gi(w.createdByEmail)&&m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:we.verifiedBadge,title:"Admin tarafndan oluturuldu",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}),gi(o==null?void 0:o.email)&&m.jsx(m.Fragment,{children:w.isDeleted?m.jsx("button",{className:we.restoreBtn,onClick:()=>f(w.id),title:"Etkinlii geri ykle",children:""}):m.jsx("button",{className:we.deleteBtn,onClick:()=>c(w.id),title:"Etkinlii sil",children:""})})]})]}),m.jsxs("div",{className:we.eventDetails,children:[m.jsxs("div",{className:we.detail,children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:we.detailIcon,children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})]}),m.jsx("span",{children:w.location})]}),m.jsxs("div",{className:we.detail,children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:we.detailIcon,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 2.994v2.25m10.5-2.25v2.25m-14.252 13.5V7.491a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v11.251m-18 0a2.25 2.25 0 0 0 2.25 2.25h13.5a2.25 2.25 0 0 0 2.25-2.25m-18 0v-7.5a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v7.5m-6.75-6h2.25m-9 2.25h4.5m.002-2.25h.005v.006H12v-.006Zm-.001 4.5h.006v.006h-.006v-.005Zm-2.25.001h.005v.006H9.75v-.006Zm-2.25 0h.005v.005h-.006v-.005Zm6.75-2.247h.005v.005h-.005v-.005Zm0 2.247h.006v.006h-.006v-.006Zm2.25-2.248h.006V15H16.5v-.005Z"})}),m.jsx("span",{children:w.date})]}),m.jsxs("div",{className:we.detail,children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:we.detailIcon,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),m.jsx("span",{children:w.time})]})]}),!w.isDeleted&&m.jsxs("div",{className:we.participationActions,children:[m.jsx("button",{className:`${we.participationBtn} ${k==="approved"?we.approved:""}`,onClick:()=>u(w.id,"approved"),title:"Katlacam",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}),m.jsx("button",{className:`${we.participationBtn} ${k==="rejected"?we.rejected:""}`,onClick:()=>u(w.id,"rejected"),title:"Katlmayacam",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]})]},w.id)})})]})}const IM="_layout_ua1ho_1",xM="_main_ua1ho_14",My={layout:IM,main:xM},NM="_modal_yvvfm_1",RM="_modalContent_yvvfm_14",PM="_header_yvvfm_30",AM="_closeBtn_yvvfm_47",bM="_searchContainer_yvvfm_69",DM="_searchInput_yvvfm_73",LM="_message_yvvfm_97",OM="_success_yvvfm_105",MM="_error_yvvfm_110",jM="_results_yvvfm_115",FM="_loading_yvvfm_120",UM="_noResults_yvvfm_120",BM="_userItem_yvvfm_131",zM="_selected_yvvfm_159",$M="_userInfo_yvvfm_164",HM="_avatar_yvvfm_170",WM="_userDetails_yvvfm_192",VM="_userName_yvvfm_196",GM="_userEmail_yvvfm_206",KM="_userUniversity_yvvfm_212",qM="_addBtn_yvvfm_218",YM="_sentBadge_yvvfm_233",QM="_profilePreview_yvvfm_238",XM="_previewHeader_yvvfm_246",JM="_previewContent_yvvfm_266",ZM="_previewAvatar_yvvfm_270",ej="_bio_yvvfm_299",tj="_sendRequestBtn_yvvfm_305",Re={modal:NM,modalContent:RM,header:PM,closeBtn:AM,searchContainer:bM,searchInput:DM,message:LM,success:OM,error:MM,results:jM,loading:FM,noResults:UM,userItem:BM,selected:zM,userInfo:$M,avatar:HM,userDetails:WM,userName:VM,userEmail:GM,userUniversity:KM,addBtn:qM,sentBadge:YM,profilePreview:QM,previewHeader:XM,previewContent:JM,previewAvatar:ZM,bio:ej,sendRequestBtn:tj};function nj({isOpen:t,onClose:e}){const{user:n}=Dn(),[r,i]=L.useState(""),[s,o]=L.useState([]),[l,u]=L.useState([]),[c,f]=L.useState(!0),[h,g]=L.useState(""),[w,k]=L.useState(null);L.useEffect(()=>{if(!t||!n){console.log("AddFriendModal: Modal kapal veya user yok",{isOpen:t,user:!!n});return}console.log("AddFriendModal: Kullanclar ykleniyor..."),f(!0);const T=se(oe,"users"),v=Pt(T,y=>{console.log("AddFriendModal: Snapshot alnd",{exists:y.exists()});const S=[];y.exists()?(y.forEach(P=>{P.key!==n.uid&&S.push({uid:P.key,...P.val()})}),console.log("AddFriendModal: Kullanclar bulundu:",S.length,S)):console.log("AddFriendModal: Snapshot bo - kullanc yok"),o(S),u(S),f(!1)},y=>{console.error("AddFriendModal: Kullanclar yklenirken hata:",y),g("Kullanclar yklenemedi: "+y.message),f(!1)});return()=>v()},[n,t]),L.useEffect(()=>{if(!r.trim()){u(s);return}const T=s.filter(v=>{var y,S,P;return((y=v.displayName)==null?void 0:y.toLowerCase().includes(r.toLowerCase()))||((S=v.email)==null?void 0:S.toLowerCase().includes(r.toLowerCase()))||((P=v.university)==null?void 0:P.toLowerCase().includes(r.toLowerCase()))});u(T)},[r,s]);const N=async T=>{try{console.log("AddFriendModal: stek gnderiliyor...",{from:n.uid,to:T});const v=se(oe,"friendRequests"),y=await Cl(v);if(y.exists()){let F=!1;if(y.forEach(B=>{B.forEach(_=>{const E=_.val();E.from===n.uid&&E.to===T&&E.status==="pending"&&(F=!0)})}),F){g("Bu kullancya zaten istek gnderilmi!");return}}const S=se(oe,`friendRequests/${T}`),P=Ro(S);await Lr(P,{from:n.uid,to:T,status:"pending",createdAt:Date.now()}),console.log("AddFriendModal: stek baaryla gnderildi!"),g("Arkadalk istei gnderildi! "),u(F=>F.map(B=>B.uid===T?{...B,requestSent:!0}:B)),k(null)}catch(v){console.error("AddFriendModal: stek gnderme hatas:",v),g("stek gnderilirken hata olutu: "+v.message)}};return t?m.jsx("div",{className:Re.modal,onClick:e,children:m.jsxs("div",{className:Re.modalContent,onClick:T=>T.stopPropagation(),children:[m.jsxs("div",{className:Re.header,children:[m.jsx("h3",{children:"Arkada Ekle"}),m.jsx("button",{className:Re.closeBtn,onClick:e,children:""})]}),m.jsx("div",{className:Re.searchContainer,children:m.jsx("input",{type:"text",placeholder:"Kullanc ara...",value:r,onChange:T=>i(T.target.value),className:Re.searchInput})}),h&&m.jsx("div",{className:`${Re.message} ${h.includes("")?Re.success:Re.error}`,children:h}),m.jsx("div",{className:Re.results,children:c?m.jsx("p",{className:Re.loading,children:"Ykleniyor..."}):l.length>0?l.map(T=>m.jsxs("div",{className:`${Re.userItem} ${(w==null?void 0:w.uid)===T.uid?Re.selected:""}`,onClick:()=>k(T),children:[m.jsxs("div",{className:Re.userInfo,children:[m.jsx("div",{className:Re.avatar,children:T.profilePicture?m.jsx("img",{src:T.profilePicture,alt:"Profil"}):""}),m.jsxs("div",{className:Re.userDetails,children:[m.jsx("p",{className:Re.userName,children:T.displayName||"simsiz"}),m.jsx("p",{className:Re.userEmail,children:T.email}),T.university&&m.jsx("p",{className:Re.userUniversity,children:T.university})]})]}),T.requestSent?m.jsx("span",{className:Re.sentBadge,children:" Gnderildi"}):m.jsx("button",{onClick:v=>{v.stopPropagation(),N(T.uid)},className:Re.addBtn,children:" Ekle"})]},T.uid)):m.jsx("p",{className:Re.noResults,children:"Kullanc bulunamad"})}),w&&m.jsxs("div",{className:Re.profilePreview,children:[m.jsxs("div",{className:Re.previewHeader,children:[m.jsx("h4",{children:"Profil Bilgileri"}),m.jsx("button",{onClick:()=>k(null),children:""})]}),m.jsxs("div",{className:Re.previewContent,children:[m.jsx("div",{className:Re.previewAvatar,children:w.profilePicture?m.jsx("img",{src:w.profilePicture,alt:"Profil"}):""}),m.jsx("h3",{children:w.displayName||"simsiz"}),m.jsx("p",{children:w.email}),w.university&&m.jsxs("p",{children:[" ",w.university]}),w.department&&m.jsxs("p",{children:[" ",w.department]}),w.bio&&m.jsxs("p",{className:Re.bio,children:['"',w.bio,'"']}),!w.requestSent&&m.jsx("button",{onClick:()=>N(w.uid),className:Re.sendRequestBtn,children:" Arkadalk stei Gnder"})]})]})]})}):null}const rj="_panel_1o8cb_1",ij="_panelContent_1o8cb_8",sj="_header_1o8cb_25",oj="_closeBtn_1o8cb_42",aj="_tabs_1o8cb_64",lj="_tab_1o8cb_64",uj="_active_1o8cb_99",cj="_badge_1o8cb_109",dj="_content_1o8cb_123",hj="_loading_1o8cb_133",fj="_empty_1o8cb_133",pj="_requestItem_1o8cb_144",mj="_requestInfo_1o8cb_158",gj="_avatar_1o8cb_164",_j="_details_1o8cb_186",vj="_name_1o8cb_190",yj="_university_1o8cb_201",wj="_time_1o8cb_212",Ej="_actions_1o8cb_218",Cj="_acceptBtn_1o8cb_223",Sj="_rejectBtn_1o8cb_223",kj="_notificationItem_1o8cb_247",Tj="_unread_1o8cb_263",Ij="_notificationContent_1o8cb_268",xj="_notificationMessage_1o8cb_272",Nj="_notificationTime_1o8cb_278",Rj="_deleteBtn_1o8cb_284",Ee={panel:rj,panelContent:ij,header:sj,closeBtn:oj,tabs:aj,tab:lj,active:uj,badge:cj,content:dj,loading:hj,empty:fj,requestItem:pj,requestInfo:mj,avatar:gj,details:_j,name:vj,university:yj,time:wj,actions:Ej,acceptBtn:Cj,rejectBtn:Sj,notificationItem:kj,unread:Tj,notificationContent:Ij,notificationMessage:xj,notificationTime:Nj,deleteBtn:Rj};function Pj({isOpen:t,onClose:e}){const[n,r]=L.useState([]),[i,s]=L.useState([]),[o,l]=L.useState("requests"),[u,c]=L.useState(!0);L.useEffect(()=>{if(!t||!lt.currentUser)return;const T=lt.currentUser.uid,v=se(oe,`friendRequests/${T}`),y=Pt(v,async F=>{const B=F.val();if(B){const _=await Promise.all(Object.entries(B).map(async([E,I])=>{const x=se(oe,`users/${I.from}`),D=(await Cl(x)).val();return{id:E,...I,senderName:(D==null?void 0:D.displayName)||"Kullanc",senderEmail:(D==null?void 0:D.email)||"",senderAvatar:(D==null?void 0:D.profilePicture)||null,senderUniversity:(D==null?void 0:D.university)||null}}));s(_.filter(E=>E.status==="pending"))}else s([]);c(!1)}),S=se(oe,`notifications/${T}`),P=Pt(S,F=>{const B=F.val();if(B){const _=Object.entries(B).map(([E,I])=>({id:E,...I})).sort((E,I)=>I.timestamp-E.timestamp);r(_)}else r([])});return()=>{y(),P()}},[t]);const f=async T=>{const v=lt.currentUser.uid;try{console.log("NotificationPanel: Arkadalk istei kabul ediliyor...",{userId:v,from:T.from});const y=se(oe,`users/${v}/friends/${T.from}`),S=se(oe,`users/${T.from}/friends/${v}`);await Lr(y,{addedAt:Date.now(),status:"accepted"}),await Lr(S,{addedAt:Date.now(),status:"accepted"}),console.log("NotificationPanel: Arkada listeleri gncellendi");const P=se(oe,`friendRequests/${v}/${T.id}`);await Yu(P),console.log("NotificationPanel: Arkadalk istei silindi");const F=Ro(se(oe,`notifications/${T.from}`));await Lr(F,{type:"friend_accepted",from:v,message:`${lt.currentUser.displayName||"Bir kullanc"} arkadalk isteinizi kabul etti`,timestamp:Date.now(),read:!1}),console.log("NotificationPanel: Kabul bildirim gnderildi")}catch(y){console.error("Error accepting friend request:",y)}},h=async T=>{const v=lt.currentUser.uid;try{console.log("NotificationPanel: Arkadalk istei reddediliyor...",{userId:v,requestId:T.id});const y=se(oe,`friendRequests/${v}/${T.id}`);await Yu(y),console.log("NotificationPanel: Arkadalk istei baaryla reddedildi")}catch(y){console.error("NotificationPanel: Red hatas:",y)}},g=async T=>{const v=lt.currentUser.uid,y=se(oe,`notifications/${v}/${T.id}`);await Rr(y,{read:!0})},w=async T=>{console.log("NotificationPanel: Bildirime tkland:",T),await g(T),T.type==="new_event"&&T.eventId&&(console.log("NotificationPanel: Etkinlik bildirimi, haritay zoomlayacam:",T.eventId),window.focusEventOnMap?(window.focusEventOnMap(T.eventId),e()):console.log("NotificationPanel: focusEventOnMap fonksiyonu bulunamad"))},k=async T=>{const v=lt.currentUser.uid,y=se(oe,`notifications/${v}/${T.id}`);await Yu(y)},N=T=>{const v=new Date(T),S=new Date-v;return S<6e4?"Az nce":S<36e5?`${Math.floor(S/6e4)} dakika nce`:S<864e5?`${Math.floor(S/36e5)} saat nce`:v.toLocaleDateString("tr-TR")};return t?m.jsx("div",{className:Ee.panel,children:m.jsxs("div",{className:Ee.panelContent,children:[m.jsxs("div",{className:Ee.header,children:[m.jsx("h3",{children:"Bildirimler"}),m.jsx("button",{className:Ee.closeBtn,onClick:e,children:""})]}),m.jsxs("div",{className:Ee.tabs,children:[m.jsxs("button",{className:`${Ee.tab} ${o==="requests"?Ee.active:""}`,onClick:()=>l("requests"),children:["stekler ",i.length>0&&m.jsx("span",{className:Ee.badge,children:i.length})]}),m.jsxs("button",{className:`${Ee.tab} ${o==="notifications"?Ee.active:""}`,onClick:()=>l("notifications"),children:["Bildirimler ",n.filter(T=>!T.read).length>0&&m.jsx("span",{className:Ee.badge,children:n.filter(T=>!T.read).length})]})]}),m.jsx("div",{className:Ee.content,children:u?m.jsx("div",{className:Ee.loading,children:"Ykleniyor..."}):o==="requests"?i.length===0?m.jsx("div",{className:Ee.empty,children:"Bekleyen arkadalk istei yok"}):i.map(T=>m.jsxs("div",{className:Ee.requestItem,children:[m.jsxs("div",{className:Ee.requestInfo,children:[m.jsx("div",{className:Ee.avatar,children:T.senderAvatar?m.jsx("img",{src:T.senderAvatar,alt:""}):""}),m.jsxs("div",{className:Ee.details,children:[m.jsx("p",{className:Ee.name,children:T.senderName}),T.senderUniversity&&m.jsx("p",{className:Ee.university,children:T.senderUniversity}),m.jsx("p",{className:Ee.time,children:N(T.timestamp)})]})]}),m.jsxs("div",{className:Ee.actions,children:[m.jsx("button",{className:Ee.acceptBtn,onClick:()=>f(T),children:""}),m.jsx("button",{className:Ee.rejectBtn,onClick:()=>h(T),children:""})]})]},T.id)):n.length===0?m.jsx("div",{className:Ee.empty,children:"Bildirim yok"}):n.map(T=>m.jsxs("div",{className:`${Ee.notificationItem} ${T.read?"":Ee.unread}`,onClick:()=>w(T),children:[m.jsxs("div",{className:Ee.notificationContent,children:[m.jsx("p",{className:Ee.notificationMessage,children:T.message}),m.jsx("p",{className:Ee.notificationTime,children:N(T.timestamp)})]}),m.jsx("button",{className:Ee.deleteBtn,onClick:v=>{v.stopPropagation(),k(T)},children:""})]},T.id))})]})}):null}const Aj="_modal_1vl3x_1",bj="_modalContent_1vl3x_14",Dj="_header_1vl3x_30",Lj="_closeBtn_1vl3x_47",Oj="_message_1vl3x_69",Mj="_success_1vl3x_77",jj="_error_1vl3x_82",Fj="_form_1vl3x_87",Uj="_topSection_1vl3x_93",Bj="_avatarSection_1vl3x_99",zj="_rightSection_1vl3x_106",$j="_avatarWrapper_1vl3x_113",Hj="_avatar_1vl3x_99",Wj="_avatarPlaceholder_1vl3x_127",Vj="_avatarEditBtn_1vl3x_139",Gj="_avatarHint_1vl3x_173",Kj="_field_1vl3x_179",qj="_disabled_1vl3x_216",Yj="_charCount_1vl3x_232",Qj="_socialLinksContainer_1vl3x_238",Xj="_socialInput_1vl3x_244",Jj="_addLinkBtn_1vl3x_248",Zj="_saveBtn_1vl3x_267",We={modal:Aj,modalContent:bj,header:Dj,closeBtn:Lj,message:Oj,success:Mj,error:jj,form:Fj,topSection:Uj,avatarSection:Bj,rightSection:zj,avatarWrapper:$j,avatar:Hj,avatarPlaceholder:Wj,avatarEditBtn:Vj,avatarHint:Gj,field:Kj,disabled:qj,charCount:Yj,socialLinksContainer:Qj,socialInput:Xj,addLinkBtn:Jj,saveBtn:Zj},e3=["Ankara niversitesi","hsan Doramac Bilkent niversitesi","Orta Dou Teknik niversitesi (ODT)","Bakent niversitesi","Hacettepe niversitesi","Atlm niversitesi","Gazi niversitesi","ankaya niversitesi","Ankara Hac Bayram Veli niversitesi","TOBB Ekonomi ve Teknoloji niversitesi","Ankara Yldrm Beyazt niversitesi","Ufuk niversitesi","Ankara Sosyal Bilimler niversitesi","TED niversitesi","Medipol niversitesi","Ankara Mzik ve Gzel Sanatlar niversitesi","Trk Hava Kurumu niversitesi","Salk Bilimleri niversitesi (Glhane Kamps)","Yksek htisas niversitesi","Ostim Teknik niversitesi","Lokman Hekim niversitesi"];function t3({isOpen:t,onClose:e}){const[n,r]=L.useState({displayName:"",email:"",university:"",bio:"",socialLinks:[""],profilePicture:null}),[i,s]=L.useState(!1),[o,l]=L.useState({type:"",text:""}),[u,c]=L.useState(1),f=L.useRef(null);L.useEffect(()=>{if(!t||!lt.currentUser)return;const T=lt.currentUser.uid,v=se(oe,`users/${T}`),y=Pt(v,S=>{const P=S.val();if(P){const F=P.socialLinks||[""];r({displayName:P.displayName||lt.currentUser.displayName||"",email:P.email||lt.currentUser.email||"",university:P.university||"",bio:P.bio||"",socialLinks:F,profilePicture:P.profilePicture||null}),c(F.length)}});return()=>y()},[t]);const h=async T=>{const v=T.target.files[0];if(v){if(v.size>2*1024*1024){l({type:"error",text:"Dosya boyutu 2MB'dan kk olmaldr"});return}if(!v.type.startsWith("image/")){l({type:"error",text:"Sadece resim dosyalar yklenebilir"});return}s(!0);try{const y=new FileReader;y.onload=async S=>{const P=new Image;P.onload=async()=>{try{const F=document.createElement("canvas"),B=F.getContext("2d"),_=200,E=P.naturalWidth,I=P.naturalHeight,x=Math.min(E,I),b=(E-x)/2,D=(I-x)/2;F.width=_,F.height=_,B.fillStyle="#FFFFFF",B.fillRect(0,0,_,_),B.drawImage(P,b,D,x,x,0,0,_,_),F.toBlob(async R=>{R?await g(R):(l({type:"error",text:"Resim ilenirken hata olutu"}),s(!1))},"image/jpeg",.7)}catch(F){console.error("Canvas hatas:",F),l({type:"error",text:"Resim ilenirken hata olutu"}),s(!1)}},P.onerror=()=>{l({type:"error",text:"Resim yklenemedi"}),s(!1)},P.src=S.target.result},y.onerror=()=>{l({type:"error",text:"Dosya okunamad"}),s(!1)},y.readAsDataURL(v)}catch(y){console.error("Resim seme hatas:",y),l({type:"error",text:"Resim seilirken hata olutu"}),s(!1)}}},g=async T=>{s(!0);try{const v=lt.currentUser.uid,y=eO(sO,`profilePictures/${v}/profile.jpg`);await JL(y,T);const S=await ZL(y);await Av(lt.currentUser,{photoURL:S});const P=se(oe,`users/${v}`);await Rr(P,{profilePicture:S}),r(F=>({...F,profilePicture:S})),l({type:"success",text:"Profil resmi gncellendi! "})}catch(v){console.error("Error uploading profile picture:",v),l({type:"error",text:"Profil resmi yklenirken bir hata olutu"})}finally{s(!1)}},w=async()=>{s(!0),l({type:"",text:""});try{const T=lt.currentUser.uid,v=se(oe,`users/${T}`);await Rr(v,{displayName:n.displayName,university:n.university,bio:n.bio,socialLinks:n.socialLinks.filter(y=>y.trim()!=="")}),await Av(lt.currentUser,{displayName:n.displayName}),l({type:"success",text:"Profil gncellendi!"})}catch(T){console.error("Error updating profile:",T),l({type:"error",text:"Profil gncellenirken bir hata olutu"})}finally{s(!1)}},k=(T,v)=>{const y=[...n.socialLinks];y[T]=v,r(S=>({...S,socialLinks:y}))},N=()=>{u<3&&(r(T=>({...T,socialLinks:[...T.socialLinks,""]})),c(T=>T+1))};return t?m.jsx(m.Fragment,{children:m.jsx("div",{className:We.modal,onClick:e,children:m.jsxs("div",{className:We.modalContent,onClick:T=>T.stopPropagation(),children:[m.jsxs("div",{className:We.header,children:[m.jsx("h3",{children:"Profili Dzenle"}),m.jsx("button",{className:We.closeBtn,onClick:e,children:""})]}),o.text&&m.jsx("div",{className:`${We.message} ${We[o.type]}`,children:o.text}),m.jsxs("div",{className:We.form,children:[m.jsxs("div",{className:We.topSection,children:[m.jsxs("div",{className:We.avatarSection,children:[m.jsxs("div",{className:We.avatarWrapper,children:[n.profilePicture?m.jsx("img",{src:n.profilePicture,alt:"Profil",className:We.avatar}):m.jsx("div",{className:We.avatarPlaceholder,children:""}),m.jsx("button",{className:We.avatarEditBtn,onClick:()=>{var T;return(T=f.current)==null?void 0:T.click()},disabled:i,title:"Profil fotoraf ykle",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})})]}),m.jsx("input",{type:"file",ref:f,onChange:h,accept:"image/*",style:{display:"none"}})]}),m.jsxs("div",{className:We.rightSection,children:[m.jsxs("div",{className:We.field,children:[m.jsx("label",{children:"Kullanc Ad"}),m.jsx("input",{type:"text",value:n.displayName,onChange:T=>r(v=>({...v,displayName:T.target.value})),placeholder:"Ad Soyad",maxLength:50})]}),m.jsxs("div",{className:We.field,children:[m.jsx("label",{children:"niversite"}),m.jsxs("select",{value:n.university,onChange:T=>r(v=>({...v,university:T.target.value})),children:[m.jsx("option",{value:"",children:"niversite sein"}),e3.map(T=>m.jsx("option",{value:T,children:T},T))]})]})]})]}),m.jsxs("div",{className:We.field,children:[m.jsx("label",{children:"Biyografi"}),m.jsx("textarea",{value:n.bio,onChange:T=>r(v=>({...v,bio:T.target.value})),placeholder:"Kendinizden bahsedin...",maxLength:200,rows:3}),m.jsxs("span",{className:We.charCount,children:[n.bio.length,"/200"]})]}),m.jsxs("div",{className:We.field,children:[m.jsx("label",{children:"Sosyal Medya Linkleri (maks. 3)"}),m.jsx("div",{className:We.socialLinksContainer,children:n.socialLinks.map((T,v)=>m.jsx("input",{type:"url",value:T||"",onChange:y=>k(v,y.target.value),placeholder:`Link ${v+1} (rn: instagram.com/kullaniciadi)`,className:We.socialInput},v))}),u<3&&m.jsx("button",{type:"button",className:We.addLinkBtn,onClick:N,children:"+ Link Ekle"})]}),m.jsx("button",{className:We.saveBtn,onClick:w,disabled:i,children:i?"Kaydediliyor...":"Kaydet"})]})]})})}):null}const n3="_modal_1qvp9_1",r3="_modalContent_1qvp9_14",i3="_header_1qvp9_30",s3="_closeBtn_1qvp9_47",o3="_settingsSection_1qvp9_69",a3="_settingItem_1qvp9_75",l3="_settingLabel_1qvp9_89",u3="_settingDescription_1qvp9_105",c3="_toggle_1qvp9_116",d3="_slider_1qvp9_127",rr={modal:n3,modalContent:r3,header:i3,closeBtn:s3,settingsSection:o3,settingItem:a3,settingLabel:l3,settingDescription:u3,toggle:c3,slider:d3};function h3({isOpen:t,onClose:e}){const{darkMode:n,toggleDarkMode:r}=uO();return t?m.jsx("div",{className:rr.modal,onClick:e,children:m.jsxs("div",{className:rr.modalContent,onClick:i=>i.stopPropagation(),children:[m.jsxs("div",{className:rr.header,children:[m.jsx("h3",{children:"Ayarlar"}),m.jsx("button",{className:rr.closeBtn,onClick:e,children:""})]}),m.jsx("div",{className:rr.settingsSection,children:m.jsxs("div",{className:rr.settingItem,children:[m.jsxs("div",{className:rr.settingLabel,children:[m.jsx("span",{children:" Karanlk Mod"}),m.jsx("p",{className:rr.settingDescription,children:"Arayz koyu renklerle gster"})]}),m.jsxs("label",{className:rr.toggle,children:[m.jsx("input",{type:"checkbox",checked:n,onChange:r}),m.jsx("span",{className:rr.slider})]})]})})]})}):null}const f3="_navbar_vrjkv_1",p3="_container_vrjkv_15",m3="_logo_vrjkv_24",g3="_actions_vrjkv_34",_3="_iconBtn_vrjkv_40",v3="_menu_vrjkv_94",y3="_profileBtn_vrjkv_98",w3="_dropdown_vrjkv_134",E3="_userInfo_vrjkv_163",C3="_userName_vrjkv_167",S3="_userEmail_vrjkv_178",k3="_divider_vrjkv_188",T3="_menuItem_vrjkv_194",I3="_menuItemDanger_vrjkv_195",It={navbar:f3,container:p3,logo:m3,actions:g3,iconBtn:_3,menu:v3,profileBtn:y3,dropdown:w3,userInfo:E3,userName:C3,userEmail:S3,divider:k3,menuItem:T3,menuItemDanger:I3};function x3(){var k;const{user:t,logout:e}=Dn(),[n,r]=L.useState(!1),[i,s]=L.useState(!1),[o,l]=L.useState(!1),[u,c]=L.useState(!1),[f,h]=L.useState(!1),g=L.useRef(null),w=async()=>{try{await e(),r(!1)}catch(N){console.error("Logout error:",N)}};return L.useEffect(()=>{function N(T){g.current&&!g.current.contains(T.target)&&r(!1)}if(n)return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[n]),m.jsxs(m.Fragment,{children:[m.jsx("nav",{className:It.navbar,children:m.jsxs("div",{className:It.container,children:[m.jsx("div",{className:It.logo,children:m.jsx("img",{src:"/friendly/assets/friendly-logo_trans.png",alt:"Friendly Logo"})}),m.jsxs("div",{className:It.actions,children:[m.jsx("button",{className:It.iconBtn,title:"Bildirimler",onClick:()=>{l(!o),s(!1)},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})})}),m.jsx("button",{className:It.iconBtn,title:"Arkada Ekle",onClick:()=>{s(!0),l(!1)},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})})}),m.jsxs("div",{className:It.menu,ref:g,children:[m.jsx("button",{className:It.profileBtn,onClick:()=>r(!n),title:"Profil",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})})}),n&&m.jsxs("div",{className:It.dropdown,children:[t&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:It.userInfo,children:[m.jsx("p",{className:It.userName,children:t.displayName||((k=t.email)==null?void 0:k.split("@")[0])||"Kullanc"}),m.jsx("p",{className:It.userEmail,children:t.email})]}),m.jsx("hr",{className:It.divider})]}),m.jsx("button",{className:It.menuItem,onClick:()=>{r(!1),c(!0)},children:"Profili Dzenle"}),m.jsx("button",{className:It.menuItem,onClick:()=>{r(!1),h(!0)},children:"Ayarlar"}),m.jsx("hr",{className:It.divider}),m.jsx("button",{className:It.menuItemDanger,onClick:w,children:"k Yap"})]})]})]})]})}),m.jsx(nj,{isOpen:i,onClose:()=>s(!1)}),m.jsx(Pj,{isOpen:o,onClose:()=>l(!1)}),m.jsx(t3,{isOpen:u,onClose:()=>c(!1)}),m.jsx(h3,{isOpen:f,onClose:()=>h(!1)})]})}const N3="_overlay_1h4lc_1",R3="_modal_1h4lc_15",P3="_splitLayout_1h4lc_30",A3="_formPanel_1h4lc_43",b3="_header_1h4lc_64",D3="_icon_1h4lc_71",L3="_title_1h4lc_77",O3="_formGroup_1h4lc_84",M3="_input_1h4lc_89",j3="_selectedAddress_1h4lc_125",F3="_mapInstructions_1h4lc_156",U3="_actions_1h4lc_195",B3="_cancelBtn_1h4lc_202",z3="_confirmBtn_1h4lc_202",$3="_mapPanel_1h4lc_261",H3="_map_1h4lc_156",Ft={overlay:N3,modal:R3,splitLayout:P3,formPanel:A3,header:b3,icon:D3,title:L3,formGroup:O3,input:M3,selectedAddress:j3,mapInstructions:F3,actions:U3,cancelBtn:B3,confirmBtn:z3,mapPanel:$3,map:H3};function W3({isOpen:t,onClose:e,onLocationSelect:n}){const r=L.useRef(null),i=L.useRef(null),s=L.useRef(null),o=L.useRef(null),[l,u]=L.useState(null),[c,f]=L.useState("");L.useEffect(()=>{t&&window.google&&window.google.maps&&r.current&&h()},[t]);const h=async()=>{const w={lat:39.9334,lng:32.8597},k=new window.google.maps.Map(r.current,{center:w,zoom:12,mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!0,zoomControl:!0,restriction:{latLngBounds:{north:40.4,south:39.4,east:33.9,west:31.8}}}),N=new window.google.maps.Marker({map:k,position:w,title:"Seilen Konum",draggable:!0});if(i.current=N,k.addListener("click",T=>{const v={lat:T.latLng.lat(),lng:T.latLng.lng()};N.setPosition(v),new window.google.maps.Geocoder().geocode({location:v},(S,P)=>{P==="OK"&&S[0]&&(f(S[0].formatted_address),u({formatted_address:S[0].formatted_address,geometry:{location:T.latLng},place_id:S[0].place_id}))})}),N.addListener("dragend",T=>{const v={lat:T.latLng.lat(),lng:T.latLng.lng()};new window.google.maps.Geocoder().geocode({location:v},(S,P)=>{P==="OK"&&S[0]&&(f(S[0].formatted_address),u({formatted_address:S[0].formatted_address,geometry:{location:T.latLng},place_id:S[0].place_id}))})}),o.current){const T=new window.google.maps.places.Autocomplete(o.current,{fields:["address_components","geometry","name","formatted_address"],types:["establishment","geocode"],componentRestrictions:{country:"tr"},bounds:new window.google.maps.LatLngBounds({lat:39.4,lng:31.8},{lat:40.4,lng:33.9})});T.addListener("place_changed",()=>{const v=T.getPlace();if(!v.geometry){alert(`"${v.name}" iin detay bulunamad`);return}k.setCenter(v.geometry.location),N.setPosition(v.geometry.location),f(v.formatted_address||v.name),u(v)}),s.current=T}},g=()=>{l&&l.geometry&&(n({address:c,fullAddress:l.formatted_address,coordinates:{lat:l.geometry.location.lat(),lng:l.geometry.location.lng()},placeId:l.place_id}),e())};return t?m.jsx("div",{className:Ft.overlay,onClick:e,children:m.jsx("div",{className:Ft.modal,onClick:w=>w.stopPropagation(),children:m.jsxs("div",{className:Ft.splitLayout,children:[m.jsxs("div",{className:Ft.formPanel,children:[m.jsxs("div",{className:Ft.header,children:[m.jsx("svg",{className:Ft.icon,viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),m.jsx("span",{className:Ft.title,children:"Konum Seimi"})]}),m.jsx("div",{className:Ft.formGroup,children:m.jsx("input",{ref:o,type:"text",placeholder:"Adres ara veya haritadan se...",className:Ft.input})}),c&&m.jsxs("div",{className:Ft.selectedAddress,children:[m.jsx("h4",{children:"Seilen Adres:"}),m.jsx("p",{children:c})]}),m.jsxs("div",{className:Ft.mapInstructions,children:[m.jsxs("p",{children:[" ",m.jsx("strong",{children:"Nasl kullanlr:"})]}),m.jsxs("ul",{children:[m.jsx("li",{children:"Yukardaki arama kutusuna adres yazabilirsiniz"}),m.jsx("li",{children:"Haritaya tklayarak konum seebilirsiniz"}),m.jsx("li",{children:"Krmz iareti srkleyerek konumu ayarlayabilirsiniz"})]})]}),m.jsxs("div",{className:Ft.actions,children:[m.jsx("button",{className:Ft.cancelBtn,onClick:e,children:"ptal"}),m.jsx("button",{className:Ft.confirmBtn,onClick:g,disabled:!l,children:"Se"})]})]}),m.jsx("div",{className:Ft.mapPanel,children:m.jsx("div",{ref:r,className:Ft.map})})]})})}):null}const V3="_bottomBar_1as9v_1",G3="_floatingBtn_1as9v_18",K3="_floatingBtnIcon_1as9v_39",q3="_modal_1as9v_54",Y3="_modalContent_1as9v_77",Q3="_modalHeader_1as9v_115",X3="_adminBadge_1as9v_128",J3="_formGroup_1as9v_144",Z3="_formRow_1as9v_176",e5="_formActions_1as9v_182",t5="_cancelBtn_1as9v_188",n5="_submitBtn_1as9v_189",r5="_locationInputWrapper_1as9v_224",i5="_locationInput_1as9v_224",s5="_locationBtn_1as9v_252",ot={bottomBar:V3,floatingBtn:G3,floatingBtnIcon:K3,modal:q3,modalContent:Y3,modalHeader:Q3,adminBadge:X3,formGroup:J3,formRow:Z3,formActions:e5,cancelBtn:t5,submitBtn:n5,locationInputWrapper:r5,locationInput:i5,locationBtn:s5};function o5(){const[t,e]=L.useState(!1),[n,r]=L.useState(!1),[i,s]=L.useState({title:"",description:"",date:"",time:"",location:"",category:"Sosyal",coordinates:null}),{user:o}=Dn(),l=f=>{s(h=>({...h,location:f.fullAddress,coordinates:f.coordinates}))},u=f=>{const{name:h,value:g}=f.target;s(w=>({...w,[h]:g}))},c=async f=>{if(f.preventDefault(),!!o)try{const h={...i,createdBy:o.uid,createdByEmail:o.email,createdByName:o.displayName||o.email.split("@")[0],createdAt:new Date().toISOString(),participation:{[o.uid]:"approved"},participantCount:1},w=(await Ro(se(oe,"events"),h)).key;console.log("BottomBar: Yeni etkinlik oluturuldu:",w);try{const k=se(oe,"users"),N=await Cl(k);if(N.exists()){const T=N.val(),v=o.displayName||o.email.split("@")[0],y=Object.keys(T).filter(S=>S!==o.uid).map(async S=>{try{const P=Ro(se(oe,`notifications/${S}`));return await Lr(P,{type:"new_event",eventId:w,eventTitle:i.title,from:o.uid,fromName:v,message:`${v} yeni bir etkinlik oluturdu!`,timestamp:Date.now(),read:!1})}catch(P){return console.error(`BottomBar: ${S} kullancsna bildirim gnderilemedi:`,P),null}});await Promise.allSettled(y),console.log("BottomBar: Etkinlik bildirimleri gnderildi")}}catch(k){console.error("BottomBar: Bildirim gnderme hatas:",k)}s({title:"",description:"",date:"",time:"",location:"",category:"Sosyal",coordinates:null}),e(!1)}catch(h){console.error("Etkinlik oluturulurken hata:",h)}};return o?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:ot.bottomBar}),m.jsx("button",{className:ot.floatingBtn,onClick:()=>e(!0),title:"Etkinlik Olutur (Admin)",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:ot.floatingBtnIcon,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),t&&m.jsx("div",{className:ot.modal,onClick:()=>e(!1),children:m.jsxs("div",{className:ot.modalContent,onClick:f=>f.stopPropagation(),children:[m.jsxs("div",{className:ot.modalHeader,children:[m.jsx("h2",{children:"Etkinlik Olutur"}),m.jsx("span",{className:ot.adminBadge,children:" Admin"})]}),m.jsxs("form",{onSubmit:c,children:[m.jsxs("div",{className:ot.formGroup,children:[m.jsx("label",{children:"Balk"}),m.jsx("input",{type:"text",name:"title",value:i.title,onChange:u,placeholder:"Etkinlik bal",required:!0})]}),m.jsxs("div",{className:ot.formGroup,children:[m.jsx("label",{children:"Aklama"}),m.jsx("textarea",{name:"description",value:i.description,onChange:u,placeholder:"Etkinliin aklamas",rows:"4",required:!0})]}),m.jsxs("div",{className:ot.formRow,children:[m.jsxs("div",{className:ot.formGroup,children:[m.jsx("label",{children:"Tarih"}),m.jsx("input",{type:"date",name:"date",value:i.date,onChange:u,required:!0})]}),m.jsxs("div",{className:ot.formGroup,children:[m.jsx("label",{children:"Saat"}),m.jsx("input",{type:"time",name:"time",value:i.time,onChange:u,required:!0})]})]}),m.jsxs("div",{className:ot.formGroup,children:[m.jsx("label",{children:"Konum"}),m.jsxs("div",{className:ot.locationInputWrapper,children:[m.jsx("input",{type:"text",name:"location",value:i.location,placeholder:i.location||"Konum semek iin tklayn",readOnly:!0,className:ot.locationInput}),m.jsx("button",{type:"button",className:ot.locationBtn,onClick:()=>r(!0),children:" Se"})]})]}),m.jsxs("div",{className:ot.formGroup,children:[m.jsx("label",{children:"Kategori"}),m.jsxs("select",{name:"category",value:i.category,onChange:u,children:[m.jsx("option",{value:"Sosyal",children:"Sosyal"}),m.jsx("option",{value:"Spor",children:"Spor"}),m.jsx("option",{value:"Eitim",children:"Eitim"}),m.jsx("option",{value:"Sanat",children:"Sanat"}),m.jsx("option",{value:"Dier",children:"Dier"})]})]}),m.jsxs("div",{className:ot.formActions,children:[m.jsx("button",{type:"button",className:ot.cancelBtn,onClick:()=>e(!1),children:"ptal"}),m.jsx("button",{type:"submit",className:ot.submitBtn,children:"Olutur"})]})]})]})}),m.jsx(W3,{isOpen:n,onClose:()=>r(!1),onLocationSelect:l})]}):null}function a5({children:t}){return m.jsxs("div",{className:My.layout,children:[m.jsx(x3,{}),m.jsx("main",{className:My.main,children:t}),m.jsx(o5,{})]})}function l5(){return m.jsx(a5,{children:m.jsxs("div",{className:Ru.homeContainer,children:[m.jsx("div",{className:Ru.eventsColumn,children:m.jsx(TM,{})}),m.jsx("div",{className:Ru.mapColumn,children:m.jsx(EO,{})}),m.jsx("div",{className:Ru.chatColumn,children:m.jsx(Z4,{})})]})})}function jy(){const{id:t}=dE();return m.jsxs("div",{style:{padding:"1rem"},children:[m.jsx("h2",{children:"Event Detail"}),m.jsxs("p",{children:["Event id: ",t]})]})}function u5({author:t,content:e,authorId:n,onAuthorClick:r}){return m.jsxs("div",{style:{padding:"0.5rem 0",borderBottom:"1px solid #e5e7eb"},children:[m.jsx("div",{style:{fontWeight:600,color:"#4a7ab5",cursor:n&&r?"pointer":"default",transition:"color 0.2s"},onMouseEnter:i=>{n&&r&&(i.target.style.color="#3d5f8d")},onMouseLeave:i=>{n&&r&&(i.target.style.color="#4a7ab5")},onClick:()=>{n&&r&&r(n)},children:t}),m.jsx("div",{children:e})]})}se(oe,"rooms");function c5(t,e){const n=se(oe,`rooms/${t}/messages`);return Pt(n,r=>{if(!r.exists()){e([]);return}const i=r.val(),s=Object.keys(i).map(o=>({id:o,...i[o]})).sort((o,l)=>new Date(o.createdAt)-new Date(l.createdAt));e(s)})}function d5(t){const[e,n]=L.useState([]);return L.useEffect(()=>{if(!t)return;const r=c5(t,n);return()=>r()},[t]),{messages:e}}function h5(){const{id:t}=dE(),{messages:e}=d5(t);return m.jsxs("div",{style:{padding:"1rem"},children:[m.jsx("h2",{children:"Chat Room"}),m.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[e.map(n=>m.jsx(u5,{author:n.user_id,content:n.content},n.id)),e.length===0&&m.jsx("p",{children:"No messages yet."})]})]})}function f5(){return m.jsxs("div",{style:{padding:"1rem"},children:[m.jsx("h2",{children:"Profile"}),m.jsx("p",{children:"Profile content goes here."})]})}const p5="_authContainer_11zer_1",m5="_authCard_11zer_28",g5="_authHeader_11zer_48",_5="_logo_11zer_53",v5="_errorMessage_11zer_74",y5="_successMessage_11zer_84",w5="_form_11zer_101",E5="_formGroup_11zer_108",C5="_submitBtn_11zer_141",S5="_divider_11zer_168",k5="_authFooter_11zer_194",T5="_link_11zer_204",be={authContainer:p5,authCard:m5,authHeader:g5,logo:_5,errorMessage:v5,successMessage:y5,form:w5,formGroup:E5,submitBtn:C5,divider:S5,authFooter:k5,link:T5};function I5(){const[t,e]=L.useState(""),[n,r]=L.useState(""),[i,s]=L.useState(""),[o,l]=L.useState(!1),{signInWithEmail:u}=Dn(),c=Nl(),f=async h=>{h.preventDefault(),s(""),l(!0);try{if(!t||!n){s("Ltfen tm alanlar doldurunuz");return}await u(t,n),c("/main")}catch(g){s({"auth/user-not-found":"E-posta veya ifre hatal","auth/wrong-password":"E-posta veya ifre hatal","auth/invalid-email":"Geersiz e-posta adresi","auth/invalid-credential":"E-posta veya ifre hatal. Ltfen tekrar deneyin","auth/user-disabled":"Bu hesap devre d braklm","auth/too-many-requests":"ok fazla baarsz deneme. Ltfen daha sonra tekrar deneyiniz"}[g.code]||"Giri yaplamad. Ltfen tekrar deneyin")}finally{l(!1)}};return m.jsx("div",{className:be.authContainer,children:m.jsxs("div",{className:be.authCard,children:[m.jsx("div",{className:be.authHeader,children:m.jsx("img",{src:"/friendly/assets/friendly-logo_trans.png",alt:"Friendly Logo",className:be.logo})}),i&&m.jsx("div",{className:be.errorMessage,children:i}),m.jsxs("form",{onSubmit:f,className:be.form,children:[m.jsxs("div",{className:be.formGroup,children:[m.jsx("label",{htmlFor:"email",children:"renci E-posta"}),m.jsx("input",{id:"email",type:"email",placeholder:"ornek@hacettepe.edu.tr",value:t,onChange:h=>e(h.target.value),disabled:o})]}),m.jsxs("div",{className:be.formGroup,children:[m.jsx("label",{htmlFor:"password",children:"ifre"}),m.jsx("input",{id:"password",type:"password",placeholder:"",value:n,onChange:h=>r(h.target.value),disabled:o})]}),m.jsx("button",{type:"submit",className:be.submitBtn,disabled:o,children:o?"Girii devam ediyor...":"Giri Yap"})]}),m.jsx("div",{className:be.divider,children:"veya"}),m.jsxs("div",{className:be.authFooter,children:[m.jsx("p",{children:"Henz hesabn yok mu?"}),m.jsx(gE,{to:"/kayit",className:be.link,children:"Kayt Ol"})]})]})})}function x5(){const[t,e]=L.useState(""),[n,r]=L.useState(""),[i,s]=L.useState(""),[o,l]=L.useState(""),[u,c]=L.useState(""),[f,h]=L.useState(""),[g,w]=L.useState(!1),{signUpWithEmail:k}=Dn(),N=Nl(),T=async v=>{var y;v.preventDefault(),c(""),w(!0);try{if(!t||!n||!i||!o){c("Ltfen tm alanlar doldurunuz");return}if(n.length<6){c("ifre en az 6 karakter olmaldr");return}if(n!==i){c("ifreler elemiyor");return}if(o.length<2){c("Ad en az 2 karakter olmaldr");return}const S=await k(t,n),P=(y=S==null?void 0:S.user)==null?void 0:y.uid;if(!P){c(""),h("Aramza hogeldin, giri yapabilirsin! "),setTimeout(()=>{N("/giris")},2e3);return}try{console.log("RegisterPage: Kullanc database'e kaydediliyor...",P),await Lr(se(oe,`users/${P}`),{uid:P,email:t,displayName:o,createdAt:new Date().toISOString(),profilePicture:null,bio:"",location:null}),console.log("RegisterPage: Kullanc baaryla kaydedildi!")}catch(F){console.error("RegisterPage: Database kayt hatas:",F)}c(""),N("/main")}catch(S){console.error("Kayt hatas:",S);const P={"auth/email-already-in-use":"Bu e-posta adresi zaten kullanlmakta","auth/invalid-email":"Geersiz e-posta adresi","auth/weak-password":"ifre ok zayf. En az 6 karakter ve kark karakterler iermeli","auth/operation-not-allowed":"Kayt ilemi u anda yaplamyor"};if(S.message&&S.message.includes("can't access property")){c(""),h("Aramza hogeldin, giri yapabilirsin! "),setTimeout(()=>{N("/giris")},2e3);return}c(P[S.code]||"Kayt baarsz: "+S.message)}finally{w(!1)}};return m.jsx("div",{className:be.authContainer,children:m.jsxs("div",{className:be.authCard,children:[m.jsx("div",{className:be.authHeader,children:m.jsx("img",{src:"/friendly/assets/friendly-logo_trans.png",alt:"Friendly Logo",className:be.logo})}),u&&m.jsx("div",{className:be.errorMessage,children:u}),f&&m.jsx("div",{className:be.successMessage,children:f}),m.jsxs("form",{onSubmit:T,className:be.form,children:[m.jsxs("div",{className:be.formGroup,children:[m.jsx("label",{htmlFor:"displayName",children:"Ad Soyad"}),m.jsx("input",{id:"displayName",type:"text",placeholder:"Adnz girin",value:o,onChange:v=>l(v.target.value),disabled:g})]}),m.jsxs("div",{className:be.formGroup,children:[m.jsx("label",{htmlFor:"email",children:"renci E-posta"}),m.jsx("input",{id:"email",type:"email",placeholder:"ornek@hacettepe.edu.tr",value:t,onChange:v=>e(v.target.value),disabled:g})]}),m.jsxs("div",{className:be.formGroup,children:[m.jsx("label",{htmlFor:"password",children:"ifre"}),m.jsx("input",{id:"password",type:"password",placeholder:"",value:n,onChange:v=>r(v.target.value),disabled:g})]}),m.jsxs("div",{className:be.formGroup,children:[m.jsx("label",{htmlFor:"confirmPassword",children:"ifreyi Onayla"}),m.jsx("input",{id:"confirmPassword",type:"password",placeholder:"",value:i,onChange:v=>s(v.target.value),disabled:g})]}),m.jsx("button",{type:"submit",className:be.submitBtn,disabled:g,children:g?"Hesap oluturuluyor...":"Kayt Ol"})]}),m.jsx("div",{className:be.divider,children:"veya"}),m.jsxs("div",{className:be.authFooter,children:[m.jsx("p",{children:"Zaten hesabn var m?"}),m.jsx(gE,{to:"/giris",className:be.link,children:"Giri Yap"})]})]})})}function Hs({children:t}){const{user:e,loading:n}=Dn(),r=Oo();return n?m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"var(--color-text-secondary)"},children:"Ykleniyor..."}):e?t:m.jsx(Hu,{to:"/giris",state:{from:r},replace:!0})}const N5=()=>m.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[m.jsx("h1",{children:"Hakknda"}),m.jsx("p",{children:"Friendly WebGIS Platform"})]}),R5=ox([{path:"/giris",element:m.jsx(I5,{})},{path:"/kayit",element:m.jsx(x5,{})},{path:"/main",element:m.jsx(Hs,{children:m.jsx(l5,{})})},{path:"/",element:m.jsx(Hu,{to:"/main",replace:!0})},{path:"/events",element:m.jsx(Hs,{children:m.jsx(jy,{})})},{path:"/events/:id",element:m.jsx(Hs,{children:m.jsx(jy,{})})},{path:"/chat/:id",element:m.jsx(Hs,{children:m.jsx(h5,{})})},{path:"/profile",element:m.jsx(Hs,{children:m.jsx(f5,{})})},{path:"/about",element:m.jsx(Hs,{children:m.jsx(N5,{})})},{path:"/",element:m.jsx(Hu,{to:"/main",replace:!0})},{path:"*",element:m.jsx(Hu,{to:"/main",replace:!0})}],{basename:"/friendly"});Lh.createRoot(document.getElementById("root")).render(m.jsx(Qy.StrictMode,{children:m.jsx(lO,{children:m.jsx(oO,{children:m.jsx(mx,{router:R5})})})}));
